{"remainingRequest":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/src/layouts/components/vertical-nav-menu/PanelItems/components/LibraryItem.vue?vue&type=style&index=0&id=2bb5a842&scoped=true&lang=css&","dependencies":[{"path":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/src/layouts/components/vertical-nav-menu/PanelItems/components/LibraryItem.vue","mtime":1617441641267},{"path":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/falcon-puneet/Documents/Arbunize/videowiki/video-wiki-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.items-center {\n  text-align: center;\n  text-align: -moz-center;\n  text-align: -webkit-center;\n}\n.items-left {\n  text-align: left;\n  text-align: -moz-left;\n  text-align: -webkit-left;\n}\n.scroll-area {\n  position: relative;\n  width: 100%;\n}\n.scroll-videos {\n  height: 45vh;\n}\n.scroll-default {\n  height: 60vh;\n}\n",{"version":3,"sources":["LibraryItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAicA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LibraryItem.vue","sourceRoot":"src/layouts/components/vertical-nav-menu/PanelItems/components","sourcesContent":["<template>\n  <div class=\"vx-card\" style=\"height: 100%\">\n    <div class=\"vx-card__collapsible-content vs-con-loading__container\">\n      <div class=\"vx-card__header\">\n        <div class=\"vx-card__title\">\n          <h4>{{ $t('studio.sidebarPanel.library.l2') }} {{ sceneNum }}</h4>\n          <!--h6>\n            {{\n              tabIndex === 0\n                ? $t('studio.sidebarPanel.library.l3')\n                : tabIndex === 1\n                ? $t('studio.sidebarPanel.library.l4')\n                : $t('studio.sidebarPanel.library.l5')\n            }}\n          </h6-->\n          <h6>Select one media to continue</h6>\n        </div>\n      </div>\n      <div class=\"vx-card__body\">\n        <vs-tabs v-model=\"activeTabIndex\" class=\"-mr-3\">\n          <vs-tab label=\"Videos\">\n            <vx-input-group class=\"mb-2\">\n              <vs-input\n                v-model=\"searchQuery\"\n                :placeholder=\"$t('studio.sidebarPanel.library.l6')\"\n              />\n              <template slot=\"append\">\n                <div class=\"append-text btn-addon\">\n                  <vs-button\n                    color=\"primary\"\n                    class=\"vs-con-loading__container\"\n                    id=\"button-with-loading\"\n                    icon-pack=\"feather\"\n                    icon=\"icon-search\"\n                    :disabled=\"searchInProgress\"\n                    @click=\"searchMedia\"\n                  ></vs-button>\n                </div>\n              </template>\n            </vx-input-group>\n            <div>\n              <vs-row v-if=\"keywords.length !== 0\" class=\"mb-base\">\n                <p\n                  v-for=\"(k, indexk) in keywords\"\n                  :key=\"`scene_${sceneNum}_${indexk}`\"\n                  class=\"font-semibold mr-3\"\n                  @click=\"addsearchVideo(k)\"\n                  style=\"\n                    cursor: pointer;\n                    white-space: normal;\n                    overflow-wrap: break-word;\n                    line-break: anywhere;\n                  \"\n                >\n                  <u>#{{ k }}</u>\n                </p>\n              </vs-row>\n              <div v-else>\n                <p\n                  style=\"\n                    cursor: pointer;\n                    white-space: normal;\n                    overflow-wrap: break-word;\n                    line-break: anywhere;\n                  \"\n                  class=\"mt-4\"\n                >\n                  <!--span class=\"text-danger\"\n                    >No Video and Keywords found for this scene.</span\n                  ><br /-->\n                  Try using the search or upload your own video.\n                </p>\n              </div>\n              <!--div\n                v-for=\"(v, indexv) in searchedVideos[sceneNum - 1]\"\n                :key=\"`sv_${sceneNum}_${indexv}_${v[3]}`\"\n                class=\"w-full mb-base\"\n              >\n                <VideoPreview\n                  :src=\"v[1]\"\n                  @click.native=\"selectVideo(v)\"\n                  class=\"cursor-pointer\"\n                />\n                <div\n                  class=\"font-semibold items-left\"\n                  style=\"white-space: normal\"\n                >\n                  #{{ v[3].substring(0, v[3].length - 2) }}\n                </div>\n              </div-->\n              <component\n                :is=\"scrollbarTag\"\n                ref=\"verticalNavMenuPs\"\n                class=\"scroll-area scroll-videos pr-3\"\n                :settings=\"settings\"\n                :key=\"$vs.rtl\"\n              >\n                <div\n                  v-for=\"(v, indexv) in videoList\"\n                  :key=\"`v_${sceneNum}_${indexv}`\"\n                  class=\"w-full mb-base\"\n                >\n                  <VideoPreview\n                    :src=\"v[1]\"\n                    v-show=\"v[3] !== ''\"\n                    @click.native=\"selectVideo(v)\"\n                    class=\"cursor-pointer\"\n                  />\n                  <div\n                    class=\"font-semibold items-left\"\n                    style=\"white-space: normal\"\n                    v-show=\"v[3] !== ''\"\n                  >\n                    #{{ v[3].substring(0, v[3].length - 2) }}\n                  </div>\n                </div>\n              </component>\n            </div>\n          </vs-tab>\n          <vs-tab label=\"Images\">\n            <vx-input-group class=\"mb-2\">\n              <vs-input\n                v-model=\"searchQuery\"\n                :placeholder=\"$t('studio.sidebarPanel.library.l7')\"\n              />\n              <template slot=\"append\">\n                <div class=\"append-text btn-addon\">\n                  <vs-button\n                    color=\"primary\"\n                    class=\"vs-con-loading__container\"\n                    id=\"button-with-loading\"\n                    icon-pack=\"feather\"\n                    icon=\"icon-search\"\n                    :disabled=\"searchInProgress\"\n                    @click=\"searchMedia\"\n                  ></vs-button>\n                </div>\n              </template>\n            </vx-input-group>\n            <vs-row v-if=\"keywords.length !== 0\" class=\"mb-base\">\n              <p\n                v-for=\"(k, indexk) in keywords\"\n                :key=\"`scene_${sceneNum}_${indexk}`\"\n                class=\"font-semibold mr-3\"\n                @click=\"addsearchVideo(k)\"\n                style=\"\n                    cursor: pointer;\n                    white-space: normal;\n                    overflow-wrap: break-word;\n                    line-break: anywhere;\n                  \"\n              >\n                <u>#{{ k }}</u>\n              </p>\n            </vs-row>\n            <!--div\n              v-for=\"(img, indexi) in $store.state.studio.searchedImages[\n                sceneNum - 1\n              ]\"\n              :key=\"`si_${sceneNum}_${indexi}`\"\n              class=\"w-full mb-base\"\n            >\n              <ImagePreview\n                :src=\"img[0]\"\n                v-if=\"img[0]\"\n                :imageId=\"`s_img_${indexi}`\"\n                @motion=\"selectImage(img[0], $event)\"\n              />\n              <div\n                class=\"font-semibold items-left\"\n                style=\"white-space: normal\"\n                v-if=\"img[1] !== ''\"\n              >\n                #{{ img[1].split(',')[0] }}\n              </div>\n            </div-->\n            <component\n              :is=\"scrollbarTag\"\n              ref=\"verticalNavMenuPs\"\n              class=\"scroll-area scroll-default pr-3\"\n              :settings=\"settings\"\n              :key=\"$vs.rtl\"\n            >\n              <div\n                v-for=\"(img, indexi) in imageList\"\n                :key=\"`i_${sceneNum}_${indexi}`\"\n                class=\"w-full mb-base\"\n              >\n                <ImagePreview\n                  :src=\"img[0]\"\n                  v-if=\"img[0]\"\n                  :imageId=\"`img_${indexi}`\"\n                  @motion=\"selectImage(img[0], $event)\"\n                />\n                <div\n                  class=\"font-semibold items-left\"\n                  style=\"white-space: normal\"\n                >\n                  #{{ img[2] ? img[2] : img[1].split(',')[0] }}\n                </div>\n              </div>\n            </component>\n          </vs-tab>\n          <vs-tab label=\"Uploads\">\n            <div class=\"text-center mb-base mt-3\">\n              <input\n                type=\"file\"\n                :id=\"`realfile${sceneNum}`\"\n                @change=\"uploadFile\"\n                class=\"hidden\"\n                accept=\"video/*,image/*\"\n              />\n              <vs-button\n                size=\"medium\"\n                id=\"button-with-loading-library\"\n                class=\"vs-con-loading__container\"\n                :disabled=\"uploadInProgress\"\n                @click=\"chooseFile\"\n              >\n                Upload Media\n              </vs-button>\n            </div>\n            <component\n              :is=\"scrollbarTag\"\n              ref=\"verticalNavMenuPs\"\n              class=\"scroll-area scroll-default pr-3\"\n              :settings=\"settings\"\n              :key=\"$vs.rtl\"\n            >\n              <div\n                v-for=\"(media, indexu) in uploadedMedia\"\n                :key=\"`uv_${indexu}`\"\n                class=\"w-full mb-base\"\n              >\n                <h6 class=\"mb-3 truncate .max-w-xxs\">{{ media.fileName }}</h6>\n                <VideoPreview\n                  :src=\"media.url\"\n                  v-if=\"checkUrl(media.url)\"\n                  class=\"cursor-pointer\"\n                  @click.native=\"selectVideo([media.fileName, media.url])\"\n                />\n                <ImagePreview\n                  v-else\n                  :src=\"media.url\"\n                  :imageId=\"`u_img_${indexu}`\"\n                  @motion=\"selectImage(media.url, $event)\"\n                />\n              </div>\n            </component>\n          </vs-tab>\n        </vs-tabs>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar';\nimport VideoPreview from './VideoPreview';\nimport ImagePreview from './ImagePreview';\nexport default {\n  components: { VideoPreview, ImagePreview, VuePerfectScrollbar },\n  name: 'LibraryItem',\n  data() {\n    return {\n      searchQuery: '',\n      playPromise: null,\n      searchInProgress: false,\n      tabIndex: 0,\n      uploadInProgress: false,\n      settings: {\n        // perfectScrollbar settings\n        maxScrollbarLength: 80,\n        wheelSpeed: 1,\n        swipeEasing: true\n      }\n      /* defaultVideo: [\n        '',\n        'https://player.vimeo.com/external/183300007.hd.mp4?s=ca181ca041236fab57280de20de21b78a202bbf8&profile_id=174',\n      ], */\n    };\n  },\n  props: ['keywords', 'sceneNum'],\n  computed: {\n    uploadedMedia() {\n      return this.$store.state.studio.uploadedMedia;\n    },\n    videoList() {\n      return this.$store.state.studio.videos[this.sceneNum - 1];\n    },\n    imageList() {\n      return this.$store.state.studio.images[this.sceneNum - 1];\n    },\n    scrollbarTag() {\n      return this.$store.getters.scrollbarTag;\n    },\n    uploadedDocumentIsPPT() {\n      return this.$store.state.studio.video.fromPPT;\n    },\n    activeTabIndex: {\n      get() {\n        if (this.uploadedDocumentIsPPT) {\n          return 1;\n        } else return this.tabIndex;\n      },\n      set(val) {\n        this.tabIndex = val;\n      }\n    }\n  },\n  methods: {\n    checkUrl(url) {\n      const media = url.split('.');\n      if (media[media.length - 1] !== 'mp4') return false;\n      return true;\n    },\n    chooseFile() {\n      document.getElementById(`realfile${this.sceneNum}`).click();\n    },\n    uploadFile(event) {\n      const selectedFile = event.target.files[0];\n      this.uploadInProgress = true;\n      this.$vs.loading({\n        background: 'primary',\n        color: '#fff',\n        container: '#button-with-loading-library',\n        scale: 0.45\n      });\n      this.$store\n        .dispatch('studio/uploadMedia', selectedFile)\n        .then(url => {\n          const dataObj = {\n            fileName: selectedFile.name,\n            url\n          };\n          this.$store.commit('studio/setUploadedMedia', dataObj);\n        })\n        .catch(() => {\n          this.$vs.notify({\n            title: 'Error Occured',\n            text: ' Media upload failed',\n            color: 'danger'\n          });\n        })\n        .finally(() => {\n          document.getElementById(`realfile${this.sceneNum}`).value = '';\n          this.uploadInProgress = false;\n          this.$vs.loading.close(\n            '#button-with-loading-library > .con-vs-loading'\n          );\n        });\n    },\n    selectVideo(v) {\n      this.$store.commit('studio/selectVideo', {\n        value: v[1],\n        sceneNum: this.sceneNum\n      });\n    },\n    selectImage(img, zoomType) {\n      if (zoomType === 'none') {\n        this.$store.commit('studio/selectVideo', {\n          value: img,\n          sceneNum: this.sceneNum\n        });\n        return;\n      }\n\n      const dataObj = {\n        image_url: img,\n        zoom: zoomType\n      };\n      this.$Progress.start();\n      this.$vs.loading({ color: 'transparent' });\n      this.$store\n        .dispatch('studio/addMotionToImage', dataObj)\n        .then(data => {\n          this.$Progress.finish();\n          this.$vs.loading.close();\n          this.$store.commit('studio/selectVideo', {\n            value: data.url,\n            sceneNum: this.sceneNum\n          });\n        })\n        .catch(() => {\n          this.$Progress.fail();\n          this.$vs.loading.close();\n        });\n    },\n    addsearchVideo(k) {\n      this.searchQuery = k;\n      this.searchMedia();\n    },\n    addKeyword() {\n      const payload = {\n        keyword: this.searchQuery,\n        sceneNum: this.sceneNum - 1\n      };\n      this.$store.commit('studio/addKeyword', payload);\n    },\n    searchMedia() {\n      this.searchInProgress = true;\n      this.$vs.loading({\n        background: 'primary',\n        color: '#fff',\n        container: '#button-with-loading',\n        scale: 0.4\n      });\n      const mediaType = this.tabIndex === 0 ? 'video' : 'image';\n      const dataObj = {\n        searchQuery: this.searchQuery,\n        srcLang: this.$store.state.studio.video.srcLang,\n        type: mediaType\n      };\n      this.$store\n        .dispatch('studio/searchMedia', dataObj)\n        .then(res => {\n          if (Object.keys(res.data).length === 0) {\n            this.$vs.notify({\n              title: 'Not Found',\n              text: `Cannot find ${mediaType}s related to this keyword`,\n              color: 'danger'\n            });\n          } else {\n            const dataObj = {\n              sceneNum: this.sceneNum - 1,\n              value: res.data\n            };\n            mediaType === 'video'\n              ? this.$store.commit('studio/setSearchedVideos', dataObj)\n              : this.$store.commit('studio/setSearchedImages', dataObj);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        })\n        .finally(() => {\n          this.searchInProgress = false;\n          this.$vs.loading.close('#button-with-loading > .con-vs-loading');\n        });\n\n      if (!this.keywords.includes(this.searchQuery)) {\n        this.addKeyword();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.items-center {\n  text-align: center;\n  text-align: -moz-center;\n  text-align: -webkit-center;\n}\n.items-left {\n  text-align: left;\n  text-align: -moz-left;\n  text-align: -webkit-left;\n}\n.scroll-area {\n  position: relative;\n  width: 100%;\n}\n.scroll-videos {\n  height: 45vh;\n}\n.scroll-default {\n  height: 60vh;\n}\n</style>\n"]}]}