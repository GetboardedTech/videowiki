{"version":3,"file":"vue-instantsearch.js","sources":["../src/util/warn.js","../src/mixins/widget.js","../node_modules/instantsearch.js/es/lib/utils/uniq.js","../node_modules/instantsearch.js/es/lib/utils/find.js","../node_modules/instantsearch.js/es/lib/utils/unescapeRefinement.js","../node_modules/instantsearch.js/es/lib/utils/getRefinements.js","../node_modules/instantsearch.js/es/lib/utils/clearRefinements.js","../node_modules/instantsearch.js/es/lib/utils/escapeRefinement.js","../node_modules/instantsearch.js/es/lib/utils/checkRendering.js","../node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js","../node_modules/instantsearch.js/es/lib/utils/noop.js","../node_modules/instantsearch.js/es/lib/utils/isFiniteNumber.js","../node_modules/instantsearch.js/es/lib/utils/isPlainObject.js","../node_modules/instantsearch.js/es/lib/utils/range.js","../node_modules/instantsearch.js/es/lib/utils/isEqual.js","../node_modules/instantsearch.js/es/lib/utils/escape.js","../node_modules/instantsearch.js/es/lib/utils/mergeDeep.js","../node_modules/instantsearch.js/es/lib/utils/logger.js","../node_modules/instantsearch.js/es/lib/utils/documentation.js","../node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js","../node_modules/instantsearch.js/es/lib/utils/hits-query-id.js","../node_modules/instantsearch.js/es/connectors/clear-refinements/connectClearRefinements.js","../node_modules/instantsearch.js/es/connectors/current-refinements/connectCurrentRefinements.js","../node_modules/instantsearch.js/es/connectors/hierarchical-menu/connectHierarchicalMenu.js","../node_modules/instantsearch.js/es/lib/escape-highlight.js","../node_modules/instantsearch.js/es/connectors/hits/connectHits.js","../node_modules/instantsearch.js/es/lib/insights/client.js","../node_modules/instantsearch.js/es/connectors/hits/connectHitsWithInsights.js","../node_modules/instantsearch.js/es/connectors/hits-per-page/connectHitsPerPage.js","../node_modules/instantsearch.js/es/connectors/infinite-hits/connectInfiniteHits.js","../node_modules/instantsearch.js/es/connectors/infinite-hits/connectInfiniteHitsWithInsights.js","../node_modules/instantsearch.js/es/connectors/menu/connectMenu.js","../node_modules/instantsearch.js/es/connectors/numeric-menu/connectNumericMenu.js","../node_modules/instantsearch.js/es/connectors/pagination/Paginator.js","../node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js","../node_modules/instantsearch.js/es/connectors/range/connectRange.js","../node_modules/instantsearch.js/es/connectors/refinement-list/connectRefinementList.js","../node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js","../node_modules/instantsearch.js/es/connectors/sort-by/connectSortBy.js","../node_modules/instantsearch.js/es/connectors/rating-menu/connectRatingMenu.js","../node_modules/instantsearch.js/es/connectors/stats/connectStats.js","../node_modules/instantsearch.js/es/connectors/toggleRefinement/connectToggleRefinement.js","../node_modules/instantsearch.js/es/connectors/breadcrumb/connectBreadcrumb.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isArray.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/isLength.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/keys.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_baseFindIndex.js","../node_modules/lodash/_baseIsNaN.js","../node_modules/lodash/_strictIndexOf.js","../node_modules/lodash/_baseIndexOf.js","../node_modules/lodash/_arrayIncludes.js","../node_modules/lodash/_arrayIncludesWith.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_baseIntersection.js","../node_modules/lodash/identity.js","../node_modules/lodash/_apply.js","../node_modules/lodash/_overRest.js","../node_modules/lodash/constant.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_baseSetToString.js","../node_modules/lodash/_shortOut.js","../node_modules/lodash/_setToString.js","../node_modules/lodash/_baseRest.js","../node_modules/lodash/isArrayLikeObject.js","../node_modules/lodash/_castArrayLikeObject.js","../node_modules/lodash/intersection.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_castFunction.js","../node_modules/lodash/forOwn.js","../node_modules/lodash/_arrayEach.js","../node_modules/lodash/_createBaseEach.js","../node_modules/lodash/_baseEach.js","../node_modules/lodash/forEach.js","../node_modules/lodash/_arrayFilter.js","../node_modules/lodash/_baseFilter.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/_arraySome.js","../node_modules/lodash/_equalArrays.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_mapToArray.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_equalByTag.js","../node_modules/lodash/_arrayPush.js","../node_modules/lodash/_baseGetAllKeys.js","../node_modules/lodash/stubArray.js","../node_modules/lodash/_getSymbols.js","../node_modules/lodash/_getAllKeys.js","../node_modules/lodash/_equalObjects.js","../node_modules/lodash/_DataView.js","../node_modules/lodash/_Promise.js","../node_modules/lodash/_Set.js","../node_modules/lodash/_WeakMap.js","../node_modules/lodash/_getTag.js","../node_modules/lodash/_baseIsEqualDeep.js","../node_modules/lodash/_baseIsEqual.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/_isKey.js","../node_modules/lodash/memoize.js","../node_modules/lodash/_memoizeCapped.js","../node_modules/lodash/_stringToPath.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/toString.js","../node_modules/lodash/_castPath.js","../node_modules/lodash/_toKey.js","../node_modules/lodash/_baseGet.js","../node_modules/lodash/get.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","../node_modules/lodash/property.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/filter.js","../node_modules/lodash/_baseMap.js","../node_modules/lodash/map.js","../node_modules/lodash/_arrayReduce.js","../node_modules/lodash/_baseReduce.js","../node_modules/lodash/reduce.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/_assignValue.js","../node_modules/lodash/_copyObject.js","../node_modules/lodash/_baseAssign.js","../node_modules/lodash/_nativeKeysIn.js","../node_modules/lodash/_baseKeysIn.js","../node_modules/lodash/keysIn.js","../node_modules/lodash/_baseAssignIn.js","../node_modules/lodash/_cloneBuffer.js","../node_modules/lodash/_copyArray.js","../node_modules/lodash/_copySymbols.js","../node_modules/lodash/_getPrototype.js","../node_modules/lodash/_getSymbolsIn.js","../node_modules/lodash/_copySymbolsIn.js","../node_modules/lodash/_getAllKeysIn.js","../node_modules/lodash/_initCloneArray.js","../node_modules/lodash/_cloneArrayBuffer.js","../node_modules/lodash/_cloneDataView.js","../node_modules/lodash/_cloneRegExp.js","../node_modules/lodash/_cloneSymbol.js","../node_modules/lodash/_cloneTypedArray.js","../node_modules/lodash/_initCloneByTag.js","../node_modules/lodash/_baseCreate.js","../node_modules/lodash/_initCloneObject.js","../node_modules/lodash/_baseIsMap.js","../node_modules/lodash/isMap.js","../node_modules/lodash/_baseIsSet.js","../node_modules/lodash/isSet.js","../node_modules/lodash/_baseClone.js","../node_modules/lodash/last.js","../node_modules/lodash/_baseSlice.js","../node_modules/lodash/_parent.js","../node_modules/lodash/_baseUnset.js","../node_modules/lodash/isPlainObject.js","../node_modules/lodash/_customOmitClone.js","../node_modules/lodash/_isFlattenable.js","../node_modules/lodash/_baseFlatten.js","../node_modules/lodash/flatten.js","../node_modules/lodash/_flatRest.js","../node_modules/lodash/omit.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/toFinite.js","../node_modules/lodash/toInteger.js","../node_modules/lodash/indexOf.js","../node_modules/lodash/isNumber.js","../node_modules/lodash/isNaN.js","../node_modules/lodash/isEmpty.js","../node_modules/lodash/isEqual.js","../node_modules/lodash/isUndefined.js","../node_modules/lodash/isString.js","../node_modules/lodash/_createFind.js","../node_modules/lodash/findIndex.js","../node_modules/lodash/find.js","../node_modules/lodash/_castSlice.js","../node_modules/lodash/_charsEndIndex.js","../node_modules/lodash/_charsStartIndex.js","../node_modules/lodash/_asciiToArray.js","../node_modules/lodash/_hasUnicode.js","../node_modules/lodash/_unicodeToArray.js","../node_modules/lodash/_stringToArray.js","../node_modules/lodash/trim.js","../node_modules/lodash/_isIterateeCall.js","../node_modules/lodash/defaults.js","../node_modules/lodash/_assignMergeValue.js","../node_modules/lodash/_safeGet.js","../node_modules/lodash/toPlainObject.js","../node_modules/lodash/_baseMergeDeep.js","../node_modules/lodash/_baseMerge.js","../node_modules/lodash/_createAssigner.js","../node_modules/lodash/merge.js","../node_modules/algoliasearch-helper/src/functions/valToNumber.js","../node_modules/algoliasearch-helper/src/SearchParameters/filterState.js","../node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","../node_modules/algoliasearch-helper/src/SearchParameters/index.js","../node_modules/lodash/compact.js","../node_modules/lodash/_baseSum.js","../node_modules/lodash/sumBy.js","../node_modules/lodash/_baseValues.js","../node_modules/lodash/values.js","../node_modules/lodash/includes.js","../node_modules/lodash/_baseSortBy.js","../node_modules/lodash/_compareAscending.js","../node_modules/lodash/_compareMultiple.js","../node_modules/lodash/_baseOrderBy.js","../node_modules/lodash/orderBy.js","../node_modules/lodash/_metaMap.js","../node_modules/lodash/_baseSetData.js","../node_modules/lodash/_createCtor.js","../node_modules/lodash/_createBind.js","../node_modules/lodash/_composeArgs.js","../node_modules/lodash/_composeArgsRight.js","../node_modules/lodash/_countHolders.js","../node_modules/lodash/_baseLodash.js","../node_modules/lodash/_LazyWrapper.js","../node_modules/lodash/noop.js","../node_modules/lodash/_getData.js","../node_modules/lodash/_realNames.js","../node_modules/lodash/_getFuncName.js","../node_modules/lodash/_LodashWrapper.js","../node_modules/lodash/_wrapperClone.js","../node_modules/lodash/wrapperLodash.js","../node_modules/lodash/_isLaziable.js","../node_modules/lodash/_setData.js","../node_modules/lodash/_getWrapDetails.js","../node_modules/lodash/_insertWrapDetails.js","../node_modules/lodash/_updateWrapDetails.js","../node_modules/lodash/_setWrapToString.js","../node_modules/lodash/_createRecurry.js","../node_modules/lodash/_getHolder.js","../node_modules/lodash/_reorder.js","../node_modules/lodash/_replaceHolders.js","../node_modules/lodash/_createHybrid.js","../node_modules/lodash/_createCurry.js","../node_modules/lodash/_createPartial.js","../node_modules/lodash/_mergeData.js","../node_modules/lodash/_createWrap.js","../node_modules/lodash/partial.js","../node_modules/lodash/partialRight.js","../node_modules/lodash/_baseClamp.js","../node_modules/lodash/startsWith.js","../node_modules/algoliasearch-helper/src/functions/formatSort.js","../node_modules/lodash/_baseSet.js","../node_modules/lodash/_basePickBy.js","../node_modules/lodash/pickBy.js","../node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js","../node_modules/algoliasearch-helper/src/SearchResults/index.js","../node_modules/events/events.js","../node_modules/algoliasearch-helper/src/functions/inherits.js","../node_modules/algoliasearch-helper/src/DerivedHelper/index.js","../node_modules/algoliasearch-helper/src/requestBuilder.js","../node_modules/lodash/_baseInverter.js","../node_modules/lodash/_createInverter.js","../node_modules/lodash/invert.js","../node_modules/algoliasearch-helper/src/SearchParameters/shortener.js","../node_modules/qs/lib/utils.js","../node_modules/qs/lib/formats.js","../node_modules/qs/lib/stringify.js","../node_modules/qs/lib/parse.js","../node_modules/qs/lib/index.js","../node_modules/lodash/bind.js","../node_modules/lodash/_basePick.js","../node_modules/lodash/pick.js","../node_modules/lodash/mapKeys.js","../node_modules/lodash/mapValues.js","../node_modules/algoliasearch-helper/src/url.js","../node_modules/algoliasearch-helper/src/version.js","../node_modules/algoliasearch-helper/src/algoliasearch.helper.js","../node_modules/algoliasearch-helper/index.js","../node_modules/instantsearch.js/es/lib/RoutingManager.js","../node_modules/instantsearch.js/es/lib/stateMappings/simple.js","../node_modules/instantsearch.js/es/lib/routers/history.js","../node_modules/instantsearch.js/es/lib/version.js","../node_modules/instantsearch.js/es/lib/suit.js","../node_modules/instantsearch.js/es/helpers/highlight.js","../node_modules/instantsearch.js/es/helpers/snippet.js","../node_modules/instantsearch.js/es/lib/createHelpers.js","../node_modules/instantsearch.js/es/lib/InstantSearch.js","../node_modules/instantsearch.js/es/lib/utils/findIndex.js","../node_modules/instantsearch.js/es/connectors/configure/connectConfigure.js","../node_modules/instantsearch.js/es/connectors/autocomplete/connectAutocomplete.js","../node_modules/instantsearch.js/es/connectors/query-rules/connectQueryRules.js","../node_modules/instantsearch.js/es/lib/voiceSearchHelper/index.js","../node_modules/instantsearch.js/es/connectors/voice-search/connectVoiceSearch.js","../src/mixins/suit.js","../src/util/suit.js","../src/components/Autocomplete.vue","../src/mixins/panel.js","../src/components/Breadcrumb.vue","../src/components/ClearRefinements.vue","../src/components/Configure.js","../src/components/CurrentRefinements.vue","../src/components/HierarchicalMenuList.vue","../src/components/HierarchicalMenu.vue","../src/util/unescape.js","../src/util/parseAlgoliaHit.js","../src/components/Highlighter.vue","../src/components/Highlight.vue","../src/components/Hits.vue","../src/components/HitsPerPage.vue","../node_modules/instantsearch.js/es/index.js","../src/util/polyfills.js","../src/util/createInstantSearchComponent.js","../src/components/InstantSearch.js","../src/components/InstantSearchSsr.js","../src/components/InfiniteHits.vue","../src/components/Menu.vue","../src/components/MenuSelect.vue","../src/components/NumericMenu.vue","../src/components/Pagination.vue","../src/components/Panel.vue","../src/components/PoweredBy.vue","../src/components/QueryRuleContext.js","../src/components/QueryRuleCustomData.vue","../src/components/RangeInput.vue","../src/components/RatingMenu.vue","../src/components/SearchInput.vue","../src/components/RefinementList.vue","../src/components/StateResults.vue","../src/connectors/connectStateResults.js","../src/components/SearchBox.vue","../src/components/Snippet.vue","../src/components/SortBy.vue","../src/components/Stats.vue","../src/components/ToggleRefinement.vue","../src/components/VoiceSearch.vue","../src/plugin.js","../src/instantsearch.umd.js","../src/util/createInstantSearch.js"],"sourcesContent":["const cache = new Set();\n\nexport function warn(message) {\n  if (cache.has(message)) return;\n  cache.add(message);\n  // eslint-disable-next-line no-console\n  console.warn(message);\n}\n","import { warn } from '../util/warn';\n\nexport const createWidgetMixin = ({ connector } = {}) => ({\n  inject: {\n    instantSearchInstance: {\n      name: 'instantSearchInstance',\n      default() {\n        const tag = this.$options._componentTag;\n        throw new TypeError(\n          `It looks like you forgot to wrap your Algolia search component \"<${tag}>\" inside of an \"<ais-instant-search>\" component.`\n        );\n      },\n    },\n  },\n  data() {\n    return {\n      state: null,\n    };\n  },\n  created() {\n    if (typeof connector === 'function') {\n      this.factory = connector(this.updateState, () => {});\n      this.widget = this.factory(this.widgetParams);\n      this.instantSearchInstance.addWidget(this.widget);\n\n      const { hydrated, started } = this.instantSearchInstance;\n      if ((!started && hydrated) || this.$isServer) {\n        if (typeof this.instantSearchInstance.__forceRender !== 'function') {\n          throw new Error(\n            'You are using server side rendering with <ais-instant-search> instead of <ais-instant-search-ssr>.'\n          );\n        }\n        this.instantSearchInstance.__forceRender(this.widget);\n      }\n    } else if (connector !== true) {\n      warn(\n        `You are using the InstantSearch widget mixin, but didn't provide a connector.\nWhile this is technically possible, and will give you access to the Helper,\nit's not the recommended way of making custom components.\n\nIf you want to disable this message, pass { connector: true } to the mixin.\n\nRead more on using connectors: https://alg.li/vue-custom`\n      );\n    }\n  },\n  beforeDestroy() {\n    if (\n      this.widget &&\n      this.widget.dispose &&\n      this.instantSearchInstance.started // a widget can't be removed if IS is not started\n    ) {\n      this.instantSearchInstance.removeWidget(this.widget);\n    }\n  },\n  watch: {\n    widgetParams: {\n      handler(nextWidgetParams) {\n        this.state = null;\n        // a widget can't be removed if IS is not started\n        if (this.widget.dispose && this.instantSearchInstance.started) {\n          this.instantSearchInstance.removeWidget(this.widget);\n        }\n        this.widget = this.factory(nextWidgetParams);\n        this.instantSearchInstance.addWidget(this.widget);\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    updateState(state = {}, isFirstRender) {\n      if (!isFirstRender) {\n        // Avoid updating the state on first render\n        // otherwise there will be a flash of placeholder data\n        this.state = state;\n      }\n    },\n  },\n});\n","function uniq(array) {\n  return array.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\n\nexport default uniq;","// We aren't using the native `Array.prototype.find` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `find` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.find` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\nfunction find(items, predicate, thisArg) {\n  if (!Array.prototype.find) {\n    return items.filter(predicate, thisArg)[0];\n  }\n\n  return items.find(predicate, thisArg);\n}\n\nexport default find;","function unescapeRefinement(value) {\n  return String(value).replace(/^\\\\-/, '-');\n}\n\nexport default unescapeRefinement;","import find from './find';\nimport unescapeRefinement from './unescapeRefinement';\n\nfunction getRefinement(state, type, attributeName, name) {\n  var resultsFacets = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n  var res = {\n    type: type,\n    attributeName: attributeName,\n    name: name\n  };\n  var facet = find(resultsFacets, function (resultsFacet) {\n    return resultsFacet.name === attributeName;\n  });\n  var count;\n\n  if (type === 'hierarchical') {\n    (function () {\n      var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n      var nameParts = name.split(facetDeclaration.separator);\n\n      var getFacetRefinement = function getFacetRefinement(facetData) {\n        return function (refinementKey) {\n          return facetData[refinementKey];\n        };\n      };\n\n      var _loop = function _loop(i) {\n        facet = facet && facet.data && find(Object.keys(facet.data).map(getFacetRefinement(facet.data)), function (refinement) {\n          return refinement.name === nameParts[i];\n        });\n      };\n\n      for (var i = 0; facet !== undefined && i < nameParts.length; ++i) {\n        _loop(i);\n      }\n\n      count = facet && facet.count;\n    })();\n  } else {\n    count = facet && facet.data && facet.data[res.name];\n  }\n\n  var exhaustive = facet && facet.exhaustive;\n\n  if (count !== undefined) {\n    res.count = count;\n  }\n\n  if (exhaustive !== undefined) {\n    res.exhaustive = exhaustive;\n  }\n\n  return res;\n}\n\nfunction getRefinements(results, state) {\n  var clearsQuery = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var res = [];\n  var _state$facetsRefineme = state.facetsRefinements,\n      facetsRefinements = _state$facetsRefineme === void 0 ? {} : _state$facetsRefineme,\n      _state$facetsExcludes = state.facetsExcludes,\n      facetsExcludes = _state$facetsExcludes === void 0 ? {} : _state$facetsExcludes,\n      _state$disjunctiveFac = state.disjunctiveFacetsRefinements,\n      disjunctiveFacetsRefinements = _state$disjunctiveFac === void 0 ? {} : _state$disjunctiveFac,\n      _state$hierarchicalFa = state.hierarchicalFacetsRefinements,\n      hierarchicalFacetsRefinements = _state$hierarchicalFa === void 0 ? {} : _state$hierarchicalFa,\n      _state$numericRefinem = state.numericRefinements,\n      numericRefinements = _state$numericRefinem === void 0 ? {} : _state$numericRefinem,\n      _state$tagRefinements = state.tagRefinements,\n      tagRefinements = _state$tagRefinements === void 0 ? [] : _state$tagRefinements;\n  Object.keys(facetsRefinements).forEach(function (attributeName) {\n    var refinements = facetsRefinements[attributeName];\n    refinements.forEach(function (refinement) {\n      res.push(getRefinement(state, 'facet', attributeName, refinement, results.facets));\n    });\n  });\n  Object.keys(facetsExcludes).forEach(function (attributeName) {\n    var refinements = facetsExcludes[attributeName];\n    refinements.forEach(function (refinement) {\n      res.push({\n        type: 'exclude',\n        attributeName: attributeName,\n        name: refinement,\n        exclude: true\n      });\n    });\n  });\n  Object.keys(disjunctiveFacetsRefinements).forEach(function (attributeName) {\n    var refinements = disjunctiveFacetsRefinements[attributeName];\n    refinements.forEach(function (refinement) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, // We unescape any disjunctive refined values with `unescapeRefinement` because\n      // they can be escaped on negative numeric values with `escapeRefinement`.\n      unescapeRefinement(refinement), results.disjunctiveFacets));\n    });\n  });\n  Object.keys(hierarchicalFacetsRefinements).forEach(function (attributeName) {\n    var refinements = hierarchicalFacetsRefinements[attributeName];\n    refinements.forEach(function (refinement) {\n      res.push(getRefinement(state, 'hierarchical', attributeName, refinement, results.hierarchicalFacets));\n    });\n  });\n  Object.keys(numericRefinements).forEach(function (attributeName) {\n    var operators = numericRefinements[attributeName];\n    Object.keys(operators).forEach(function (operator) {\n      var valueOrValues = operators[operator];\n      var refinements = Array.isArray(valueOrValues) ? valueOrValues : [valueOrValues];\n      refinements.forEach(function (refinement) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: \"\".concat(refinement),\n          numericValue: refinement,\n          operator: operator\n        });\n      });\n    });\n  });\n  tagRefinements.forEach(function (refinement) {\n    res.push({\n      type: 'tag',\n      attributeName: '_tags',\n      name: refinement\n    });\n  });\n\n  if (clearsQuery && state.query && state.query.trim()) {\n    res.push({\n      attributeName: 'query',\n      type: 'query',\n      name: state.query,\n      query: state.query\n    });\n  }\n\n  return res;\n}\n\nexport default getRefinements;","/**\n * Clears the refinements of a SearchParameters object based on rules provided.\n * The included attributes list is applied before the excluded attributes list. If the list\n * is not provided, this list of all the currently refined attributes is used as included attributes.\n * @param {object} $0 parameters\n * @param {Helper} $0.helper instance of the Helper\n * @param {string[]} [$0.attributesToClear = []] list of parameters to clear\n * @returns {SearchParameters} search parameters with refinements cleared\n */\nfunction clearRefinements(_ref) {\n  var helper = _ref.helper,\n      _ref$attributesToClea = _ref.attributesToClear,\n      attributesToClear = _ref$attributesToClea === void 0 ? [] : _ref$attributesToClea;\n  var finalState = helper.state.setPage(0);\n  attributesToClear.forEach(function (attribute) {\n    if (attribute === '_tags') {\n      finalState = finalState.clearTags();\n    } else {\n      finalState = finalState.clearRefinements(attribute);\n    }\n  });\n\n  if (attributesToClear.indexOf('query') !== -1) {\n    finalState = finalState.setQuery('');\n  }\n\n  return finalState;\n}\n\nexport default clearRefinements;","function escapeRefinement(value) {\n  if (typeof value === 'number' && value < 0) {\n    value = String(value).replace(/^-/, '\\\\-');\n  }\n\n  return value;\n}\n\nexport default escapeRefinement;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction checkRendering(rendering, usage) {\n  if (rendering === undefined || typeof rendering !== 'function') {\n    throw new Error(\"The render function is not valid (got type \\\"\".concat(_typeof(rendering), \"\\\").\\n\\n\").concat(usage));\n  }\n}\n\nexport default checkRendering;","function getPropertyByPath(object, path) {\n  var parts = path.split('.');\n  return parts.reduce(function (current, key) {\n    return current && current[key];\n  }, object);\n}\n\nexport default getPropertyByPath;","function noop() {}\n\nexport default noop;","// This is the `Number.isFinite()` polyfill recommended by MDN.\n// We do not provide any tests for this function.\n// See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\nfunction isFiniteNumber(value) {\n  return typeof value === 'number' && isFinite(value);\n}\n\nexport default isFiniteNumber;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/master/isPlainObject.js\n */\nfunction getTag(value) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n\n  return Object.prototype.toString.call(value);\n}\n\nfunction isObjectLike(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\n/**\n * Checks if `value` is a plain object.\n *\n * A plain object is an object created by the `Object`\n * constructor or with a `[[Prototype]]` of `null`.\n */\n\n\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n}\n\nexport default isPlainObject;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction range(_ref) {\n  var _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step; // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return (start + current) * limitStep;\n  });\n}\n\nexport default range;","function isPrimitive(obj) {\n  return obj !== Object(obj);\n}\n\nfunction isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  if (isPrimitive(first) || isPrimitive(second) || typeof first === 'function' || typeof second === 'function') {\n    return first === second;\n  }\n\n  if (Object.keys(first).length !== Object.keys(second).length) {\n    return false;\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(first); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in second)) {\n      return false;\n    }\n\n    if (!isEqual(first[key], second[key])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default isEqual;","/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/escape.js\n */\n// Used to map characters to HTML entities.\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n}; // Used to match HTML entities and HTML characters.\n\nvar regexUnescapedHtml = /[&<>\"']/g;\nvar regexHasUnescapedHtml = RegExp(regexUnescapedHtml.source);\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n */\n\nfunction escape(value) {\n  return value && regexHasUnescapedHtml.test(value) ? value.replace(regexUnescapedHtml, function (character) {\n    return htmlEscapes[character];\n  }) : value;\n}\n\nexport default escape;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport uniq from './uniq';\nimport isPlainObject from './isPlainObject';\n/**\n * Deeply merges all the object values in a new object.\n *\n * - Primitive values are replaced\n * - Arrays a concatenated and their values are made unique\n */\n\nfunction mergeDeep() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return values.reduce(function (acc) {\n    var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Object.keys(source).forEach(function (key) {\n      var previousValue = acc[key];\n      var nextValue = source[key];\n\n      if (Array.isArray(previousValue) && Array.isArray(nextValue)) {\n        acc[key] = uniq([].concat(_toConsumableArray(previousValue), _toConsumableArray(nextValue)));\n      } else if (isPlainObject(previousValue) && isPlainObject(nextValue)) {\n        acc[key] = mergeDeep(previousValue, nextValue);\n      } else {\n        acc[key] = nextValue;\n      }\n    });\n    return acc;\n  }, {});\n}\n\nexport default mergeDeep;","import noop from './noop';\nvar deprecate = noop;\nvar warn = noop;\n/**\n * Logs a warning if the condition is not met.\n * This is used to log issues in development environment only.\n *\n * @returns {undefined}\n */\n\nvar _warning = noop;\n\nif (process.env.NODE_ENV === 'development') {\n  warn = function warn(message) {\n    // eslint-disable-next-line no-console\n    console.warn(\"[InstantSearch.js]: \".concat(message.trim()));\n  };\n\n  deprecate = function deprecate(fn, message) {\n    var hasAlreadyPrinted = false;\n    return function () {\n      if (!hasAlreadyPrinted) {\n        hasAlreadyPrinted = true;\n        warn(message);\n      }\n\n      return fn.apply(void 0, arguments);\n    };\n  };\n\n  _warning = function warning(condition, message) {\n    if (condition) {\n      return;\n    }\n\n    var hasAlreadyPrinted = _warning.cache[message];\n\n    if (!hasAlreadyPrinted) {\n      _warning.cache[message] = true;\n      warn(message);\n    }\n  };\n\n  _warning.cache = {};\n}\n\nexport { warn, deprecate, _warning as warning };","export var createDocumentationLink = function createDocumentationLink(_ref) {\n  var name = _ref.name,\n      _ref$connector = _ref.connector,\n      connector = _ref$connector === void 0 ? false : _ref$connector;\n  return ['https://www.algolia.com/doc/api-reference/widgets/', name, '/js/', connector ? '#connector' : ''].join('');\n};\nexport var createDocumentationMessageGenerator = function createDocumentationMessageGenerator() {\n  for (var _len = arguments.length, widgets = new Array(_len), _key = 0; _key < _len; _key++) {\n    widgets[_key] = arguments[_key];\n  }\n\n  var links = widgets.map(function (widget) {\n    return createDocumentationLink(widget);\n  }).join(', ');\n  return function (message) {\n    return [message, \"See documentation: \".concat(links)].filter(Boolean).join('\\n\\n');\n  };\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var addAbsolutePosition = function addAbsolutePosition(hits, page, hitsPerPage) {\n  return hits.map(function (hit, idx) {\n    return _objectSpread({}, hit, {\n      __position: hitsPerPage * page + idx + 1\n    });\n  });\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var addQueryID = function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n\n  return hits.map(function (hit) {\n    return _objectSpread({}, hit, {\n      __queryID: queryID\n    });\n  });\n};","import { checkRendering, clearRefinements, getRefinements, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'clear-refinements',\n  connector: true\n});\n/**\n * @typedef {Object} CustomClearRefinementsWidgetOptions\n * @property {string[]} [includedAttributes = []] The attributes to include in the refinements to clear (all by default). Cannot be used with `excludedAttributes`.\n * @property {string[]} [excludedAttributes = ['query']] The attributes to exclude from the refinements to clear. Cannot be used with `includedAttributes`.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} ClearRefinementsRenderingOptions\n * @property {function} refine Triggers the clear of all the currently refined values.\n * @property {boolean} hasRefinements Indicates if search state is refined.\n * @property {function} createURL Creates a url for the next state when refinements are cleared.\n * @property {Object} widgetParams All original `CustomClearRefinementsWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **ClearRefinements** connector provides the logic to build a custom widget that will give the user\n * the ability to reset the search state.\n *\n * This connector provides a `refine` function to remove the current refined facets.\n *\n * The behaviour of this function can be changed with widget options. If `clearsQuery`\n * is set to `true`, `refine` will also clear the query and `excludedAttributes` can\n * prevent certain attributes from being cleared.\n *\n * @type {Connector}\n * @param {function(ClearRefinementsRenderingOptions, boolean)} renderFn Rendering function for the custom **ClearRefinements** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomClearRefinementsWidgetOptions)} Re-usable widget factory for a custom **ClearRefinements** widget.\n * @example\n * // custom `renderFn` to render the custom ClearRefinements widget\n * function renderFn(ClearRefinementsRenderingOptions, isFirstRendering) {\n *   var containerNode = ClearRefinementsRenderingOptions.widgetParams.containerNode;\n *   if (isFirstRendering) {\n *     var markup = $('<button id=\"custom-clear-all\">Clear All</button>');\n *     containerNode.append(markup);\n *\n *     markup.on('click', function(event) {\n *       event.preventDefault();\n *       ClearRefinementsRenderingOptions.refine();\n *     })\n *   }\n *\n *   var clearRefinementsCTA = containerNode.find('#custom-clear-all');\n *   clearRefinementsCTA.attr('disabled', !ClearRefinementsRenderingOptions.hasRefinements)\n * };\n *\n * // connect `renderFn` to ClearRefinements logic\n * var customClearRefinementsWidget = instantsearch.connectors.connectClearRefinements(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customClearRefinementsWidget({\n *     containerNode: $('#custom-clear-all-container'),\n *   })\n * );\n */\n\nexport default function connectClearRefinements(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (widgetParams.includedAttributes && widgetParams.excludedAttributes) {\n      throw new Error(withUsage('The options `includedAttributes` and `excludedAttributes` cannot be used together.'));\n    }\n\n    var _widgetParams$include = widgetParams.includedAttributes,\n        includedAttributes = _widgetParams$include === void 0 ? [] : _widgetParams$include,\n        _widgetParams$exclude = widgetParams.excludedAttributes,\n        excludedAttributes = _widgetParams$exclude === void 0 ? ['query'] : _widgetParams$exclude,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            instantSearchInstance = _ref.instantSearchInstance,\n            createURL = _ref.createURL;\n        var attributesToClear = getAttributesToClear({\n          helper: helper,\n          includedAttributes: includedAttributes,\n          excludedAttributes: excludedAttributes,\n          transformItems: transformItems\n        });\n        var hasRefinements = attributesToClear.length > 0;\n\n        this._refine = function () {\n          helper.setState(clearRefinements({\n            helper: helper,\n            attributesToClear: getAttributesToClear({\n              helper: helper,\n              includedAttributes: includedAttributes,\n              excludedAttributes: excludedAttributes,\n              transformItems: transformItems\n            })\n          })).search();\n        };\n\n        this._createURL = function () {\n          return createURL(clearRefinements({\n            helper: helper,\n            attributesToClear: getAttributesToClear({\n              helper: helper,\n              includedAttributes: includedAttributes,\n              excludedAttributes: excludedAttributes,\n              transformItems: transformItems\n            })\n          }));\n        };\n\n        renderFn({\n          hasRefinements: hasRefinements,\n          refine: this._refine,\n          createURL: this._createURL,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref2) {\n        var helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        var attributesToClear = getAttributesToClear({\n          helper: helper,\n          includedAttributes: includedAttributes,\n          excludedAttributes: excludedAttributes,\n          transformItems: transformItems\n        });\n        var hasRefinements = attributesToClear.length > 0;\n        renderFn({\n          hasRefinements: hasRefinements,\n          refine: this._refine,\n          createURL: this._createURL,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      }\n    };\n  };\n}\n\nfunction getAttributesToClear(_ref3) {\n  var helper = _ref3.helper,\n      includedAttributes = _ref3.includedAttributes,\n      excludedAttributes = _ref3.excludedAttributes,\n      transformItems = _ref3.transformItems;\n  var clearsQuery = includedAttributes.indexOf('query') !== -1 || excludedAttributes.indexOf('query') === -1;\n  return transformItems(getRefinements(helper.lastResults || {}, helper.state, clearsQuery).map(function (refinement) {\n    return refinement.attributeName;\n  }).filter(function (attribute) {\n    return (// If the array is empty (default case), we keep all the attributes\n      includedAttributes.length === 0 || // Otherwise, only add the specified attributes\n      includedAttributes.indexOf(attribute) !== -1\n    );\n  }).filter(function (attribute) {\n    return (// If the query is included, we ignore the default `excludedAttributes = ['query']`\n      attribute === 'query' && clearsQuery || // Otherwise, ignore the excluded attributes\n      excludedAttributes.indexOf(attribute) === -1\n    );\n  }));\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport { getRefinements, checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'current-refinements',\n  connector: true\n});\n/**\n * @typedef {Object} Refinement\n * @property {\"facet\"|\"exclude\"|\"disjunctive\"|\"hierarchical\"|\"numeric\"|\"query\"} type The type of the refinement\n * @property {string} attribute The attribute on which the refinement is applied\n * @property {string} label The label of the refinement to display\n * @property {string} value The raw value of the refinement\n * @property {string} [operator] The value of the operator, only if applicable\n * @property {boolean} [exhaustive] Whether the count is exhaustive, only if applicable\n * @property {number} [count] number of items found, if applicable\n */\n\n/**\n * @typedef {Object} RefinementItem\n * @property {string} attribute The attribute on which the refinement is applied\n * @property {function} refine The function to remove the refinement\n * @property {Refinement[]} refinements The current refinements\n */\n\n/**\n * @typedef {Object} CurrentRefinementsRenderingOptions\n * @property {function(item)} refine Clears a single refinement\n * @property {function(item): string} createURL Creates an individual URL where a single refinement is cleared\n * @property {RefinementItem[]} items All the refinement items\n * @property {Object} widgetParams All original `CustomCurrentRefinementsWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * @typedef {Object} CustomCurrentRefinementsWidgetOptions\n * @property {string[]} [includedAttributes] The attributes to include in the refinements (all by default). Cannot be used with `excludedAttributes`.\n * @property {string[]} [excludedAttributes = [\"query\"]] The attributes to exclude from the refinements. Cannot be used with `includedAttributes`.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * **CurrentRefinements** connector provides the logic to build a widget that will give\n * the user the ability to see all the currently applied filters and, remove some or all of\n * them.\n *\n * This provides a `refine(item)` function to remove a selected refinement.\n * Those functions can see their behaviour change based on the widget options used.\n * @type {Connector}\n * @param {function(CurrentRefinementsRenderingOptions)} renderFn Rendering function for the custom **CurrentRefinements** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomCurrentRefinementsWidgetOptions)} Re-usable widget factory for a custom **CurrentRefinements** widget.\n * @example\n * // custom `renderFn` to render the custom ClearRefinements widget\n * function renderFn(currentRefinementsRenderingOptions, isFirstRendering) {\n *   var containerNode = currentRefinementsRenderingOptions.widgetParams.containerNode;\n *   if (isFirstRendering) {\n *     containerNode\n *       .html('<ul id=\"refinements\"></ul><div id=\"cta-container\"></div>');\n *   }\n *\n *   containerNode\n *     .find('#cta-container > a')\n *     .off('click');\n *\n *   containerNode\n *     .find('li > a')\n *     .each(function() { $(this).off('click') });\n *\n *   if (currentRefinementsRenderingOptions.items\n *       && currentRefinementsRenderingOptions.items.length > 0) {\n *     var list = currentRefinementsRenderingOptions.items.map(function(item) {\n *       return '<li>' + item.attribute +\n *          '<ul>' +\n *            item.refinements.map(function (refinement) {\n *              return <a href=\"' + currentRefinementsRenderingOptions.createURL(refinement) + '\" data-attribute=\"' + item.attribute + '\">'\n *                + refinement.label + '</a>'\n *              }).join('') +\n *            '</ul>'\n *        '</li>';\n *     });\n *\n *     currentRefinementsRenderingOptions.find('ul').html(list);\n *   } else {\n *     containerNode.find('#cta-container').html('');\n *     containerNode.find('ul').html('');\n *   }\n * }\n *\n * // connect `renderFn` to CurrentRefinements logic\n * var customCurrentRefinements = instantsearch.connectors.connectCurrentRefinements(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customCurrentRefinements({\n *     containerNode: $('#custom-crv-container'),\n *   })\n * );\n */\n\nexport default function connectCurrentRefinements(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (widgetParams.includedAttributes && widgetParams.excludedAttributes) {\n      throw new Error(withUsage('The options `includedAttributes` and `excludedAttributes` cannot be used together.'));\n    }\n\n    var includedAttributes = widgetParams.includedAttributes,\n        _widgetParams$exclude = widgetParams.excludedAttributes,\n        excludedAttributes = _widgetParams$exclude === void 0 ? ['query'] : _widgetParams$exclude,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            _createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n        var items = transformItems(getFilteredRefinements({\n          results: {},\n          state: helper.state,\n          helper: helper,\n          includedAttributes: includedAttributes,\n          excludedAttributes: excludedAttributes\n        }));\n        renderFn({\n          items: items,\n          refine: function refine(refinement) {\n            return clearRefinement(helper, refinement);\n          },\n          createURL: function createURL(refinement) {\n            return _createURL(clearRefinementFromState(helper.state, refinement));\n          },\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref2) {\n        var results = _ref2.results,\n            helper = _ref2.helper,\n            state = _ref2.state,\n            _createURL2 = _ref2.createURL,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        var items = transformItems(getFilteredRefinements({\n          results: results,\n          state: state,\n          helper: helper,\n          includedAttributes: includedAttributes,\n          excludedAttributes: excludedAttributes\n        }));\n        renderFn({\n          items: items,\n          refine: function refine(refinement) {\n            return clearRefinement(helper, refinement);\n          },\n          createURL: function createURL(refinement) {\n            return _createURL2(clearRefinementFromState(helper.state, refinement));\n          },\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      }\n    };\n  };\n}\n\nfunction getFilteredRefinements(_ref3) {\n  var results = _ref3.results,\n      state = _ref3.state,\n      helper = _ref3.helper,\n      includedAttributes = _ref3.includedAttributes,\n      excludedAttributes = _ref3.excludedAttributes;\n  var clearsQuery = (includedAttributes || []).indexOf('query') !== -1 || (excludedAttributes || []).indexOf('query') === -1;\n  var filterFunction = includedAttributes ? function (item) {\n    return includedAttributes.indexOf(item.attributeName) !== -1;\n  } : function (item) {\n    return excludedAttributes.indexOf(item.attributeName) === -1;\n  };\n  var items = getRefinements(results, state, clearsQuery).filter(filterFunction).map(normalizeRefinement);\n  return groupItemsByRefinements(items, helper);\n}\n\nfunction clearRefinementFromState(state, refinement) {\n  switch (refinement.type) {\n    case 'facet':\n      return state.removeFacetRefinement(refinement.attribute, refinement.value);\n\n    case 'disjunctive':\n      return state.removeDisjunctiveFacetRefinement(refinement.attribute, refinement.value);\n\n    case 'hierarchical':\n      return state.removeHierarchicalFacetRefinement(refinement.attribute);\n\n    case 'exclude':\n      return state.removeExcludeRefinement(refinement.attribute, refinement.value);\n\n    case 'numeric':\n      return state.removeNumericRefinement(refinement.attribute, refinement.operator, refinement.value);\n\n    case 'tag':\n      return state.removeTagRefinement(refinement.value);\n\n    case 'query':\n      return state.setQueryParameter('query', '');\n\n    default:\n      throw new Error(\"clearRefinement: type \".concat(refinement.type, \" is not handled\"));\n  }\n}\n\nfunction clearRefinement(helper, refinement) {\n  helper.setState(clearRefinementFromState(helper.state, refinement)).search();\n}\n\nfunction getOperatorSymbol(operator) {\n  switch (operator) {\n    case '>=':\n      return '≥';\n\n    case '<=':\n      return '≤';\n\n    default:\n      return operator;\n  }\n}\n\nfunction normalizeRefinement(refinement) {\n  var value = refinement.type === 'numeric' ? Number(refinement.name) : refinement.name;\n  var label = refinement.operator ? \"\".concat(getOperatorSymbol(refinement.operator), \" \").concat(refinement.name) : refinement.name;\n  var normalizedRefinement = {\n    attribute: refinement.attributeName,\n    type: refinement.type,\n    value: value,\n    label: label\n  };\n\n  if (refinement.operator !== undefined) {\n    normalizedRefinement.operator = refinement.operator;\n  }\n\n  if (refinement.count !== undefined) {\n    normalizedRefinement.count = refinement.count;\n  }\n\n  if (refinement.exhaustive !== undefined) {\n    normalizedRefinement.exhaustive = refinement.exhaustive;\n  }\n\n  return normalizedRefinement;\n}\n\nfunction groupItemsByRefinements(items, helper) {\n  return items.reduce(function (results, currentItem) {\n    return [].concat(_toConsumableArray(results.filter(function (result) {\n      return result.attribute !== currentItem.attribute;\n    })), [{\n      attribute: currentItem.attribute,\n      label: currentItem.attribute,\n      refinements: items.filter(function (result) {\n        return result.attribute === currentItem.attribute;\n      }) // We want to keep the order of refinements except the numeric ones.\n      .sort(function (a, b) {\n        return a.type === 'numeric' ? a.value - b.value : 0;\n      }),\n      refine: function refine(refinement) {\n        return clearRefinement(helper, refinement);\n      }\n    }]);\n  }, []);\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { checkRendering, warning, createDocumentationMessageGenerator, isEqual, find, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hierarchical-menu',\n  connector: true\n});\n/**\n * @typedef {Object} HierarchicalMenuItem\n * @property {string} value Value of the menu item.\n * @property {string} label Human-readable value of the menu item.\n * @property {number} count Number of matched results after refinement is applied.\n * @property {isRefined} boolean Indicates if the refinement is applied.\n * @property {Object} [data = undefined] n+1 level of items, same structure HierarchicalMenuItem (default: `undefined`).\n */\n\n/**\n * @typedef {Object} CustomHierarchicalMenuWidgetOptions\n * @property {string[]} attributes Attributes to use to generate the hierarchy of the menu.\n * @property {string} [separator = '>'] Separator used in the attributes to separate level values.\n * @property {string} [rootPath = null] Prefix path to use if the first level is not the root level.\n * @property {boolean} [showParentLevel=false] Show the siblings of the selected parent levels of the current refined value. This\n * does not impact the root level.\n * @property {number} [limit = 10] Max number of values to display.\n * @property {boolean} [showMore = false] Whether to display the \"show more\" button.\n * @property {number} [showMoreLimit = 20] Max number of values to display when showing more.\n * @property  {string[]|function} [sortBy = ['name:asc']] How to sort refinements. Possible values: `count|isRefined|name:asc|name:desc`.\n *\n * You can also use a sort function that behaves like the standard Javascript [compareFunction](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Syntax).\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} HierarchicalMenuRenderingOptions\n * @property {function(item.value): string} createURL Creates an url for the next state for a clicked item.\n * @property {HierarchicalMenuItem[]} items Values to be rendered.\n * @property {function(item.value)} refine Sets the path of the hierarchical filter and triggers a new search.\n * @property {Object} widgetParams All original `CustomHierarchicalMenuWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **HierarchicalMenu** connector provides the logic to build a custom widget\n * that will give the user the ability to explore facets in a tree-like structure.\n *\n * This is commonly used for multi-level categorization of products on e-commerce\n * websites. From a UX point of view, we suggest not displaying more than two\n * levels deep.\n *\n * There's a complete example available on how to write a custom **HierarchicalMenu**:\n *  [hierarchicalMenu.js](https://github.com/algolia/instantsearch.js/blob/develop/storybook/app/jquery/widgets/hierarchicalMenu.js)\n * @type {Connector}\n * @param {function(HierarchicalMenuRenderingOptions)} renderFn Rendering function for the custom **HierarchicalMenu** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomHierarchicalMenuWidgetOptions)} Re-usable widget factory for a custom **HierarchicalMenu** widget.\n */\n\nexport default function connectHierarchicalMenu(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attributes = widgetParams.attributes,\n        _widgetParams$separat = widgetParams.separator,\n        separator = _widgetParams$separat === void 0 ? ' > ' : _widgetParams$separat,\n        _widgetParams$rootPat = widgetParams.rootPath,\n        rootPath = _widgetParams$rootPat === void 0 ? null : _widgetParams$rootPat,\n        _widgetParams$showPar = widgetParams.showParentLevel,\n        showParentLevel = _widgetParams$showPar === void 0 ? true : _widgetParams$showPar,\n        _widgetParams$limit = widgetParams.limit,\n        limit = _widgetParams$limit === void 0 ? 10 : _widgetParams$limit,\n        _widgetParams$showMor = widgetParams.showMore,\n        showMore = _widgetParams$showMor === void 0 ? false : _widgetParams$showMor,\n        _widgetParams$showMor2 = widgetParams.showMoreLimit,\n        showMoreLimit = _widgetParams$showMor2 === void 0 ? 20 : _widgetParams$showMor2,\n        _widgetParams$sortBy = widgetParams.sortBy,\n        sortBy = _widgetParams$sortBy === void 0 ? ['name:asc'] : _widgetParams$sortBy,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attributes || !Array.isArray(attributes) || attributes.length === 0) {\n      throw new Error(withUsage('The `attributes` option expects an array of strings.'));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('The `showMoreLimit` option must be greater than `limit`.'));\n    } // we need to provide a hierarchicalFacet name for the search state\n    // so that we can always map $hierarchicalFacetName => real attributes\n    // we use the first attribute name\n\n\n    var _attributes = _slicedToArray(attributes, 1),\n        hierarchicalFacetName = _attributes[0];\n\n    return {\n      isShowingMore: false,\n      // Provide the same function to the `renderFn` so that way the user\n      // has to only bind it once when `isFirstRendering` for instance\n      toggleShowMore: function toggleShowMore() {},\n      cachedToggleShowMore: function cachedToggleShowMore() {\n        this.toggleShowMore();\n      },\n      createToggleShowMore: function createToggleShowMore(renderOptions) {\n        var _this = this;\n\n        return function () {\n          _this.isShowingMore = !_this.isShowingMore;\n\n          _this.render(renderOptions);\n        };\n      },\n      getLimit: function getLimit() {\n        return this.isShowingMore ? showMoreLimit : limit;\n      },\n      getConfiguration: function getConfiguration(currentConfiguration) {\n        if (currentConfiguration.hierarchicalFacets) {\n          var isFacetSet = find(currentConfiguration.hierarchicalFacets, function (_ref) {\n            var name = _ref.name;\n            return name === hierarchicalFacetName;\n          });\n          var isAttributesEqual = isFacetSet && isEqual(isFacetSet.attributes, attributes);\n          var isSeparatorEqual = isFacetSet && isFacetSet.separator === separator;\n          var isRootPathEqual = isFacetSet && isFacetSet.rootPath === rootPath;\n          var isHierarchicalOptionsEqual = isAttributesEqual && isSeparatorEqual && isRootPathEqual;\n\n          if (isFacetSet && !isHierarchicalOptionsEqual) {\n            warning(false, 'Using Breadcrumb and HierarchicalMenu on the same facet with different options overrides the configuration of the HierarchicalMenu.');\n            return {};\n          }\n        }\n\n        var widgetConfiguration = {\n          hierarchicalFacets: [{\n            name: hierarchicalFacetName,\n            attributes: attributes,\n            separator: separator,\n            rootPath: rootPath,\n            showParentLevel: showParentLevel\n          }]\n        };\n        var currentMaxValuesPerFacet = currentConfiguration.maxValuesPerFacet || 0;\n        widgetConfiguration.maxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        return widgetConfiguration;\n      },\n      init: function init(_ref2) {\n        var helper = _ref2.helper,\n            createURL = _ref2.createURL,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        this.cachedToggleShowMore = this.cachedToggleShowMore.bind(this);\n\n        this._refine = function (facetValue) {\n          helper.toggleRefinement(hierarchicalFacetName, facetValue).search();\n        }; // Bind createURL to this specific attribute\n\n\n        function _createURL(facetValue) {\n          return createURL(helper.state.toggleRefinement(hierarchicalFacetName, facetValue));\n        }\n\n        renderFn({\n          items: [],\n          createURL: _createURL,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams,\n          isShowingMore: false,\n          toggleShowMore: this.cachedToggleShowMore,\n          canToggleShowMore: false\n        }, true);\n      },\n      _prepareFacetValues: function _prepareFacetValues(facetValues, state) {\n        var _this2 = this;\n\n        return facetValues.slice(0, this.getLimit()).map(function (_ref3) {\n          var label = _ref3.name,\n              value = _ref3.path,\n              subValue = _objectWithoutProperties(_ref3, [\"name\", \"path\"]);\n\n          if (Array.isArray(subValue.data)) {\n            subValue.data = _this2._prepareFacetValues(subValue.data, state);\n          }\n\n          return _objectSpread({}, subValue, {\n            label: label,\n            value: value\n          });\n        });\n      },\n      render: function render(renderOptions) {\n        var results = renderOptions.results,\n            state = renderOptions.state,\n            createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance;\n        var facetValues = results.getFacetValues(hierarchicalFacetName, {\n          sortBy: sortBy\n        }).data || [];\n        var items = transformItems(this._prepareFacetValues(facetValues), state); // Bind createURL to this specific attribute\n\n        function _createURL(facetValue) {\n          return createURL(state.toggleRefinement(hierarchicalFacetName, facetValue));\n        }\n\n        var maxValuesPerFacetConfig = state.getQueryParameter('maxValuesPerFacet');\n        var currentLimit = this.getLimit(); // If the limit is the max number of facet retrieved it is impossible to know\n        // if the facets are exhaustive. The only moment we are sure it is exhaustive\n        // is when it is strictly under the number requested unless we know that another\n        // widget has requested more values (maxValuesPerFacet > getLimit()).\n        // Because this is used for making the search of facets unable or not, it is important\n        // to be conservative here.\n\n        var hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n        this.toggleShowMore = this.createToggleShowMore(renderOptions);\n        renderFn({\n          items: items,\n          refine: this._refine,\n          createURL: _createURL,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore,\n          canToggleShowMore: showMore && (this.isShowingMore || !hasExhaustiveItems)\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        // unmount widget from DOM\n        unmountFn(); // compute nextState for the search\n\n        var nextState = state;\n\n        if (state.isHierarchicalFacetRefined(hierarchicalFacetName)) {\n          nextState = state.removeHierarchicalFacetRefinement(hierarchicalFacetName);\n        }\n\n        nextState = nextState.removeHierarchicalFacet(hierarchicalFacetName);\n\n        if (nextState.maxValuesPerFacet === limit) {\n          nextState.setQueryParameters('maxValuesPerFacet', undefined);\n        }\n\n        return nextState;\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var path = searchParameters.getHierarchicalFacetBreadcrumb(hierarchicalFacetName);\n        if (!path || path.length === 0) return uiState;\n\n        if (uiState.hierarchicalMenu && isEqual(path, uiState.hierarchicalMenu[hierarchicalFacetName])) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          hierarchicalMenu: _objectSpread({}, uiState.hierarchicalMenu, _defineProperty({}, hierarchicalFacetName, path))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n\n        if (uiState.hierarchicalMenu && uiState.hierarchicalMenu[hierarchicalFacetName]) {\n          return searchParameters.clearRefinements(hierarchicalFacetName).toggleRefinement(hierarchicalFacetName, uiState.hierarchicalMenu[hierarchicalFacetName].join(separator));\n        } else {\n          return searchParameters;\n        }\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isPlainObject, escape } from '../lib/utils';\nexport var TAG_PLACEHOLDER = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__'\n};\nexport var TAG_REPLACEMENT = {\n  highlightPreTag: '<mark>',\n  highlightPostTag: '</mark>'\n};\n\nfunction replaceTagsAndEscape(value) {\n  return escape(value).replace(new RegExp(TAG_PLACEHOLDER.highlightPreTag, 'g'), TAG_REPLACEMENT.highlightPreTag).replace(new RegExp(TAG_PLACEHOLDER.highlightPostTag, 'g'), TAG_REPLACEMENT.highlightPostTag);\n}\n\nfunction recursiveEscape(input) {\n  if (isPlainObject(input) && typeof input.value !== 'string') {\n    return Object.keys(input).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, recursiveEscape(input[key])));\n    }, {});\n  }\n\n  if (Array.isArray(input)) {\n    return input.map(recursiveEscape);\n  }\n\n  return _objectSpread({}, input, {\n    value: replaceTagsAndEscape(input.value)\n  });\n}\n\nexport default function escapeHits(hits) {\n  if (hits.__escaped === undefined) {\n    hits = hits.map(function (hit) {\n      if (hit._highlightResult) {\n        hit._highlightResult = recursiveEscape(hit._highlightResult);\n      }\n\n      if (hit._snippetResult) {\n        hit._snippetResult = recursiveEscape(hit._snippetResult);\n      }\n\n      return hit;\n    });\n    hits.__escaped = true;\n  }\n\n  return hits;\n}\nexport function escapeFacets(facetHits) {\n  return facetHits.map(function (h) {\n    return _objectSpread({}, h, {\n      highlighted: replaceTagsAndEscape(h.highlighted)\n    });\n  });\n}","import escapeHits, { TAG_PLACEHOLDER } from '../../lib/escape-highlight';\nimport { checkRendering, createDocumentationMessageGenerator, addAbsolutePosition, addQueryID, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits',\n  connector: true\n});\n/**\n * @typedef {Object} HitsRenderingOptions\n * @property {Object[]} hits The matched hits from Algolia API.\n * @property {Object} results The complete results response from Algolia API.\n * @property {Object} widgetParams All original widget options forwarded to the `renderFn`.\n */\n\n/**\n * @typedef {Object} CustomHitsWidgetOptions\n * @property {boolean} [escapeHTML = true] Whether to escape HTML tags from `hits[i]._highlightResult`.\n * @property {function(Object[]):Object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * **Hits** connector provides the logic to create custom widgets that will render the results retrieved from Algolia.\n * @type {Connector}\n * @param {function(HitsRenderingOptions, boolean)} renderFn Rendering function for the custom **Hits** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomHitsWidgetOptions)} Re-usable widget factory for a custom **Hits** widget.\n * @example\n * // custom `renderFn` to render the custom Hits widget\n * function renderFn(HitsRenderingOptions) {\n *   HitsRenderingOptions.widgetParams.containerNode.html(\n *     HitsRenderingOptions.hits.map(function(hit) {\n *       return '<div>' + hit._highlightResult.name.value + '</div>';\n *     })\n *   );\n * }\n *\n * // connect `renderFn` to Hits logic\n * var customHits = instantsearch.connectors.connectHits(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customHits({\n *     containerNode: $('#custom-hits-container'),\n *   })\n * );\n */\n\nexport default function connectHits(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _widgetParams$escapeH = widgetParams.escapeHTML,\n        escapeHTML = _widgetParams$escapeH === void 0 ? true : _widgetParams$escapeH,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n    return {\n      getConfiguration: function getConfiguration() {\n        return escapeHTML ? TAG_PLACEHOLDER : undefined;\n      },\n      init: function init(_ref) {\n        var instantSearchInstance = _ref.instantSearchInstance;\n        renderFn({\n          hits: [],\n          results: undefined,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref2) {\n        var results = _ref2.results,\n            instantSearchInstance = _ref2.instantSearchInstance;\n\n        if (escapeHTML && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n\n        var initialEscaped = results.hits.__escaped;\n        results.hits = addAbsolutePosition(results.hits, results.page, results.hitsPerPage);\n        results.hits = addQueryID(results.hits, results.queryID);\n        results.hits = transformItems(results.hits); // Make sure the escaped tag stays, even after mapping over the hits.\n        // This prevents the hits from being double-escaped if there are multiple\n        // hits widgets mounted on the page.\n\n        results.hits.__escaped = initialEscaped;\n        renderFn({\n          hits: results.hits,\n          results: results,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { uniq, find } from '../utils';\n\nvar getSelectedHits = function getSelectedHits(hits, selectedObjectIDs) {\n  return selectedObjectIDs.map(function (objectID) {\n    var hit = find(hits, function (h) {\n      return h.objectID === objectID;\n    });\n\n    if (typeof hit === 'undefined') {\n      throw new Error(\"Could not find objectID \\\"\".concat(objectID, \"\\\" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.\"));\n    }\n\n    return hit;\n  });\n};\n\nvar getQueryID = function getQueryID(selectedHits) {\n  var queryIDs = uniq(selectedHits.map(function (hit) {\n    return hit.__queryID;\n  }));\n\n  if (queryIDs.length > 1) {\n    throw new Error('Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.');\n  }\n\n  var queryID = queryIDs[0];\n\n  if (typeof queryID !== 'string') {\n    throw new Error('Could not infer `queryID`. Ensure InstantSearch is configured with `clickAnalytics: true`');\n  }\n\n  return queryID;\n};\n\nvar getPositions = function getPositions(selectedHits) {\n  return selectedHits.map(function (hit) {\n    return hit.__position;\n  });\n};\n\nexport var inferPayload = function inferPayload(_ref) {\n  var method = _ref.method,\n      results = _ref.results,\n      hits = _ref.hits,\n      objectIDs = _ref.objectIDs;\n  var index = results.index;\n  var selectedHits = getSelectedHits(hits, objectIDs);\n  var queryID = getQueryID(selectedHits);\n\n  switch (method) {\n    case 'clickedObjectIDsAfterSearch':\n      {\n        var positions = getPositions(selectedHits);\n        return {\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDs,\n          positions: positions\n        };\n      }\n\n    case 'convertedObjectIDsAfterSearch':\n      return {\n        index: index,\n        queryID: queryID,\n        objectIDs: objectIDs\n      };\n\n    default:\n      throw new Error(\"Unsupported method passed to insights: \\\"\".concat(method, \"\\\".\"));\n  }\n};\n\nvar wrapInsightsClient = function wrapInsightsClient(aa, results, hits) {\n  return function (method, payload) {\n    if (!Array.isArray(payload.objectIDs)) {\n      throw new TypeError('Expected `objectIDs` to be an array.');\n    }\n\n    var inferredPayload = inferPayload({\n      method: method,\n      results: results,\n      hits: hits,\n      objectIDs: payload.objectIDs\n    });\n    aa(method, _objectSpread({}, inferredPayload, {}, payload));\n  };\n};\n\nexport default function withInsights(connector) {\n  var wrapRenderFn = function wrapRenderFn(renderFn) {\n    return function (renderOptions, isFirstRender) {\n      var results = renderOptions.results,\n          hits = renderOptions.hits,\n          instantSearchInstance = renderOptions.instantSearchInstance;\n\n      if (results && hits && instantSearchInstance && instantSearchInstance.insightsClient\n      /* providing the insightsClient is optional */\n      ) {\n          var insights = wrapInsightsClient(instantSearchInstance.insightsClient, results, hits);\n          return renderFn(_objectSpread({}, renderOptions, {\n            insights: insights\n          }), isFirstRender);\n        }\n\n      return renderFn(renderOptions, isFirstRender);\n    };\n  };\n\n  return function (renderFn, unmountFn) {\n    return connector(wrapRenderFn(renderFn), unmountFn);\n  };\n}","import { withInsights } from '../../lib/insights';\nimport connectHits from './connectHits';\nvar connectHitsWithInsights = withInsights(connectHits);\nexport default connectHitsWithInsights;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport { checkRendering, warning, createDocumentationMessageGenerator, find, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits-per-page',\n  connector: true\n});\n/**\n * @typedef {Object} HitsPerPageRenderingOptionsItem\n * @property {number} value Number of hits to display per page.\n * @property {string} label Label to display in the option.\n * @property {boolean} isRefined Indicates if it's the current refined value.\n */\n\n/**\n * @typedef {Object} HitsPerPageWidgetOptionsItem\n * @property {number} value Number of hits to display per page.\n * @property {string} label Label to display in the option.\n * @property {boolean} default The default hits per page on first search.\n */\n\n/**\n * @typedef {Object} HitsPerPageRenderingOptions\n * @property {HitsPerPageRenderingOptionsItem[]} items Array of objects defining the different values and labels.\n * @property {function(item.value)} createURL Creates the URL for a single item name in the list.\n * @property {function(number)} refine Sets the number of hits per page and trigger a search.\n * @property {boolean} hasNoResults `true` if the last search contains no result.\n * @property {Object} widgetParams Original `HitsPerPageWidgetOptions` forwarded to `renderFn`.\n */\n\n/**\n * @typedef {Object} HitsPerPageWidgetOptions\n * @property {HitsPerPageWidgetOptionsItem[]} items Array of objects defining the different values and labels.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * **HitsPerPage** connector provides the logic to create custom widget that will\n * allow a user to choose to display more or less results from Algolia.\n *\n * This connector provides a `refine()` function to change the hits per page configuration and trigger a new search.\n * @type {Connector}\n * @param {function(HitsPerPageRenderingOptions, boolean)} renderFn Rendering function for the custom **HitsPerPage** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(HitsPerPageWidgetOptions)} Re-usable widget factory for a custom **HitsPerPage** widget.\n * @example\n * // custom `renderFn` to render the custom HitsPerPage widget\n * function renderFn(HitsPerPageRenderingOptions, isFirstRendering) {\n *   var containerNode = HitsPerPageRenderingOptions.widgetParams.containerNode\n *   var items = HitsPerPageRenderingOptions.items\n *   var refine = HitsPerPageRenderingOptions.refine\n *\n *   if (isFirstRendering) {\n *     var markup = '<select></select>';\n *     containerNode.append(markup);\n *   }\n *\n *   const itemsHTML = items.map(({value, label, isRefined}) => `\n *     <option\n *       value=\"${value}\"\n *       ${isRefined ? 'selected' : ''}\n *     >\n *       ${label}\n *     </option>\n *   `);\n *\n *   containerNode\n *     .find('select')\n *     .html(itemsHTML);\n *\n *   containerNode\n *     .find('select')\n *     .off('change')\n *     .on('change', e => { refine(e.target.value); });\n * }\n *\n * // connect `renderFn` to HitsPerPage logic\n * var customHitsPerPage = instantsearch.connectors.connectHitsPerPage(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customHitsPerPage({\n *     containerNode: $('#custom-hits-per-page-container'),\n *     items: [\n *       {value: 6, label: '6 per page', default: true},\n *       {value: 12, label: '12 per page'},\n *       {value: 24, label: '24 per page'},\n *     ],\n *   })\n * );\n */\n\nexport default function connectHitsPerPage(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var userItems = widgetParams.items,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n    var items = userItems;\n\n    if (!Array.isArray(items)) {\n      throw new Error(withUsage('The `items` option expects an array of objects.'));\n    }\n\n    var defaultValues = items.filter(function (item) {\n      return item.default;\n    });\n\n    if (defaultValues.length > 1) {\n      throw new Error(withUsage('More than one default value is specified in `items`.'));\n    }\n\n    var defaultValue = find(userItems, function (item) {\n      return item.default === true;\n    });\n    return {\n      getConfiguration: function getConfiguration() {\n        return defaultValues.length > 0 ? {\n          hitsPerPage: defaultValues[0].value\n        } : {};\n      },\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            state = _ref.state,\n            instantSearchInstance = _ref.instantSearchInstance;\n        var isCurrentInOptions = items.some(function (item) {\n          return Number(state.hitsPerPage) === Number(item.value);\n        });\n\n        if (!isCurrentInOptions) {\n          warning(state.hitsPerPage !== undefined, \"\\n`hitsPerPage` is not defined.\\nThe option `hitsPerPage` needs to be set using the `configure` widget.\\n\\nLearn more: https://community.algolia.com/instantsearch.js/v2/widgets/configure.html\\n            \");\n          warning(false, \"\\nThe `items` option of `hitsPerPage` does not contain the \\\"hits per page\\\" value coming from the state: \".concat(state.hitsPerPage, \".\\n\\nYou may want to add another entry to the `items` option with this value.\"));\n          items = [{\n            value: '',\n            label: ''\n          }].concat(_toConsumableArray(items));\n        }\n\n        this.setHitsPerPage = function (value) {\n          return !value && value !== 0 ? helper.setQueryParameter('hitsPerPage', undefined).search() : helper.setQueryParameter('hitsPerPage', value).search();\n        };\n\n        this.createURL = function (helperState) {\n          return function (value) {\n            return createURL(helperState.setQueryParameter('hitsPerPage', !value && value !== 0 ? undefined : value));\n          };\n        };\n\n        renderFn({\n          items: transformItems(this._normalizeItems(state)),\n          refine: this.setHitsPerPage,\n          createURL: this.createURL(helper.state),\n          hasNoResults: true,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      render: function render(_ref2) {\n        var state = _ref2.state,\n            results = _ref2.results,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        var hasNoResults = results.nbHits === 0;\n        renderFn({\n          items: transformItems(this._normalizeItems(state)),\n          refine: this.setHitsPerPage,\n          createURL: this.createURL(state),\n          hasNoResults: hasNoResults,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, false);\n      },\n      _normalizeItems: function _normalizeItems(_ref3) {\n        var hitsPerPage = _ref3.hitsPerPage;\n        return items.map(function (item) {\n          return _objectSpread({}, item, {\n            isRefined: Number(item.value) === Number(hitsPerPage)\n          });\n        });\n      },\n      dispose: function dispose() {\n        unmountFn();\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var hitsPerPage = searchParameters.hitsPerPage;\n\n        if (defaultValue && hitsPerPage === defaultValue.value || hitsPerPage === undefined || uiState.hitsPerPage === hitsPerPage) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          hitsPerPage: hitsPerPage\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        var hitsPerPage = uiState.hitsPerPage;\n        if (hitsPerPage) return searchParameters.setQueryParameter('hitsPerPage', uiState.hitsPerPage);\n\n        if (defaultValue) {\n          return searchParameters.setQueryParameter('hitsPerPage', defaultValue.value);\n        }\n\n        return searchParameters.setQueryParameter('hitsPerPage', undefined);\n      }\n    };\n  };\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport escapeHits, { TAG_PLACEHOLDER } from '../../lib/escape-highlight';\nimport { checkRendering, createDocumentationMessageGenerator, isEqual, addAbsolutePosition, addQueryID, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'infinite-hits',\n  connector: true\n});\n/**\n * @typedef {Object} InfiniteHitsRenderingOptions\n * @property {Array<Object>} hits The aggregated matched hits from Algolia API of all pages.\n * @property {Object} results The complete results response from Algolia API.\n * @property {function} showMore Loads the next page of hits.\n * @property {boolean} isLastPage Indicates if the last page of hits has been reached.\n * @property {Object} widgetParams All original widget options forwarded to the `renderFn`.\n */\n\n/**\n * @typedef {Object} CustomInfiniteHitsWidgetOptions\n * @property {boolean} [escapeHTML = true] Whether to escape HTML tags from `hits[i]._highlightResult`.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * **InfiniteHits** connector provides the logic to create custom widgets that will render an continuous list of results retrieved from Algolia.\n *\n * This connector provides a `InfiniteHitsRenderingOptions.showMore()` function to load next page of matched results.\n * @type {Connector}\n * @param {function(InfiniteHitsRenderingOptions, boolean)} renderFn Rendering function for the custom **InfiniteHits** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomInfiniteHitsWidgetOptions)} Re-usable widget factory for a custom **InfiniteHits** widget.\n * @example\n * // custom `renderFn` to render the custom InfiniteHits widget\n * function renderFn(InfiniteHitsRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     InfiniteHitsRenderingOptions.widgetParams.containerNode\n *       .html('<div id=\"hits\"></div><button id=\"show-more\">Load more</button>');\n *\n *     InfiniteHitsRenderingOptions.widgetParams.containerNode\n *       .find('#show-more')\n *       .on('click', function(event) {\n *         event.preventDefault();\n *         InfiniteHitsRenderingOptions.showMore();\n *       });\n *   }\n *\n *   InfiniteHitsRenderingOptions.widgetParams.containerNode.find('#hits').html(\n *     InfiniteHitsRenderingOptions.hits.map(function(hit) {\n *       return '<div>' + hit._highlightResult.name.value + '</div>';\n *     })\n *   );\n * };\n *\n * // connect `renderFn` to InfiniteHits logic\n * var customInfiniteHits = instantsearch.connectors.connectInfiniteHits(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customInfiniteHits({\n *     containerNode: $('#custom-infinite-hits-container'),\n *   })\n * );\n */\n\nvar connectInfiniteHits = function connectInfiniteHits(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        _ref$escapeHTML = _ref.escapeHTML,\n        escapeHTML = _ref$escapeHTML === void 0 ? true : _ref$escapeHTML,\n        _ref$transformItems = _ref.transformItems,\n        transformItems = _ref$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref$transformItems,\n        _ref$showPrevious = _ref.showPrevious,\n        hasShowPrevious = _ref$showPrevious === void 0 ? false : _ref$showPrevious;\n\n    var hitsCache = [];\n    var firstReceivedPage = Infinity;\n    var lastReceivedPage = -1;\n    var prevState;\n    var showPrevious;\n    var showMore;\n\n    var getShowPrevious = function getShowPrevious(helper) {\n      return function () {\n        // Using the helper's `overrideStateWithoutTriggeringChangeEvent` method\n        // avoid updating the browser URL when the user displays the previous page.\n        helper.overrideStateWithoutTriggeringChangeEvent(_objectSpread({}, helper.state, {\n          page: firstReceivedPage - 1\n        })).search();\n      };\n    };\n\n    var getShowMore = function getShowMore(helper) {\n      return function () {\n        helper.setPage(lastReceivedPage + 1).search();\n      };\n    };\n\n    return {\n      getConfiguration: function getConfiguration() {\n        return escapeHTML ? TAG_PLACEHOLDER : {};\n      },\n      init: function init(_ref2) {\n        var instantSearchInstance = _ref2.instantSearchInstance,\n            helper = _ref2.helper;\n        showPrevious = getShowPrevious(helper);\n        showMore = getShowMore(helper);\n        firstReceivedPage = helper.state.page;\n        lastReceivedPage = helper.state.page;\n        renderFn({\n          hits: hitsCache,\n          results: undefined,\n          showPrevious: showPrevious,\n          showMore: showMore,\n          isFirstPage: firstReceivedPage === 0,\n          isLastPage: true,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n\n        // Reset cache and received pages if anything changes in the\n        // search state, except for the page.\n        //\n        // We're doing this to \"reset\" the widget if a refinement or the\n        // query changes between renders, but we want to keep it as is\n        // if we only change pages.\n        var page = state.page,\n            currentState = _objectWithoutProperties(state, [\"page\"]);\n\n        if (!isEqual(currentState, prevState)) {\n          hitsCache = [];\n          firstReceivedPage = page;\n          lastReceivedPage = page;\n          prevState = currentState;\n        }\n\n        if (escapeHTML && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n\n        var initialEscaped = results.hits.__escaped;\n        results.hits = addAbsolutePosition(results.hits, results.page, results.hitsPerPage);\n        results.hits = addQueryID(results.hits, results.queryID);\n        results.hits = transformItems(results.hits); // Make sure the escaped tag stays after mapping over the hits.\n        // This prevents the hits from being double-escaped if there are multiple\n        // hits widgets mounted on the page.\n\n        results.hits.__escaped = initialEscaped;\n\n        if (lastReceivedPage < page || !hitsCache.length) {\n          hitsCache = [].concat(_toConsumableArray(hitsCache), _toConsumableArray(results.hits));\n          lastReceivedPage = page;\n        } else if (firstReceivedPage > page) {\n          hitsCache = [].concat(_toConsumableArray(results.hits), _toConsumableArray(hitsCache));\n          firstReceivedPage = page;\n        }\n\n        var isFirstPage = firstReceivedPage === 0;\n        var isLastPage = results.nbPages <= results.page + 1;\n        renderFn({\n          hits: hitsCache,\n          results: results,\n          showPrevious: showPrevious,\n          showMore: showMore,\n          isFirstPage: isFirstPage,\n          isLastPage: isLastPage,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var page = searchParameters.page;\n\n        if (!hasShowPrevious || page === 0 || page + 1 === uiState.page) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          page: page + 1\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n\n        if (!hasShowPrevious) {\n          return searchParameters;\n        }\n\n        var uiPage = uiState.page;\n\n        if (uiPage) {\n          return searchParameters.setQueryParameter('page', uiPage - 1);\n        }\n\n        return searchParameters.setQueryParameter('page', 0);\n      }\n    };\n  };\n};\n\nexport default connectInfiniteHits;","import { withInsights } from '../../lib/insights';\nimport connectInfiniteHits from './connectInfiniteHits';\nvar connectInfiniteHitsWithInsights = withInsights(connectInfiniteHits);\nexport default connectInfiniteHitsWithInsights;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'menu',\n  connector: true\n});\n/**\n * @typedef {Object} MenuItem\n * @property {string} value The value of the menu item.\n * @property {string} label Human-readable value of the menu item.\n * @property {number} count Number of results matched after refinement is applied.\n * @property {boolean} isRefined Indicates if the refinement is applied.\n */\n\n/**\n * @typedef {Object} CustomMenuWidgetOptions\n * @property {string} attribute Name of the attribute for faceting (eg. \"free_shipping\").\n * @property {number} [limit = 10] How many facets values to retrieve.\n * @property {boolean} [showMore = false] Whether to display a button that expands the number of items.\n * @property {number} [showMoreLimit = 20] How many facets values to retrieve when `toggleShowMore` is called, this value is meant to be greater than `limit` option.\n * @property {string[]|function} [sortBy = ['isRefined', 'name:asc']] How to sort refinements. Possible values: `count|isRefined|name:asc|name:desc`.\n *\n * You can also use a sort function that behaves like the standard Javascript [compareFunction](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Syntax).\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} MenuRenderingOptions\n * @property {MenuItem[]} items The elements that can be refined for the current search results.\n * @property {function(item.value): string} createURL Creates the URL for a single item name in the list.\n * @property {function(item.value)} refine Filter the search to item value.\n * @property {boolean} canRefine True if refinement can be applied.\n * @property {Object} widgetParams All original `CustomMenuWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isShowingMore True if the menu is displaying all the menu items.\n * @property {function} toggleShowMore Toggles the number of values displayed between `limit` and `showMore.limit`.\n * @property {boolean} canToggleShowMore `true` if the toggleShowMore button can be activated (enough items to display more or\n * already displaying more than `limit` items)\n */\n\n/**\n * **Menu** connector provides the logic to build a widget that will give the user the ability to choose a single value for a specific facet. The typical usage of menu is for navigation in categories.\n *\n * This connector provides a `toggleShowMore()` function to display more or less items and a `refine()`\n * function to select an item. While selecting a new element, the `refine` will also unselect the\n * one that is currently selected.\n *\n * **Requirement:** the attribute passed as `attribute` must be present in \"attributes for faceting\" on the Algolia dashboard or configured as attributesForFaceting via a set settings call to the Algolia API.\n * @type {Connector}\n * @param {function(MenuRenderingOptions, boolean)} renderFn Rendering function for the custom **Menu** widget. widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomMenuWidgetOptions)} Re-usable widget factory for a custom **Menu** widget.\n * @example\n * // custom `renderFn` to render the custom Menu widget\n * function renderFn(MenuRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     MenuRenderingOptions.widgetParams.containerNode\n *       .html('<select></select');\n *\n *     MenuRenderingOptions.widgetParams.containerNode\n *       .find('select')\n *       .on('change', function(event) {\n *         MenuRenderingOptions.refine(event.target.value);\n *       });\n *   }\n *\n *   var options = MenuRenderingOptions.items.map(function(item) {\n *     return item.isRefined\n *       ? '<option value=\"' + item.value + '\" selected>' + item.label + '</option>'\n *       : '<option value=\"' + item.value + '\">' + item.label + '</option>';\n *   });\n *\n *   MenuRenderingOptions.widgetParams.containerNode\n *     .find('select')\n *     .html(options);\n * }\n *\n * // connect `renderFn` to Menu logic\n * var customMenu = instantsearch.connectors.connectMenu(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customMenu({\n *     containerNode: $('#custom-menu-container'),\n *     attribute: 'categories',\n *     limit: 10,\n *   })\n * );\n */\n\nexport default function connectMenu(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        _widgetParams$limit = widgetParams.limit,\n        limit = _widgetParams$limit === void 0 ? 10 : _widgetParams$limit,\n        _widgetParams$showMor = widgetParams.showMore,\n        showMore = _widgetParams$showMor === void 0 ? false : _widgetParams$showMor,\n        _widgetParams$showMor2 = widgetParams.showMoreLimit,\n        showMoreLimit = _widgetParams$showMor2 === void 0 ? 20 : _widgetParams$showMor2,\n        _widgetParams$sortBy = widgetParams.sortBy,\n        sortBy = _widgetParams$sortBy === void 0 ? ['isRefined', 'name:asc'] : _widgetParams$sortBy,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('The `showMoreLimit` option must be greater than `limit`.'));\n    }\n\n    return {\n      isShowingMore: false,\n      // Provide the same function to the `renderFn` so that way the user\n      // has to only bind it once when `isFirstRendering` for instance\n      toggleShowMore: function toggleShowMore() {},\n      cachedToggleShowMore: function cachedToggleShowMore() {\n        this.toggleShowMore();\n      },\n      createToggleShowMore: function createToggleShowMore(_ref) {\n        var _this = this;\n\n        var results = _ref.results,\n            instantSearchInstance = _ref.instantSearchInstance;\n        return function () {\n          _this.isShowingMore = !_this.isShowingMore;\n\n          _this.render({\n            results: results,\n            instantSearchInstance: instantSearchInstance\n          });\n        };\n      },\n      getLimit: function getLimit() {\n        return this.isShowingMore ? showMoreLimit : limit;\n      },\n      refine: function refine(helper) {\n        return function (facetValue) {\n          var _helper$getHierarchic = helper.getHierarchicalFacetBreadcrumb(attribute),\n              _helper$getHierarchic2 = _slicedToArray(_helper$getHierarchic, 1),\n              refinedItem = _helper$getHierarchic2[0];\n\n          helper.toggleRefinement(attribute, facetValue ? facetValue : refinedItem).search();\n        };\n      },\n      getConfiguration: function getConfiguration(configuration) {\n        var widgetConfiguration = {\n          hierarchicalFacets: [{\n            name: attribute,\n            attributes: [attribute]\n          }]\n        };\n        var currentMaxValuesPerFacet = configuration.maxValuesPerFacet || 0;\n        widgetConfiguration.maxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        return widgetConfiguration;\n      },\n      init: function init(_ref2) {\n        var helper = _ref2.helper,\n            createURL = _ref2.createURL,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        this.cachedToggleShowMore = this.cachedToggleShowMore.bind(this);\n\n        this._createURL = function (facetValue) {\n          return createURL(helper.state.toggleRefinement(attribute, facetValue));\n        };\n\n        this._refine = this.refine(helper);\n        renderFn({\n          items: [],\n          createURL: this._createURL,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          canRefine: false,\n          widgetParams: widgetParams,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore,\n          canToggleShowMore: false\n        }, true);\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        var facetItems = results.getFacetValues(attribute, {\n          sortBy: sortBy\n        }).data || [];\n        var items = transformItems(facetItems.slice(0, this.getLimit()).map(function (_ref4) {\n          var label = _ref4.name,\n              value = _ref4.path,\n              item = _objectWithoutProperties(_ref4, [\"name\", \"path\"]);\n\n          return _objectSpread({}, item, {\n            label: label,\n            value: value\n          });\n        }));\n        this.toggleShowMore = this.createToggleShowMore({\n          results: results,\n          instantSearchInstance: instantSearchInstance\n        });\n        renderFn({\n          items: items,\n          createURL: this._createURL,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          canRefine: items.length > 0,\n          widgetParams: widgetParams,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore,\n          canToggleShowMore: showMore && (this.isShowingMore || facetItems.length > this.getLimit())\n        }, false);\n      },\n      dispose: function dispose(_ref5) {\n        var state = _ref5.state;\n        unmountFn();\n        var nextState = state;\n\n        if (state.isHierarchicalFacetRefined(attribute)) {\n          nextState = state.removeHierarchicalFacetRefinement(attribute);\n        }\n\n        nextState = nextState.removeHierarchicalFacet(attribute);\n\n        if (nextState.maxValuesPerFacet === limit || showMoreLimit && nextState.maxValuesPerFacet === showMoreLimit) {\n          nextState.setQueryParameters('maxValuesPerFacet', undefined);\n        }\n\n        return nextState;\n      },\n      getWidgetState: function getWidgetState(uiState, _ref6) {\n        var searchParameters = _ref6.searchParameters;\n\n        var _searchParameters$get = searchParameters.getHierarchicalFacetBreadcrumb(attribute),\n            _searchParameters$get2 = _slicedToArray(_searchParameters$get, 1),\n            refinedItem = _searchParameters$get2[0];\n\n        if (!refinedItem || uiState.menu && uiState.menu[attribute] === refinedItem) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          menu: _objectSpread({}, uiState.menu, _defineProperty({}, attribute, refinedItem))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref7) {\n        var uiState = _ref7.uiState;\n\n        if (uiState.menu && uiState.menu[attribute]) {\n          var uiStateRefinedItem = uiState.menu[attribute];\n          var isAlreadyRefined = searchParameters.isHierarchicalFacetRefined(attribute, uiStateRefinedItem);\n          if (isAlreadyRefined) return searchParameters;\n          return searchParameters.toggleRefinement(attribute, uiStateRefinedItem);\n        }\n\n        if (searchParameters.isHierarchicalFacetRefined(attribute)) {\n          var _searchParameters$get3 = searchParameters.getHierarchicalFacetBreadcrumb(attribute),\n              _searchParameters$get4 = _slicedToArray(_searchParameters$get3, 1),\n              refinedItem = _searchParameters$get4[0];\n\n          return searchParameters.toggleRefinement(attribute, refinedItem);\n        }\n\n        return searchParameters;\n      }\n    };\n  };\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, isFiniteNumber, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'numeric-menu',\n  connector: true\n});\n/**\n * @typedef {Object} NumericMenuOption\n * @property {string} name Name of the option.\n * @property {number} start Lower bound of the option (>=).\n * @property {number} end Higher bound of the option (<=).\n */\n\n/**\n * @typedef {Object} NumericMenuItem\n * @property {string} label Name of the option.\n * @property {string} value URL encoded of the bounds object with the form `{start, end}`. This value can be used verbatim in the webpage and can be read by `refine` directly. If you want to inspect the value, you can do `JSON.parse(window.decodeURI(value))` to get the object.\n * @property {boolean} isRefined True if the value is selected.\n */\n\n/**\n * @typedef {Object} CustomNumericMenuWidgetOptions\n * @property {string} attribute Name of the attribute for filtering.\n * @property {NumericMenuOption[]} items List of all the items.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} NumericMenuRenderingOptions\n * @property {function(item.value): string} createURL Creates URLs for the next state, the string is the name of the selected option.\n * @property {NumericMenuItem[]} items The list of available choices.\n * @property {boolean} hasNoResults `true` if the last search contains no result.\n * @property {function(item.value)} refine Sets the selected value and trigger a new search.\n * @property {Object} widgetParams All original `CustomNumericMenuWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **NumericMenu** connector provides the logic to build a custom widget that will give the user the ability to choose a range on to refine the search results.\n *\n * It provides a `refine(item)` function to refine on the selected range.\n *\n * **Requirement:** the attribute passed as `attribute` must be present in \"attributes for faceting\" on the Algolia dashboard or configured as attributesForFaceting via a set settings call to the Algolia API.\n * @function connectNumericMenu\n * @type {Connector}\n * @param {function(NumericMenuRenderingOptions, boolean)} renderFn Rendering function for the custom **NumericMenu** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomNumericMenuWidgetOptions)} Re-usable widget factory for a custom **NumericMenu** widget.\n * @example\n * // custom `renderFn` to render the custom NumericMenu widget\n * function renderFn(NumericMenuRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     NumericMenuRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   NumericMenuRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var list = NumericMenuRenderingOptions.items.map(function(item) {\n *     return '<li data-refine-value=\"' + item.value + '\">' +\n *       '<input type=\"radio\"' + (item.isRefined ? ' checked' : '') + '/> ' +\n *       item.label + '</li>';\n *   });\n *\n *   NumericMenuRenderingOptions.widgetParams.containerNode.find('ul').html(list);\n *   NumericMenuRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         event.stopPropagation();\n *         NumericMenuRenderingOptions.refine($(this).data('refine-value'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to NumericMenu logic\n * var customNumericMenu = instantsearch.connectors.connectNumericMenu(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customNumericMenu({\n *     containerNode: $('#custom-numeric-menu-container'),\n *     attribute: 'price',\n *     items: [\n *       {name: 'All'},\n *       {end: 4, name: 'less than 4'},\n *       {start: 4, end: 4, name: '4'},\n *       {start: 5, end: 10, name: 'between 5 and 10'},\n *       {start: 10, name: 'more than 10'},\n *     ],\n *   })\n * );\n */\n\nexport default function connectNumericMenu(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        items = widgetParams.items,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (x) {\n      return x;\n    } : _widgetParams$transfo;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (!items) {\n      throw new Error(withUsage('The `items` option expects an array of objects.'));\n    }\n\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n\n        this._refine = function (facetValue) {\n          var refinedState = refine(helper.state, attribute, items, facetValue);\n          helper.setState(refinedState).search();\n        };\n\n        this._createURL = function (state) {\n          return function (facetValue) {\n            return createURL(refine(state, attribute, items, facetValue));\n          };\n        };\n\n        this._prepareItems = function (state) {\n          return items.map(function (_ref2) {\n            var start = _ref2.start,\n                end = _ref2.end,\n                label = _ref2.label;\n            return {\n              label: label,\n              value: window.encodeURI(JSON.stringify({\n                start: start,\n                end: end\n              })),\n              isRefined: isRefined(state, attribute, {\n                start: start,\n                end: end\n              })\n            };\n          });\n        };\n\n        renderFn({\n          createURL: this._createURL(helper.state),\n          items: transformItems(this._prepareItems(helper.state)),\n          hasNoResults: true,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        renderFn({\n          createURL: this._createURL(state),\n          items: transformItems(this._prepareItems(state)),\n          hasNoResults: results.nbHits === 0,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        return state.clearRefinements(attribute);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var currentRefinements = searchParameters.getNumericRefinements(attribute);\n        var equal = currentRefinements['='] && currentRefinements['='][0];\n\n        if (equal || equal === 0) {\n          return _objectSpread({}, uiState, {\n            numericMenu: _objectSpread({}, uiState.numericMenu, _defineProperty({}, attribute, \"\".concat(currentRefinements['='])))\n          });\n        }\n\n        var lowerBound = currentRefinements['>='] && currentRefinements['>='][0] || '';\n        var upperBound = currentRefinements['<='] && currentRefinements['<='][0] || '';\n\n        if (lowerBound !== '' || upperBound !== '') {\n          if (uiState.numericMenu && uiState.numericMenu[attribute] === \"\".concat(lowerBound, \":\").concat(upperBound)) return uiState;\n          return _objectSpread({}, uiState, {\n            numericMenu: _objectSpread({}, uiState.numericMenu, _defineProperty({}, attribute, \"\".concat(lowerBound, \":\").concat(upperBound)))\n          });\n        }\n\n        return uiState;\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var clearedParams = searchParameters.clearRefinements(attribute);\n        var value = uiState.numericMenu && uiState.numericMenu[attribute];\n\n        if (!value) {\n          return clearedParams;\n        }\n\n        var valueAsEqual = value.indexOf(':') === -1 && value;\n\n        if (valueAsEqual) {\n          return clearedParams.addNumericRefinement(attribute, '=', valueAsEqual);\n        }\n\n        var _value$split$map = value.split(':').map(parseFloat),\n            _value$split$map2 = _slicedToArray(_value$split$map, 2),\n            lowerBound = _value$split$map2[0],\n            upperBound = _value$split$map2[1];\n\n        if (isFiniteNumber(lowerBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attribute, '>=', lowerBound);\n        }\n\n        if (isFiniteNumber(upperBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attribute, '<=', upperBound);\n        }\n\n        return clearedParams;\n      }\n    };\n  };\n}\n\nfunction isRefined(state, attribute, option) {\n  var currentRefinements = state.getNumericRefinements(attribute);\n\n  if (option.start !== undefined && option.end !== undefined) {\n    if (option.start === option.end) {\n      return hasNumericRefinement(currentRefinements, '=', option.start);\n    }\n  }\n\n  if (option.start !== undefined) {\n    return hasNumericRefinement(currentRefinements, '>=', option.start);\n  }\n\n  if (option.end !== undefined) {\n    return hasNumericRefinement(currentRefinements, '<=', option.end);\n  }\n\n  if (option.start === undefined && option.end === undefined) {\n    return Object.keys(currentRefinements).length === 0;\n  }\n\n  return undefined;\n}\n\nfunction refine(state, attribute, items, facetValue) {\n  var resolvedState = state;\n  var refinedOption = JSON.parse(window.decodeURI(facetValue));\n  var currentRefinements = resolvedState.getNumericRefinements(attribute);\n\n  if (refinedOption.start === undefined && refinedOption.end === undefined) {\n    return resolvedState.clearRefinements(attribute);\n  }\n\n  if (!isRefined(resolvedState, attribute, refinedOption)) {\n    resolvedState = resolvedState.clearRefinements(attribute);\n  }\n\n  if (refinedOption.start !== undefined && refinedOption.end !== undefined) {\n    if (refinedOption.start > refinedOption.end) {\n      throw new Error('option.start should be > to option.end');\n    }\n\n    if (refinedOption.start === refinedOption.end) {\n      if (hasNumericRefinement(currentRefinements, '=', refinedOption.start)) {\n        resolvedState = resolvedState.removeNumericRefinement(attribute, '=', refinedOption.start);\n      } else {\n        resolvedState = resolvedState.addNumericRefinement(attribute, '=', refinedOption.start);\n      }\n\n      return resolvedState;\n    }\n  }\n\n  if (refinedOption.start !== undefined) {\n    if (hasNumericRefinement(currentRefinements, '>=', refinedOption.start)) {\n      resolvedState = resolvedState.removeNumericRefinement(attribute, '>=', refinedOption.start);\n    } else {\n      resolvedState = resolvedState.addNumericRefinement(attribute, '>=', refinedOption.start);\n    }\n  }\n\n  if (refinedOption.end !== undefined) {\n    if (hasNumericRefinement(currentRefinements, '<=', refinedOption.end)) {\n      resolvedState = resolvedState.removeNumericRefinement(attribute, '<=', refinedOption.end);\n    } else {\n      resolvedState = resolvedState.addNumericRefinement(attribute, '<=', refinedOption.end);\n    }\n  }\n\n  resolvedState.page = 0;\n  return resolvedState;\n}\n\nfunction hasNumericRefinement(currentRefinements, operator, value) {\n  var hasOperatorRefinements = currentRefinements[operator] !== undefined;\n  return hasOperatorRefinements && currentRefinements[operator].includes(value);\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { range } from '../../lib/utils';\n\nvar Paginator =\n/*#__PURE__*/\nfunction () {\n  function Paginator(params) {\n    _classCallCheck(this, Paginator);\n\n    this.currentPage = params.currentPage;\n    this.total = params.total;\n    this.padding = params.padding;\n  }\n\n  _createClass(Paginator, [{\n    key: \"pages\",\n    value: function pages() {\n      var total = this.total,\n          currentPage = this.currentPage,\n          padding = this.padding;\n      if (total === 0) return [0];\n      var totalDisplayedPages = this.nbPagesDisplayed(padding, total);\n\n      if (totalDisplayedPages === total) {\n        return range({\n          end: total\n        });\n      }\n\n      var paddingLeft = this.calculatePaddingLeft(currentPage, padding, total, totalDisplayedPages);\n      var paddingRight = totalDisplayedPages - paddingLeft;\n      var first = currentPage - paddingLeft;\n      var last = currentPage + paddingRight;\n      return range({\n        start: first,\n        end: last\n      });\n    }\n  }, {\n    key: \"nbPagesDisplayed\",\n    value: function nbPagesDisplayed(padding, total) {\n      return Math.min(2 * padding + 1, total);\n    }\n  }, {\n    key: \"calculatePaddingLeft\",\n    value: function calculatePaddingLeft(current, padding, total, totalDisplayedPages) {\n      if (current <= padding) {\n        return current;\n      }\n\n      if (current >= total - padding) {\n        return totalDisplayedPages - (total - current);\n      }\n\n      return padding;\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      return this.currentPage === this.total - 1;\n    }\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.currentPage === 0;\n    }\n  }]);\n\n  return Paginator;\n}();\n\nexport default Paginator;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nimport Paginator from './Paginator';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination',\n  connector: true\n});\n/**\n * @typedef {Object} CustomPaginationWidgetOptions\n * @property {number} [totalPages] The total number of pages to browse.\n * @property {number} [padding = 3] The padding of pages to show around the current page\n */\n\n/**\n * @typedef {Object} PaginationRenderingOptions\n * @property {function(page): string} createURL Creates URLs for the next state, the number is the page to generate the URL for.\n * @property {number} currentRefinement The number of the page currently displayed.\n * @property {number} nbHits The number of hits computed for the last query (can be approximated).\n * @property {number} nbPages The number of pages for the result set.\n * @property {number[]} pages The actual pages relevant to the current situation and padding\n * @property {boolean} isFirstPage true if the current page is also the first page\n * @property {boolean} isLastPage true if the current page is also the last page\n * @property {function(page)} refine Sets the current page and trigger a search.\n * @property {Object} widgetParams All original `CustomPaginationWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Pagination** connector provides the logic to build a widget that will let the user\n * choose the current page of the results.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n *\n * @type {Connector}\n * @param {function(PaginationRenderingOptions, boolean)} renderFn Rendering function for the custom **Pagination** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomPaginationWidgetOptions)} Re-usable widget factory for a custom **Pagination** widget.\n * @example\n * // custom `renderFn` to render the custom Pagination widget\n * function renderFn(PaginationRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     PaginationRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   // remove event listeners before replacing markup\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('a[data-page]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var pages = PaginationRenderingOptions.pages\n *     .map(function(page) {\n *       return '<li style=\"display: inline-block; margin-right: 10px;\">' +\n *         '<a href=\"' + PaginationRenderingOptions.createURL(page) + '\" data-page=\"' + page + '\">' +\n *         (parseInt(page) + 1) + '</a></li>';\n *     });\n *\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('ul')\n *     .html(pages);\n *\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('a[data-page]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         PaginationRenderingOptions.refine($(this).data('page'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to Pagination logic\n * var customPagination = instantsearch.connectors.connectPagination(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customPagination({\n *     containerNode: $('#custom-pagination-container'),\n *     totalPages: 20,\n *     padding: 4,\n *   })\n * );\n */\n\nexport default function connectPagination(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var totalPages = widgetParams.totalPages,\n        _widgetParams$padding = widgetParams.padding,\n        padding = _widgetParams$padding === void 0 ? 3 : _widgetParams$padding;\n    var pager = new Paginator({\n      currentPage: 0,\n      total: 0,\n      padding: padding\n    });\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n\n        this.refine = function (page) {\n          helper.setPage(page);\n          helper.search();\n        };\n\n        this.createURL = function (state) {\n          return function (page) {\n            return createURL(state.setPage(page));\n          };\n        };\n\n        renderFn({\n          createURL: this.createURL(helper.state),\n          currentRefinement: helper.getPage() || 0,\n          nbHits: 0,\n          nbPages: 0,\n          pages: [],\n          isFirstPage: true,\n          isLastPage: true,\n          refine: this.refine,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      getMaxPage: function getMaxPage(_ref2) {\n        var nbPages = _ref2.nbPages;\n        return totalPages !== undefined ? Math.min(totalPages, nbPages) : nbPages;\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        var nbPages = this.getMaxPage(results);\n        pager.currentPage = state.page;\n        pager.total = nbPages;\n        renderFn({\n          createURL: this.createURL(state),\n          currentRefinement: state.page,\n          refine: this.refine,\n          nbHits: results.nbHits,\n          nbPages: nbPages,\n          pages: pager.pages(),\n          isFirstPage: pager.isFirstPage(),\n          isLastPage: pager.isLastPage(),\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var page = searchParameters.page;\n        if (page === 0 || page + 1 === uiState.page) return uiState;\n        return _objectSpread({}, uiState, {\n          page: page + 1\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        var uiPage = uiState.page;\n        if (uiPage) return searchParameters.setQueryParameter('page', uiState.page - 1);\n        return searchParameters.setQueryParameter('page', 0);\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { checkRendering, createDocumentationMessageGenerator, isFiniteNumber, find, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'range-input',\n  connector: true\n}, {\n  name: 'range-slider',\n  connector: true\n});\n/**\n * @typedef {Object} CustomRangeWidgetOptions\n * @property {string} attribute Name of the attribute for faceting.\n * @property {number} [min = undefined] Minimal range value, default to automatically computed from the result set.\n * @property {number} [max = undefined] Maximal range value, default to automatically computed from the result set.\n * @property {number} [precision = 2] Number of digits after decimal point to use.\n */\n\n/**\n * @typedef {Object} RangeRenderingOptions\n * @property {function(Array<number, number>)} refine Sets a range to filter the results on. Both values\n * are optional, and will default to the higher and lower bounds. You can use `undefined` to remove a\n * previously set bound or to set an infinite bound.\n * @property {{min: number, max: number}} range Results bounds without the current range filter.\n * @property {Array<number, number>} start Current numeric bounds of the search.\n * @property {{from: function, to: function}} formatter Transform for the rendering `from` and/or `to` values.\n * Both functions take a `number` as input and should output a `string`.\n * @property {Object} widgetParams All original `CustomRangeWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Range** connector provides the logic to create custom widget that will let\n * the user refine results using a numeric range.\n *\n * This connectors provides a `refine()` function that accepts bounds. It will also provide\n * information about the min and max bounds for the current result set.\n * @type {Connector}\n * @param {function(RangeRenderingOptions, boolean)} renderFn Rendering function for the custom **Range** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomRangeWidgetOptions)} Re-usable widget factory for a custom **Range** widget.\n */\n\nexport default function connectRange(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        minBound = widgetParams.min,\n        maxBound = widgetParams.max,\n        _widgetParams$precisi = widgetParams.precision,\n        precision = _widgetParams$precisi === void 0 ? 2 : _widgetParams$precisi;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    var hasMinBound = isFiniteNumber(minBound);\n    var hasMaxBound = isFiniteNumber(maxBound);\n\n    var formatToNumber = function formatToNumber(v) {\n      return Number(Number(v).toFixed(precision));\n    };\n\n    var rangeFormatter = {\n      from: function from(v) {\n        return v;\n      },\n      to: function to(v) {\n        return formatToNumber(v).toLocaleString();\n      }\n    };\n    return {\n      _getCurrentRange: function _getCurrentRange(stats) {\n        var pow = Math.pow(10, precision);\n        var min;\n\n        if (hasMinBound) {\n          min = minBound;\n        } else if (isFiniteNumber(stats.min)) {\n          min = stats.min;\n        } else {\n          min = 0;\n        }\n\n        var max;\n\n        if (hasMaxBound) {\n          max = maxBound;\n        } else if (isFiniteNumber(stats.max)) {\n          max = stats.max;\n        } else {\n          max = 0;\n        }\n\n        return {\n          min: Math.floor(min * pow) / pow,\n          max: Math.ceil(max * pow) / pow\n        };\n      },\n      _getCurrentRefinement: function _getCurrentRefinement(helper) {\n        var _ref = helper.getNumericRefinement(attribute, '>=') || [],\n            _ref2 = _slicedToArray(_ref, 1),\n            minValue = _ref2[0];\n\n        var _ref3 = helper.getNumericRefinement(attribute, '<=') || [],\n            _ref4 = _slicedToArray(_ref3, 1),\n            maxValue = _ref4[0];\n\n        var min = isFiniteNumber(minValue) ? minValue : -Infinity;\n        var max = isFiniteNumber(maxValue) ? maxValue : Infinity;\n        return [min, max];\n      },\n      _refine: function _refine(helper, currentRange) {\n        // eslint-disable-next-line complexity\n        return function () {\n          var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [],\n              _ref6 = _slicedToArray(_ref5, 2),\n              nextMin = _ref6[0],\n              nextMax = _ref6[1];\n\n          var currentRangeMin = currentRange.min,\n              currentRangeMax = currentRange.max;\n\n          var _ref7 = helper.getNumericRefinement(attribute, '>=') || [],\n              _ref8 = _slicedToArray(_ref7, 1),\n              min = _ref8[0];\n\n          var _ref9 = helper.getNumericRefinement(attribute, '<=') || [],\n              _ref10 = _slicedToArray(_ref9, 1),\n              max = _ref10[0];\n\n          var isResetMin = nextMin === undefined || nextMin === '';\n          var isResetMax = nextMax === undefined || nextMax === '';\n          var nextMinAsNumber = !isResetMin ? parseFloat(nextMin) : undefined;\n          var nextMaxAsNumber = !isResetMax ? parseFloat(nextMax) : undefined;\n          var newNextMin;\n\n          if (!hasMinBound && currentRangeMin === nextMinAsNumber) {\n            newNextMin = undefined;\n          } else if (hasMinBound && isResetMin) {\n            newNextMin = minBound;\n          } else {\n            newNextMin = nextMinAsNumber;\n          }\n\n          var newNextMax;\n\n          if (!hasMaxBound && currentRangeMax === nextMaxAsNumber) {\n            newNextMax = undefined;\n          } else if (hasMaxBound && isResetMax) {\n            newNextMax = maxBound;\n          } else {\n            newNextMax = nextMaxAsNumber;\n          }\n\n          var isResetNewNextMin = newNextMin === undefined;\n          var isValidNewNextMin = isFiniteNumber(newNextMin);\n          var isValidMinCurrentRange = isFiniteNumber(currentRangeMin);\n          var isGreaterThanCurrentRange = isValidMinCurrentRange && currentRangeMin <= newNextMin;\n          var isMinValid = isResetNewNextMin || isValidNewNextMin && (!isValidMinCurrentRange || isGreaterThanCurrentRange);\n          var isResetNewNextMax = newNextMax === undefined;\n          var isValidNewNextMax = isFiniteNumber(newNextMax);\n          var isValidMaxCurrentRange = isFiniteNumber(currentRangeMax);\n          var isLowerThanRange = isValidMaxCurrentRange && currentRangeMax >= newNextMax;\n          var isMaxValid = isResetNewNextMax || isValidNewNextMax && (!isValidMaxCurrentRange || isLowerThanRange);\n          var hasMinChange = min !== newNextMin;\n          var hasMaxChange = max !== newNextMax;\n\n          if ((hasMinChange || hasMaxChange) && isMinValid && isMaxValid) {\n            helper.clearRefinements(attribute);\n\n            if (isValidNewNextMin) {\n              helper.addNumericRefinement(attribute, '>=', formatToNumber(newNextMin));\n            }\n\n            if (isValidNewNextMax) {\n              helper.addNumericRefinement(attribute, '<=', formatToNumber(newNextMax));\n            }\n\n            helper.search();\n          }\n        };\n      },\n      getConfiguration: function getConfiguration(currentConfiguration) {\n        var configuration = {\n          disjunctiveFacets: [attribute]\n        };\n        var isBoundsDefined = hasMinBound || hasMaxBound;\n        var boundsAlreadyDefined = currentConfiguration && currentConfiguration.numericRefinements && currentConfiguration.numericRefinements[attribute] !== undefined;\n        var isMinBoundValid = isFiniteNumber(minBound);\n        var isMaxBoundValid = isFiniteNumber(maxBound);\n        var isAbleToRefine = isMinBoundValid && isMaxBoundValid ? minBound < maxBound : isMinBoundValid || isMaxBoundValid;\n\n        if (isBoundsDefined && !boundsAlreadyDefined && isAbleToRefine) {\n          configuration.numericRefinements = _defineProperty({}, attribute, {});\n\n          if (hasMinBound) {\n            configuration.numericRefinements[attribute]['>='] = [minBound];\n          }\n\n          if (hasMaxBound) {\n            configuration.numericRefinements[attribute]['<='] = [maxBound];\n          }\n        }\n\n        return configuration;\n      },\n      init: function init(_ref11) {\n        var helper = _ref11.helper,\n            instantSearchInstance = _ref11.instantSearchInstance;\n        var stats = {};\n\n        var currentRange = this._getCurrentRange(stats);\n\n        var start = this._getCurrentRefinement(helper);\n\n        renderFn({\n          // On first render pass an empty range\n          // to be able to bypass the validation\n          // related to it\n          refine: this._refine(helper, {}),\n          format: rangeFormatter,\n          range: currentRange,\n          widgetParams: _objectSpread({}, widgetParams, {\n            precision: precision\n          }),\n          start: start,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      render: function render(_ref12) {\n        var results = _ref12.results,\n            helper = _ref12.helper,\n            instantSearchInstance = _ref12.instantSearchInstance;\n        var facetsFromResults = results.disjunctiveFacets || [];\n        var facet = find(facetsFromResults, function (facetResult) {\n          return facetResult.name === attribute;\n        });\n        var stats = facet && facet.stats || {};\n\n        var currentRange = this._getCurrentRange(stats);\n\n        var start = this._getCurrentRefinement(helper);\n\n        renderFn({\n          refine: this._refine(helper, currentRange),\n          format: rangeFormatter,\n          range: currentRange,\n          widgetParams: _objectSpread({}, widgetParams, {\n            precision: precision\n          }),\n          start: start,\n          instantSearchInstance: instantSearchInstance\n        }, false);\n      },\n      dispose: function dispose(_ref13) {\n        var state = _ref13.state;\n        unmountFn();\n        var nextState = state.removeNumericRefinement(attribute).removeDisjunctiveFacet(attribute);\n        return nextState;\n      },\n      getWidgetState: function getWidgetState(uiState, _ref14) {\n        var searchParameters = _ref14.searchParameters;\n\n        var _searchParameters$get = searchParameters.getNumericRefinements(attribute),\n            _searchParameters$get2 = _searchParameters$get['>='],\n            min = _searchParameters$get2 === void 0 ? '' : _searchParameters$get2,\n            _searchParameters$get3 = _searchParameters$get['<='],\n            max = _searchParameters$get3 === void 0 ? '' : _searchParameters$get3;\n\n        if (min === '' && max === '' || uiState && uiState.range && uiState.range[attribute] === \"\".concat(min, \":\").concat(max)) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          range: _objectSpread({}, uiState.range, _defineProperty({}, attribute, \"\".concat(min, \":\").concat(max)))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref15) {\n        var uiState = _ref15.uiState;\n        var value = uiState && uiState.range && uiState.range[attribute];\n\n        if (!value || value.indexOf(':') === -1) {\n          return searchParameters;\n        }\n\n        var _searchParameters$get4 = searchParameters.getNumericRefinements(attribute),\n            _searchParameters$get5 = _searchParameters$get4['>='],\n            previousMin = _searchParameters$get5 === void 0 ? [NaN] : _searchParameters$get5,\n            _searchParameters$get6 = _searchParameters$get4['<='],\n            previousMax = _searchParameters$get6 === void 0 ? [NaN] : _searchParameters$get6;\n\n        var clearedParams = searchParameters.clearRefinements(attribute);\n\n        var _value$split$map = value.split(':').map(parseFloat),\n            _value$split$map2 = _slicedToArray(_value$split$map, 2),\n            lowerBound = _value$split$map2[0],\n            upperBound = _value$split$map2[1];\n\n        if (previousMin.includes(lowerBound) && previousMax.includes(upperBound)) {\n          return searchParameters;\n        }\n\n        if (isFiniteNumber(lowerBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attribute, '>=', lowerBound);\n        }\n\n        if (isFiniteNumber(upperBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attribute, '<=', upperBound);\n        }\n\n        return clearedParams;\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { checkRendering, createDocumentationMessageGenerator, isEqual, noop } from '../../lib/utils';\nimport { escapeFacets, TAG_PLACEHOLDER, TAG_REPLACEMENT } from '../../lib/escape-highlight';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list',\n  connector: true\n});\n/**\n * @typedef {Object} RefinementListItem\n * @property {string} value The value of the refinement list item.\n * @property {string} label Human-readable value of the refinement list item.\n * @property {number} count Number of matched results after refinement is applied.\n * @property {boolean} isRefined Indicates if the list item is refined.\n */\n\n/**\n * @typedef {Object} CustomRefinementListWidgetOptions\n * @property {string} attribute The name of the attribute in the records.\n * @property {\"and\"|\"or\"} [operator = 'or'] How the filters are combined together.\n * @property {number} [limit = 10] The max number of items to display when\n * `showMoreLimit` is not set or if the widget is showing less value.\n * @property {boolean} [showMore = false] Whether to display a button that expands the number of items.\n * @property {number} [showMoreLimit = 20] The max number of items to display if the widget\n * is showing more items.\n * @property {string[]|function} [sortBy = ['isRefined', 'count:desc', 'name:asc']] How to sort refinements. Possible values: `count|isRefined|name:asc|name:desc`.\n * @property {boolean} [escapeFacetValues = true] Escapes the content of the facet values.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} RefinementListRenderingOptions\n * @property {RefinementListItem[]} items The list of filtering values returned from Algolia API.\n * @property {function(item.value): string} createURL Creates the next state url for a selected refinement.\n * @property {function(item.value)} refine Action to apply selected refinements.\n * @property {function} searchForItems Searches for values inside the list.\n * @property {boolean} isFromSearch `true` if the values are from an index search.\n * @property {boolean} canRefine `true` if a refinement can be applied.\n * @property {boolean} canToggleShowMore `true` if the toggleShowMore button can be activated (enough items to display more or\n * already displaying more than `limit` items)\n * @property {Object} widgetParams All original `CustomRefinementListWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isShowingMore True if the menu is displaying all the menu items.\n * @property {function} toggleShowMore Toggles the number of values displayed between `limit` and `showMoreLimit`.\n */\n\n/**\n * **RefinementList** connector provides the logic to build a custom widget that will let the\n * user filter the results based on the values of a specific facet.\n *\n * This connector provides a `toggleShowMore()` function to display more or less items and a `refine()`\n * function to select an item.\n * @type {Connector}\n * @param {function(RefinementListRenderingOptions, boolean)} renderFn Rendering function for the custom **RefinementList** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomRefinementListWidgetOptions)} Re-usable widget factory for a custom **RefinementList** widget.\n * @example\n * // custom `renderFn` to render the custom RefinementList widget\n * function renderFn(RefinementListRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .html('<ul></ul>')\n *   }\n *\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .find('li[data-refine-value]')\n *       .each(function() { $(this).off('click'); });\n *\n *   if (RefinementListRenderingOptions.canRefine) {\n *     var list = RefinementListRenderingOptions.items.map(function(item) {\n *       return `\n *         <li data-refine-value=\"${item.value}\">\n *           <input type=\"checkbox\" value=\"${item.value}\" ${item.isRefined ? 'checked' : ''} />\n *           <a href=\"${RefinementListRenderingOptions.createURL(item.value)}\">\n *             ${item.label} (${item.count})\n *           </a>\n *         </li>\n *       `;\n *     });\n *\n *     RefinementListRenderingOptions.widgetParams.containerNode.find('ul').html(list);\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .find('li[data-refine-value]')\n *       .each(function() {\n *         $(this).on('click', function(event) {\n *           event.stopPropagation();\n *           event.preventDefault();\n *\n *           RefinementListRenderingOptions.refine($(this).data('refine-value'));\n *         });\n *       });\n *   } else {\n *     RefinementListRenderingOptions.widgetParams.containerNode.find('ul').html('');\n *   }\n * }\n *\n * // connect `renderFn` to RefinementList logic\n * var customRefinementList = instantsearch.connectors.connectRefinementList(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customRefinementList({\n *     containerNode: $('#custom-refinement-list-container'),\n *     attribute: 'categories',\n *     limit: 10,\n *   })\n * );\n */\n\nexport default function connectRefinementList(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        _widgetParams$operato = widgetParams.operator,\n        operator = _widgetParams$operato === void 0 ? 'or' : _widgetParams$operato,\n        _widgetParams$limit = widgetParams.limit,\n        limit = _widgetParams$limit === void 0 ? 10 : _widgetParams$limit,\n        _widgetParams$showMor = widgetParams.showMore,\n        showMore = _widgetParams$showMor === void 0 ? false : _widgetParams$showMor,\n        _widgetParams$showMor2 = widgetParams.showMoreLimit,\n        showMoreLimit = _widgetParams$showMor2 === void 0 ? 20 : _widgetParams$showMor2,\n        _widgetParams$sortBy = widgetParams.sortBy,\n        sortBy = _widgetParams$sortBy === void 0 ? ['isRefined', 'count:desc', 'name:asc'] : _widgetParams$sortBy,\n        _widgetParams$escapeF = widgetParams.escapeFacetValues,\n        escapeFacetValues = _widgetParams$escapeF === void 0 ? true : _widgetParams$escapeF,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (!/^(and|or)$/.test(operator)) {\n      throw new Error(withUsage(\"The `operator` must one of: `\\\"and\\\"`, `\\\"or\\\"` (got \\\"\".concat(operator, \"\\\").\")));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('`showMoreLimit` should be greater than `limit`.'));\n    }\n\n    var formatItems = function formatItems(_ref) {\n      var label = _ref.name,\n          item = _objectWithoutProperties(_ref, [\"name\"]);\n\n      return _objectSpread({}, item, {\n        label: label,\n        value: label,\n        highlighted: label\n      });\n    };\n\n    var _getLimit = function getLimit(isShowingMore) {\n      return isShowingMore ? showMoreLimit : limit;\n    };\n\n    var lastResultsFromMainSearch = [];\n    var hasExhaustiveItems = true;\n    var searchForFacetValues;\n    var triggerRefine;\n\n    var _render = function render(_ref2) {\n      var items = _ref2.items,\n          state = _ref2.state,\n          createURL = _ref2.createURL,\n          helperSpecializedSearchFacetValues = _ref2.helperSpecializedSearchFacetValues,\n          refine = _ref2.refine,\n          isFromSearch = _ref2.isFromSearch,\n          isFirstSearch = _ref2.isFirstSearch,\n          isShowingMore = _ref2.isShowingMore,\n          toggleShowMore = _ref2.toggleShowMore,\n          instantSearchInstance = _ref2.instantSearchInstance;\n\n      // Compute a specific createURL method able to link to any facet value state change\n      var _createURL = function _createURL(facetValue) {\n        return createURL(state.toggleRefinement(attribute, facetValue));\n      }; // Do not mistake searchForFacetValues and searchFacetValues which is the actual search\n      // function\n\n\n      var searchFacetValues = helperSpecializedSearchFacetValues && helperSpecializedSearchFacetValues(state, createURL, helperSpecializedSearchFacetValues, refine, instantSearchInstance, isShowingMore);\n      var canShowLess = isShowingMore && lastResultsFromMainSearch.length > limit;\n      var canShowMore = showMore && !isFromSearch && !hasExhaustiveItems;\n      var canToggleShowMore = canShowLess || canShowMore;\n      renderFn({\n        createURL: _createURL,\n        items: items,\n        refine: refine,\n        searchForItems: searchFacetValues,\n        instantSearchInstance: instantSearchInstance,\n        isFromSearch: isFromSearch,\n        canRefine: isFromSearch || items.length > 0,\n        widgetParams: widgetParams,\n        isShowingMore: isShowingMore,\n        canToggleShowMore: canToggleShowMore,\n        toggleShowMore: toggleShowMore,\n        hasExhaustiveItems: hasExhaustiveItems\n      }, isFirstSearch);\n    };\n    /* eslint-disable max-params */\n\n\n    var createSearchForFacetValues = function createSearchForFacetValues(helper, toggleShowMore) {\n      return function (state, createURL, helperSpecializedSearchFacetValues, toggleRefinement, instantSearchInstance, isShowingMore) {\n        return function (query) {\n          if (query === '' && lastResultsFromMainSearch) {\n            // render with previous data from the helper.\n            _render({\n              items: lastResultsFromMainSearch,\n              state: state,\n              createURL: createURL,\n              helperSpecializedSearchFacetValues: helperSpecializedSearchFacetValues,\n              refine: toggleRefinement,\n              isFromSearch: false,\n              isFirstSearch: false,\n              instantSearchInstance: instantSearchInstance,\n              toggleShowMore: toggleShowMore,\n              // and yet it will be\n              isShowingMore: isShowingMore // so we need to restore in the state of show more as well\n\n            });\n          } else {\n            var tags = {\n              highlightPreTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPreTag : TAG_REPLACEMENT.highlightPreTag,\n              highlightPostTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPostTag : TAG_REPLACEMENT.highlightPostTag\n            };\n            helper.searchForFacetValues(attribute, query, _getLimit(isShowingMore), tags).then(function (results) {\n              var facetValues = escapeFacetValues ? escapeFacets(results.facetHits) : results.facetHits;\n              var normalizedFacetValues = transformItems(facetValues.map(function (_ref3) {\n                var value = _ref3.value,\n                    item = _objectWithoutProperties(_ref3, [\"value\"]);\n\n                return _objectSpread({}, item, {\n                  value: value,\n                  label: value\n                });\n              }));\n\n              _render({\n                items: normalizedFacetValues,\n                state: state,\n                createURL: createURL,\n                helperSpecializedSearchFacetValues: helperSpecializedSearchFacetValues,\n                refine: toggleRefinement,\n                isFromSearch: true,\n                isFirstSearch: false,\n                instantSearchInstance: instantSearchInstance,\n                isShowingMore: isShowingMore\n              });\n            });\n          }\n        };\n      };\n    };\n    /* eslint-enable max-params */\n\n\n    return {\n      isShowingMore: false,\n      // Provide the same function to the `renderFn` so that way the user\n      // has to only bind it once when `isFirstRendering` for instance\n      toggleShowMore: function toggleShowMore() {},\n      cachedToggleShowMore: function cachedToggleShowMore() {\n        this.toggleShowMore();\n      },\n      createToggleShowMore: function createToggleShowMore(renderOptions) {\n        var _this = this;\n\n        return function () {\n          _this.isShowingMore = !_this.isShowingMore;\n\n          _this.render(renderOptions);\n        };\n      },\n      getLimit: function getLimit() {\n        return _getLimit(this.isShowingMore);\n      },\n      getConfiguration: function getConfiguration() {\n        var configuration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var widgetConfiguration = _defineProperty({}, operator === 'and' ? 'facets' : 'disjunctiveFacets', [attribute]);\n\n        var currentMaxValuesPerFacet = configuration.maxValuesPerFacet || 0;\n        widgetConfiguration.maxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        return widgetConfiguration;\n      },\n      init: function init(_ref4) {\n        var helper = _ref4.helper,\n            createURL = _ref4.createURL,\n            instantSearchInstance = _ref4.instantSearchInstance;\n        this.cachedToggleShowMore = this.cachedToggleShowMore.bind(this);\n\n        triggerRefine = function triggerRefine(facetValue) {\n          return helper.toggleRefinement(attribute, facetValue).search();\n        };\n\n        searchForFacetValues = createSearchForFacetValues(helper, this.cachedToggleShowMore);\n\n        _render({\n          items: [],\n          state: helper.state,\n          createURL: createURL,\n          helperSpecializedSearchFacetValues: searchForFacetValues,\n          refine: triggerRefine,\n          isFromSearch: false,\n          isFirstSearch: true,\n          instantSearchInstance: instantSearchInstance,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore\n        });\n      },\n      render: function render(renderOptions) {\n        var results = renderOptions.results,\n            state = renderOptions.state,\n            createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance;\n        var facetValues = results.getFacetValues(attribute, {\n          sortBy: sortBy\n        });\n        var items = transformItems(facetValues.slice(0, this.getLimit()).map(formatItems));\n        var maxValuesPerFacetConfig = state.getQueryParameter('maxValuesPerFacet');\n        var currentLimit = this.getLimit(); // If the limit is the max number of facet retrieved it is impossible to know\n        // if the facets are exhaustive. The only moment we are sure it is exhaustive\n        // is when it is strictly under the number requested unless we know that another\n        // widget has requested more values (maxValuesPerFacet > getLimit()).\n        // Because this is used for making the search of facets unable or not, it is important\n        // to be conservative here.\n\n        hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n        lastResultsFromMainSearch = items;\n        this.toggleShowMore = this.createToggleShowMore(renderOptions);\n\n        _render({\n          items: items,\n          state: state,\n          createURL: createURL,\n          helperSpecializedSearchFacetValues: searchForFacetValues,\n          refine: triggerRefine,\n          isFromSearch: false,\n          isFirstSearch: false,\n          instantSearchInstance: instantSearchInstance,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore\n        });\n      },\n      dispose: function dispose(_ref5) {\n        var state = _ref5.state;\n        unmountFn();\n\n        if (operator === 'and') {\n          return state.removeFacetRefinement(attribute).removeFacet(attribute);\n        } else {\n          return state.removeDisjunctiveFacetRefinement(attribute).removeDisjunctiveFacet(attribute);\n        }\n      },\n      getWidgetState: function getWidgetState(uiState, _ref6) {\n        var searchParameters = _ref6.searchParameters;\n        var values = operator === 'or' ? searchParameters.getDisjunctiveRefinements(attribute) : searchParameters.getConjunctiveRefinements(attribute);\n\n        if (values.length === 0 || uiState.refinementList && isEqual(values, uiState.refinementList[attribute])) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          refinementList: _objectSpread({}, uiState.refinementList, _defineProperty({}, attribute, values))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref7) {\n        var uiState = _ref7.uiState;\n        var values = uiState.refinementList && uiState.refinementList[attribute];\n        if (values === undefined) return searchParameters;\n        return values.reduce(function (sp, v) {\n          return operator === 'or' ? sp.addDisjunctiveFacetRefinement(attribute, v) : sp.addFacetRefinement(attribute, v);\n        }, searchParameters.clearRefinements(attribute));\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'search-box',\n  connector: true\n});\n/**\n * @typedef {Object} CustomSearchBoxWidgetOptions\n * @property {function(string, function(string))} [queryHook = undefined] A function that will be called every time\n * a new value for the query is set. The first parameter is the query and the second is a\n * function to actually trigger the search. The function takes the query as the parameter.\n *\n * This queryHook can be used to debounce the number of searches done from the searchBox.\n */\n\n/**\n * @typedef {Object} SearchBoxRenderingOptions\n * @property {string} query The query from the last search.\n * @property {function(string)} refine Sets a new query and searches.\n * @property {function()} clear Remove the query and perform search.\n * @property {Object} widgetParams All original `CustomSearchBoxWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isSearchStalled `true` if the search results takes more than a certain time to come back\n * from Algolia servers. This can be configured on the InstantSearch constructor with the attribute\n * `stalledSearchDelay` which is 200ms, by default.\n */\n\n/**\n * **SearchBox** connector provides the logic to build a widget that will let the user search for a query.\n *\n * The connector provides to the rendering: `refine()` to set the query. The behaviour of this function\n * may be impacted by the `queryHook` widget parameter.\n * @type {Connector}\n * @param {function(SearchBoxRenderingOptions, boolean)} renderFn Rendering function for the custom **SearchBox** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomSearchBoxWidgetOptions)} Re-usable widget factory for a custom **SearchBox** widget.\n * @example\n * // custom `renderFn` to render the custom SearchBox widget\n * function renderFn(SearchBoxRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     SearchBoxRenderingOptions.widgetParams.containerNode.html('<input type=\"text\" />');\n *     SearchBoxRenderingOptions.widgetParams.containerNode\n *       .find('input')\n *       .on('keyup', function() {\n *         SearchBoxRenderingOptions.refine($(this).val());\n *       });\n *     SearchBoxRenderingOptions.widgetParams.containerNode\n *       .find('input')\n *       .val(SearchBoxRenderingOptions.query);\n *   }\n * }\n *\n * // connect `renderFn` to SearchBox logic\n * var customSearchBox = instantsearch.connectors.connectSearchBox(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customSearchBox({\n *     containerNode: $('#custom-searchbox'),\n *   })\n * );\n */\n\nexport default function connectSearchBox(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var queryHook = widgetParams.queryHook;\n\n    function clear(helper) {\n      return function () {\n        helper.setQuery('');\n        helper.search();\n      };\n    }\n\n    return {\n      _clear: function _clear() {},\n      _cachedClear: function _cachedClear() {\n        this._clear();\n      },\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            instantSearchInstance = _ref.instantSearchInstance;\n        this._cachedClear = this._cachedClear.bind(this);\n        this._clear = clear(helper);\n\n        this._refine = function () {\n          var previousQuery;\n\n          var setQueryAndSearch = function setQueryAndSearch(q) {\n            var doSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            if (q !== helper.state.query) {\n              previousQuery = helper.state.query;\n              helper.setQuery(q);\n            }\n\n            if (doSearch && previousQuery !== undefined && previousQuery !== q) helper.search();\n          };\n\n          return queryHook ? function (q) {\n            return queryHook(q, setQueryAndSearch);\n          } : setQueryAndSearch;\n        }();\n\n        renderFn({\n          query: helper.state.query,\n          refine: this._refine,\n          clear: this._cachedClear,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      render: function render(_ref2) {\n        var helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance,\n            searchMetadata = _ref2.searchMetadata;\n        this._clear = clear(helper);\n        renderFn({\n          query: helper.state.query,\n          refine: this._refine,\n          clear: this._cachedClear,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance,\n          isSearchStalled: searchMetadata.isSearchStalled\n        }, false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        return state.setQuery('');\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var query = searchParameters.query;\n\n        if (query === '' || uiState && uiState.query === query) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          query: query\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        return searchParameters.setQuery(uiState.query || '');\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, find, warning, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'sort-by',\n  connector: true\n});\n/**\n * @typedef {Object} SortByItem\n * @property {string} value The name of the index to target.\n * @property {string} label The label of the index to display.\n */\n\n/**\n * @typedef {Object} CustomSortByWidgetOptions\n * @property {SortByItem[]} items Array of objects defining the different indices to choose from.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} SortByRenderingOptions\n * @property {string} currentRefinement The currently selected index.\n * @property {SortByItem[]} options All the available indices\n * @property {function(string)} refine Switches indices and triggers a new search.\n * @property {boolean} hasNoResults `true` if the last search contains no result.\n * @property {Object} widgetParams All original `CustomSortByWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * The **SortBy** connector provides the logic to build a custom widget that will display a\n * list of indices. With Algolia, this is most commonly used for changing ranking strategy. This allows\n * a user to change how the hits are being sorted.\n *\n * This connector provides the `refine` function that allows to switch indices.\n * The connector provides to the rendering: `refine()` to switch the current index and\n * `options` that are the values that can be selected. `refine` should be used\n * with `options.value`.\n * @type {Connector}\n * @param {function(SortByRenderingOptions, boolean)} renderFn Rendering function for the custom **SortBy** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomSortByWidgetOptions)} Re-usable widget factory for a custom **SortBy** widget.\n * @example\n * // custom `renderFn` to render the custom SortBy widget\n * function renderFn(SortByRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     SortByRenderingOptions.widgetParams.containerNode.html('<select></select>');\n *     SortByRenderingOptions.widgetParams.containerNode\n *       .find('select')\n *       .on('change', function(event) {\n *         SortByRenderingOptions.refine(event.target.value);\n *       });\n *   }\n *\n *   var optionsHTML = SortByRenderingOptions.options.map(function(option) {\n *     return `\n *       <option\n *         value=\"${option.value}\"\n *         ${SortByRenderingOptions.currentRefinement === option.value ? 'selected' : ''}\n *       >\n *         ${option.label}\n *       </option>\n *     `;\n *   });\n *\n *   SortByRenderingOptions.widgetParams.containerNode\n *     .find('select')\n *     .html(optionsHTML);\n * }\n *\n * // connect `renderFn` to SortBy logic\n * var customSortBy = instantsearch.connectors.connectSortBy(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customSortBy({\n *     containerNode: $('#custom-sort-by-container'),\n *     items: [\n *       { value: 'instant_search', label: 'Most relevant' },\n *       { value: 'instant_search_price_asc', label: 'Lowest price' },\n *       { value: 'instant_search_price_desc', label: 'Highest price' },\n *     ],\n *   })\n * );\n */\n\nexport default function connectSortBy(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var items = widgetParams.items,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (x) {\n      return x;\n    } : _widgetParams$transfo;\n\n    if (!Array.isArray(items)) {\n      throw new Error(withUsage('The `items` option expects an array of objects.'));\n    }\n\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            instantSearchInstance = _ref.instantSearchInstance;\n        var initialIndex = helper.state.index;\n        var isInitialIndexInItems = find(items, function (item) {\n          return item.value === initialIndex;\n        });\n        this.initialIndex = initialIndex;\n\n        this.setIndex = function (indexName) {\n          helper.setIndex(indexName).search();\n        };\n\n        warning(isInitialIndexInItems, \"The index named \\\"\".concat(initialIndex, \"\\\" is not listed in the `items` of `sortBy`.\"));\n        renderFn({\n          currentRefinement: initialIndex,\n          options: transformItems(items),\n          refine: this.setIndex,\n          hasNoResults: true,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      render: function render(_ref2) {\n        var helper = _ref2.helper,\n            results = _ref2.results,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        renderFn({\n          currentRefinement: helper.state.index,\n          options: transformItems(items),\n          refine: this.setIndex,\n          hasNoResults: results.nbHits === 0,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        return state.setIndex(this.initialIndex);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var currentIndex = searchParameters.getQueryParameter('index');\n        var isInitialIndex = currentIndex === this.initialIndex;\n\n        if (isInitialIndex || uiState && uiState.sortBy === currentIndex) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          sortBy: searchParameters.getQueryParameter('index')\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        return searchParameters.setQueryParameter('index', uiState.sortBy || this.initialIndex);\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'rating-menu',\n  connector: true\n});\n/**\n * @typedef {Object} StarRatingItems\n * @property {string} name Name corresponding to the number of stars.\n * @property {string} value Number of stars as string.\n * @property {number} count Count of matched results corresponding to the number of stars.\n * @property {boolean[]} stars Array of length of maximum rating value with stars to display or not.\n * @property {boolean} isRefined Indicates if star rating refinement is applied.\n */\n\n/**\n * @typedef {Object} CustomStarRatingWidgetOptions\n * @property {string} attribute Name of the attribute for faceting (eg. \"free_shipping\").\n * @property {number} [max = 5] The maximum rating value.\n */\n\n/**\n * @typedef {Object} StarRatingRenderingOptions\n * @property {StarRatingItems[]} items Possible star ratings the user can apply.\n * @property {function(string): string} createURL Creates an URL for the next\n * state (takes the item value as parameter). Takes the value of an item as parameter.\n * @property {function(string)} refine Selects a rating to filter the results\n * (takes the filter value as parameter). Takes the value of an item as parameter.\n * @property {boolean} hasNoResults `true` if the last search contains no result.\n * @property {Object} widgetParams All original `CustomStarRatingWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **StarRating** connector provides the logic to build a custom widget that will let\n * the user refine search results based on ratings.\n *\n * The connector provides to the rendering: `refine()` to select a value and\n * `items` that are the values that can be selected. `refine` should be used\n * with `items.value`.\n * @type {Connector}\n * @param {function(StarRatingRenderingOptions, boolean)} renderFn Rendering function for the custom **StarRating** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomStarRatingWidgetOptions)} Re-usable widget factory for a custom **StarRating** widget.\n * @example\n * // custom `renderFn` to render the custom StarRating widget\n * function renderFn(StarRatingRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     StarRatingRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   StarRatingRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var listHTML = StarRatingRenderingOptions.items.map(function(item) {\n *     return '<li data-refine-value=\"' + item.value + '\">' +\n *       '<a href=\"' + StarRatingRenderingOptions.createURL(item.value) + '\">' +\n *       item.stars.map(function(star) { return star === false ? '☆' : '★'; }).join(' ') +\n *       '& up (' + item.count + ')' +\n *       '</a></li>';\n *   });\n *\n *   StarRatingRenderingOptions.widgetParams.containerNode\n *     .find('ul')\n *     .html(listHTML);\n *\n *   StarRatingRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         event.stopPropagation();\n *\n *         StarRatingRenderingOptions.refine($(this).data('refine-value'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to StarRating logic\n * var customStarRating = instantsearch.connectors.connectRatingMenu(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customStarRating({\n *     containerNode: $('#custom-rating-menu-container'),\n *     attribute: 'rating',\n *     max: 5,\n *   })\n * );\n */\n\nexport default function connectRatingMenu(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        _widgetParams$max = widgetParams.max,\n        max = _widgetParams$max === void 0 ? 5 : _widgetParams$max;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    return {\n      getConfiguration: function getConfiguration() {\n        return {\n          disjunctiveFacets: [attribute]\n        };\n      },\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n        this._toggleRefinement = this._toggleRefinement.bind(this, helper);\n\n        this._createURL = function (state) {\n          return function (facetValue) {\n            return createURL(state.toggleRefinement(attribute, facetValue));\n          };\n        };\n\n        renderFn({\n          instantSearchInstance: instantSearchInstance,\n          items: [],\n          hasNoResults: true,\n          refine: this._toggleRefinement,\n          createURL: this._createURL(helper.state),\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref2) {\n        var helper = _ref2.helper,\n            results = _ref2.results,\n            state = _ref2.state,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        var facetValues = [];\n        var allValues = {};\n\n        for (var v = max; v >= 0; --v) {\n          allValues[v] = 0;\n        }\n\n        results.getFacetValues(attribute).forEach(function (facet) {\n          var val = Math.round(facet.name);\n\n          if (!val || val > max) {\n            return;\n          }\n\n          for (var _v = val; _v >= 1; --_v) {\n            allValues[_v] += facet.count;\n          }\n        });\n\n        var refinedStar = this._getRefinedStar(helper.state);\n\n        for (var star = max - 1; star >= 1; --star) {\n          var count = allValues[star];\n\n          if (refinedStar && star !== refinedStar && count === 0) {\n            // skip count==0 when at least 1 refinement is enabled\n            // eslint-disable-next-line no-continue\n            continue;\n          }\n\n          var stars = [];\n\n          for (var i = 1; i <= max; ++i) {\n            stars.push(i <= star);\n          }\n\n          facetValues.push({\n            stars: stars,\n            name: String(star),\n            value: String(star),\n            count: count,\n            isRefined: refinedStar === star\n          });\n        }\n\n        renderFn({\n          instantSearchInstance: instantSearchInstance,\n          items: facetValues,\n          hasNoResults: results.nbHits === 0,\n          refine: this._toggleRefinement,\n          createURL: this._createURL(state),\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        var nextState = state.removeDisjunctiveFacetRefinement(attribute).removeDisjunctiveFacet(attribute);\n        return nextState;\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n\n        var refinedStar = this._getRefinedStar(searchParameters);\n\n        if (refinedStar === undefined || uiState && uiState.ratingMenu && uiState.ratingMenu[attribute] === refinedStar) return uiState;\n        return _objectSpread({}, uiState, {\n          ratingMenu: _objectSpread({}, uiState.ratingMenu, _defineProperty({}, attribute, refinedStar))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        var starRatingFromURL = uiState.ratingMenu && uiState.ratingMenu[attribute];\n\n        var refinedStar = this._getRefinedStar(searchParameters);\n\n        if (starRatingFromURL === refinedStar) return searchParameters;\n        var clearedSearchParam = searchParameters.clearRefinements(attribute);\n\n        if (starRatingFromURL !== undefined) {\n          for (var val = Number(starRatingFromURL); val <= max; ++val) {\n            clearedSearchParam = clearedSearchParam.addDisjunctiveFacetRefinement(attribute, val);\n          }\n        }\n\n        return clearedSearchParam;\n      },\n      _toggleRefinement: function _toggleRefinement(helper, facetValue) {\n        var isRefined = this._getRefinedStar(helper.state) === Number(facetValue);\n        helper.clearRefinements(attribute);\n\n        if (!isRefined) {\n          for (var val = Number(facetValue); val <= max; ++val) {\n            helper.addDisjunctiveFacetRefinement(attribute, val);\n          }\n        }\n\n        helper.search();\n      },\n      _getRefinedStar: function _getRefinedStar(searchParameters) {\n        var refinedStar = undefined;\n        var refinements = searchParameters.getDisjunctiveRefinements(attribute);\n        refinements.forEach(function (r) {\n          if (!refinedStar || Number(r) < refinedStar) {\n            refinedStar = Number(r);\n          }\n        });\n        return refinedStar;\n      }\n    };\n  };\n}","import { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'stats',\n  connector: true\n});\n/**\n * @typedef {Object} StatsRenderingOptions\n * @property {number} hitsPerPage The maximum number of hits per page returned by Algolia.\n * @property {number} nbHits The number of hits in the result set.\n * @property {number} nbPages The number of pages computed for the result set.\n * @property {number} page The current page.\n * @property {number} processingTimeMS The time taken to compute the results inside the Algolia engine.\n * @property {string} query The query used for the current search.\n * @property {object} widgetParams All original `CustomStatsWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Stats** connector provides the logic to build a custom widget that will displays\n * search statistics (hits number and processing time).\n *\n * @type {Connector}\n * @param {function(StatsRenderingOptions, boolean)} renderFn Rendering function for the custom **Stats** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function} Re-usable widget factory for a custom **Stats** widget.\n * @example\n * // custom `renderFn` to render the custom Stats widget\n * function renderFn(StatsRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) return;\n *\n *   StatsRenderingOptions.widgetParams.containerNode\n *     .html(StatsRenderingOptions.nbHits + ' results found in ' + StatsRenderingOptions.processingTimeMS);\n * }\n *\n * // connect `renderFn` to Stats logic\n * var customStatsWidget = instantsearch.connectors.connectStats(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customStatsWidget({\n *     containerNode: $('#custom-stats-container'),\n *   })\n * );\n */\n\nexport default function connectStats(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            instantSearchInstance = _ref.instantSearchInstance;\n        renderFn({\n          instantSearchInstance: instantSearchInstance,\n          hitsPerPage: helper.state.hitsPerPage,\n          nbHits: 0,\n          nbPages: 0,\n          page: helper.state.page,\n          processingTimeMS: -1,\n          query: helper.state.query,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref2) {\n        var results = _ref2.results,\n            instantSearchInstance = _ref2.instantSearchInstance;\n        renderFn({\n          instantSearchInstance: instantSearchInstance,\n          hitsPerPage: results.hitsPerPage,\n          nbHits: results.nbHits,\n          nbPages: results.nbPages,\n          page: results.page,\n          processingTimeMS: results.processingTimeMS,\n          query: results.query,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, escapeRefinement, unescapeRefinement, createDocumentationMessageGenerator, find, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'toggle-refinement',\n  connector: true\n});\n/**\n * @typedef {Object} ToggleValue\n * @property {boolean} isRefined `true` if the toggle is on.\n * @property {number} count Number of results matched after applying the toggle refinement.\n * @property {Object} onFacetValue Value of the toggle when it's on.\n * @property {Object} offFacetValue Value of the toggle when it's off.\n */\n\n/**\n * @typedef {Object} CustomToggleWidgetOptions\n * @property {string} attribute Name of the attribute for faceting (eg. \"free_shipping\").\n * @property {Object} [on = true] Value to filter on when toggled.\n * @property {Object} [off] Value to filter on when not toggled.\n */\n\n/**\n * @typedef {Object} ToggleRenderingOptions\n * @property {ToggleValue} value The current toggle value.\n * @property {function():string} createURL Creates an URL for the next state.\n * @property {function(value)} refine Updates to the next state by applying the toggle refinement.\n * @property {Object} widgetParams All original `CustomToggleWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Toggle** connector provides the logic to build a custom widget that will provide\n * an on/off filtering feature based on an attribute value or values.\n *\n * Two modes are implemented in the custom widget:\n *  - with or without the value filtered\n *  - switch between two values.\n *\n * @type {Connector}\n * @param {function(ToggleRenderingOptions, boolean)} renderFn Rendering function for the custom **Toggle** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomToggleWidgetOptions)} Re-usable widget factory for a custom **Toggle** widget.\n * @example\n * // custom `renderFn` to render the custom ClearAll widget\n * function renderFn(ToggleRenderingOptions, isFirstRendering) {\n *   ToggleRenderingOptions.widgetParams.containerNode\n *     .find('a')\n *     .off('click');\n *\n *   var buttonHTML = `\n *     <a href=\"${ToggleRenderingOptions.createURL()}\">\n *       <input\n *         type=\"checkbox\"\n *         value=\"${ToggleRenderingOptions.value.name}\"\n *         ${ToggleRenderingOptions.value.isRefined ? 'checked' : ''}\n *       />\n *       ${ToggleRenderingOptions.value.name} (${ToggleRenderingOptions.value.count})\n *     </a>\n *   `;\n *\n *   ToggleRenderingOptions.widgetParams.containerNode.html(buttonHTML);\n *   ToggleRenderingOptions.widgetParams.containerNode\n *     .find('a')\n *     .on('click', function(event) {\n *       event.preventDefault();\n *       event.stopPropagation();\n *\n *       ToggleRenderingOptions.refine(ToggleRenderingOptions.value);\n *     });\n * }\n *\n * // connect `renderFn` to Toggle logic\n * var customToggle = instantsearch.connectors.connectToggleRefinement(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customToggle({\n *     containerNode: $('#custom-toggle-container'),\n *     attribute: 'free_shipping',\n *   })\n * );\n */\n\nexport default function connectToggleRefinement(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        _widgetParams$on = widgetParams.on,\n        userOn = _widgetParams$on === void 0 ? true : _widgetParams$on,\n        userOff = widgetParams.off;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    var hasAnOffValue = userOff !== undefined;\n    var hasAnOnValue = userOn !== undefined;\n    var on = hasAnOnValue ? escapeRefinement(userOn) : undefined;\n    var off = hasAnOffValue ? escapeRefinement(userOff) : undefined;\n    return {\n      getConfiguration: function getConfiguration() {\n        return {\n          disjunctiveFacets: [attribute]\n        };\n      },\n      _toggleRefinement: function _toggleRefinement(helper) {\n        var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n            isRefined = _ref.isRefined;\n\n        // Checking\n        if (!isRefined) {\n          if (hasAnOffValue) {\n            helper.removeDisjunctiveFacetRefinement(attribute, off);\n          }\n\n          helper.addDisjunctiveFacetRefinement(attribute, on);\n        } else {\n          // Unchecking\n          helper.removeDisjunctiveFacetRefinement(attribute, on);\n\n          if (hasAnOffValue) {\n            helper.addDisjunctiveFacetRefinement(attribute, off);\n          }\n        }\n\n        helper.search();\n      },\n      init: function init(_ref2) {\n        var _this = this;\n\n        var state = _ref2.state,\n            helper = _ref2.helper,\n            createURL = _ref2.createURL,\n            instantSearchInstance = _ref2.instantSearchInstance;\n\n        this._createURL = function (isCurrentlyRefined) {\n          return function () {\n            return createURL(state.removeDisjunctiveFacetRefinement(attribute, isCurrentlyRefined ? on : off).addDisjunctiveFacetRefinement(attribute, isCurrentlyRefined ? off : on));\n          };\n        };\n\n        this.toggleRefinement = function (opts) {\n          _this._toggleRefinement(helper, opts);\n        };\n\n        var isRefined = state.isDisjunctiveFacetRefined(attribute, on); // no need to refine anything at init if no custom off values\n\n        if (hasAnOffValue) {\n          // Add filtering on the 'off' value if set\n          if (!isRefined) {\n            var currentPage = helper.getPage();\n            helper.addDisjunctiveFacetRefinement(attribute, off).setPage(currentPage);\n          }\n        }\n\n        var onFacetValue = {\n          isRefined: isRefined,\n          count: 0\n        };\n        var offFacetValue = {\n          isRefined: hasAnOffValue && !isRefined,\n          count: 0\n        };\n        var value = {\n          name: attribute,\n          isRefined: isRefined,\n          count: null,\n          onFacetValue: onFacetValue,\n          offFacetValue: offFacetValue\n        };\n        renderFn({\n          value: value,\n          createURL: this._createURL(value.isRefined),\n          refine: this.toggleRefinement,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var helper = _ref3.helper,\n            results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        var isRefined = helper.state.isDisjunctiveFacetRefined(attribute, on);\n        var offValue = off === undefined ? false : off;\n        var allFacetValues = results.getFacetValues(attribute);\n        var onData = find(allFacetValues, function (_ref4) {\n          var name = _ref4.name;\n          return name === unescapeRefinement(on);\n        });\n        var onFacetValue = {\n          isRefined: onData !== undefined ? onData.isRefined : false,\n          count: onData === undefined ? null : onData.count\n        };\n        var offData = hasAnOffValue ? find(allFacetValues, function (_ref5) {\n          var name = _ref5.name;\n          return name === unescapeRefinement(offValue);\n        }) : undefined;\n        var offFacetValue = {\n          isRefined: offData !== undefined ? offData.isRefined : false,\n          count: offData === undefined ? allFacetValues.reduce(function (total, _ref6) {\n            var count = _ref6.count;\n            return total + count;\n          }, 0) : offData.count\n        }; // what will we show by default,\n        // if checkbox is not checked, show: [ ] free shipping (countWhenChecked)\n        // if checkbox is checked, show: [x] free shipping (countWhenNotChecked)\n\n        var nextRefinement = isRefined ? offFacetValue : onFacetValue;\n        var value = {\n          name: attribute,\n          isRefined: isRefined,\n          count: nextRefinement === undefined ? null : nextRefinement.count,\n          onFacetValue: onFacetValue,\n          offFacetValue: offFacetValue\n        };\n        renderFn({\n          value: value,\n          state: state,\n          createURL: this._createURL(value.isRefined),\n          refine: this.toggleRefinement,\n          helper: helper,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref7) {\n        var state = _ref7.state;\n        unmountFn();\n        var nextState = state.removeDisjunctiveFacetRefinement(attribute).removeDisjunctiveFacet(attribute);\n        return nextState;\n      },\n      getWidgetState: function getWidgetState(uiState, _ref8) {\n        var searchParameters = _ref8.searchParameters;\n        var isRefined = searchParameters.isDisjunctiveFacetRefined(attribute, on);\n\n        if (!isRefined || uiState && uiState.toggle && uiState.toggle[attribute] === isRefined) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          toggle: _objectSpread({}, uiState.toggle, _defineProperty({}, attribute, isRefined))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref9) {\n        var uiState = _ref9.uiState;\n        var isRefined = Boolean(uiState.toggle && uiState.toggle[attribute]);\n\n        if (isRefined) {\n          if (hasAnOffValue) return searchParameters.removeDisjunctiveFacetRefinement(attribute, off).addDisjunctiveFacetRefinement(attribute, on);\n          return searchParameters.addDisjunctiveFacetRefinement(attribute, on);\n        }\n\n        if (hasAnOffValue) return searchParameters.removeDisjunctiveFacetRefinement(attribute, on).addDisjunctiveFacetRefinement(attribute, off);\n        return searchParameters.removeDisjunctiveFacetRefinement(attribute, on);\n      }\n    };\n  };\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { checkRendering, warning, createDocumentationMessageGenerator, isEqual, find, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'breadcrumb',\n  connector: true\n});\n/**\n * @typedef {Object} BreadcrumbItem\n * @property {string} label Label of the category or subcategory.\n * @property {string} value Value of breadcrumb item.\n */\n\n/**\n * @typedef {Object} CustomBreadcrumbWidgetOptions\n * @property {string[]} attributes Attributes to use to generate the hierarchy of the breadcrumb.\n * @property {string} [rootPath = null] Prefix path to use if the first level is not the root level.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n *\n * You can also use a sort function that behaves like the standard Javascript [compareFunction](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Syntax).\n */\n\n/**\n * @typedef {Object} BreadcrumbRenderingOptions\n * @property {function(item.value): string} createURL Creates an url for the next state for a clicked item. The special value `null` is used for the `Home` (or root) item of the breadcrumb and will return an empty array.\n * @property {BreadcrumbItem[]} items Values to be rendered.\n * @property {function(item.value)} refine Sets the path of the hierarchical filter and triggers a new search.\n * @property {Object} widgetParams All original `CustomBreadcrumbWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Breadcrumb** connector provides the logic to build a custom widget\n * that will give the user the ability to see the current path in a hierarchical facet.\n *\n * This is commonly used in websites that have a large amount of content organized in a hierarchical manner (usually e-commerce websites).\n * @type {Connector}\n * @param {function(BreadcrumbRenderingOptions, boolean)} renderFn Rendering function for the custom **Breadcrumb* widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomBreadcrumbWidgetOptions)} Re-usable widget factory for a custom **Breadcrumb** widget.\n */\n\nexport default function connectBreadcrumb(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attributes = widgetParams.attributes,\n        _widgetParams$separat = widgetParams.separator,\n        separator = _widgetParams$separat === void 0 ? ' > ' : _widgetParams$separat,\n        _widgetParams$rootPat = widgetParams.rootPath,\n        rootPath = _widgetParams$rootPat === void 0 ? null : _widgetParams$rootPat,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attributes || !Array.isArray(attributes) || attributes.length === 0) {\n      throw new Error(withUsage('The `attributes` option expects an array of strings.'));\n    }\n\n    var _attributes = _slicedToArray(attributes, 1),\n        hierarchicalFacetName = _attributes[0];\n\n    return {\n      getConfiguration: function getConfiguration(currentConfiguration) {\n        if (currentConfiguration.hierarchicalFacets) {\n          var isFacetSet = find(currentConfiguration.hierarchicalFacets, function (_ref) {\n            var name = _ref.name;\n            return name === hierarchicalFacetName;\n          });\n\n          if (isFacetSet) {\n            warning(isEqual(isFacetSet.attributes, attributes) && isFacetSet.separator === separator && isFacetSet.rootPath === rootPath, 'Using Breadcrumb and HierarchicalMenu on the same facet with different options overrides the configuration of the HierarchicalMenu.');\n            return {};\n          }\n        }\n\n        return {\n          hierarchicalFacets: [{\n            attributes: attributes,\n            name: hierarchicalFacetName,\n            separator: separator,\n            rootPath: rootPath\n          }]\n        };\n      },\n      init: function init(_ref2) {\n        var createURL = _ref2.createURL,\n            helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance;\n\n        this._createURL = function (facetValue) {\n          if (!facetValue) {\n            var breadcrumb = helper.getHierarchicalFacetBreadcrumb(hierarchicalFacetName);\n\n            if (breadcrumb.length > 0) {\n              return createURL(helper.state.toggleRefinement(hierarchicalFacetName, breadcrumb[0]));\n            }\n          }\n\n          return createURL(helper.state.toggleRefinement(hierarchicalFacetName, facetValue));\n        };\n\n        this._refine = function (facetValue) {\n          if (!facetValue) {\n            var breadcrumb = helper.getHierarchicalFacetBreadcrumb(hierarchicalFacetName);\n\n            if (breadcrumb.length > 0) {\n              helper.toggleRefinement(hierarchicalFacetName, breadcrumb[0]).search();\n            }\n          } else {\n            helper.toggleRefinement(hierarchicalFacetName, facetValue).search();\n          }\n        };\n\n        renderFn({\n          createURL: this._createURL,\n          canRefine: false,\n          instantSearchInstance: instantSearchInstance,\n          items: [],\n          refine: this._refine,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var instantSearchInstance = _ref3.instantSearchInstance,\n            results = _ref3.results,\n            state = _ref3.state;\n\n        var _state$hierarchicalFa = _slicedToArray(state.hierarchicalFacets, 1),\n            facetName = _state$hierarchicalFa[0].name;\n\n        var facetValues = results.getFacetValues(facetName);\n        var data = Array.isArray(facetValues.data) ? facetValues.data : [];\n        var items = transformItems(shiftItemsValues(prepareItems(data)));\n        renderFn({\n          canRefine: items.length > 0,\n          createURL: this._createURL,\n          instantSearchInstance: instantSearchInstance,\n          items: items,\n          refine: this._refine,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      }\n    };\n  };\n}\n\nfunction prepareItems(data) {\n  return data.reduce(function (result, currentItem) {\n    if (currentItem.isRefined) {\n      result.push({\n        label: currentItem.name,\n        value: currentItem.path\n      });\n\n      if (Array.isArray(currentItem.data)) {\n        result = result.concat(prepareItems(currentItem.data));\n      }\n    }\n\n    return result;\n  }, []);\n}\n\nfunction shiftItemsValues(array) {\n  return array.map(function (x, idx) {\n    return {\n      label: x.label,\n      value: idx + 1 === array.length ? null : array[idx + 1].value\n    };\n  });\n}","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var baseForOwn = require('./_baseForOwn'),\n    castFunction = require('./_castFunction');\n\n/**\n * Iterates over own enumerable string keyed properties of an object and\n * invokes `iteratee` for each property. The iteratee is invoked with three\n * arguments: (value, key, object). Iteratee functions may exit iteration\n * early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwnRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forOwn(object, iteratee) {\n  return object && baseForOwn(object, castFunction(iteratee));\n}\n\nmodule.exports = forOwn;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n\n    return result;\n  }\n\n  if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n\n    return result;\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseIndexOf = require('./_baseIndexOf'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Gets the index at which the first occurrence of `value` is found in `array`\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. If `fromIndex` is negative, it's used as the\n * offset from the end of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.indexOf([1, 2, 1, 2], 2);\n * // => 1\n *\n * // Search from the `fromIndex`.\n * _.indexOf([1, 2, 1, 2], 2, 2);\n * // => 3\n */\nfunction indexOf(array, value, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseIndexOf(array, value, index);\n}\n\nmodule.exports = indexOf;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","var isNumber = require('./isNumber');\n\n/**\n * Checks if `value` is `NaN`.\n *\n * **Note:** This method is based on\n * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n * `undefined` and other non-number values.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n * @example\n *\n * _.isNaN(NaN);\n * // => true\n *\n * _.isNaN(new Number(NaN));\n * // => true\n *\n * isNaN(undefined);\n * // => true\n *\n * _.isNaN(undefined);\n * // => false\n */\nfunction isNaN(value) {\n  // An `NaN` primitive is the only value that is not equal to itself.\n  // Perform the `toStringTag` check first to avoid errors with some\n  // ActiveX objects in IE.\n  return isNumber(value) && value != +value;\n}\n\nmodule.exports = isNaN;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the last unmatched string symbol.\n */\nfunction charsEndIndex(strSymbols, chrSymbols) {\n  var index = strSymbols.length;\n\n  while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nmodule.exports = charsEndIndex;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the first unmatched string symbol.\n */\nfunction charsStartIndex(strSymbols, chrSymbols) {\n  var index = -1,\n      length = strSymbols.length;\n\n  while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nmodule.exports = charsStartIndex;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","var baseToString = require('./_baseToString'),\n    castSlice = require('./_castSlice'),\n    charsEndIndex = require('./_charsEndIndex'),\n    charsStartIndex = require('./_charsStartIndex'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/**\n * Removes leading and trailing whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trim('  abc  ');\n * // => 'abc'\n *\n * _.trim('-_-abc-_-', '_-');\n * // => 'abc'\n *\n * _.map(['  foo  ', '  bar  '], _.trim);\n * // => ['foo', 'bar']\n */\nfunction trim(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.replace(reTrim, '');\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      chrSymbols = stringToArray(chars),\n      start = charsStartIndex(strSymbols, chrSymbols),\n      end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n  return castSlice(strSymbols, start, end).join('');\n}\n\nmodule.exports = trim;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","'use strict';\n\nvar map = require('lodash/map');\nvar isNumber = require('lodash/isNumber');\nvar isString = require('lodash/isString');\nfunction valToNumber(v) {\n  if (isNumber(v)) {\n    return v;\n  } else if (isString(v)) {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return map(v, valToNumber);\n  }\n\n  throw new Error('The value should be a number, a parseable string or an array of those.');\n}\n\nmodule.exports = valToNumber;\n","'use strict';\n\nvar forEach = require('lodash/forEach');\nvar filter = require('lodash/filter');\nvar map = require('lodash/map');\nvar isEmpty = require('lodash/isEmpty');\nvar indexOf = require('lodash/indexOf');\n\nfunction filterState(state, filters) {\n  var partialState = {};\n  var attributeFilters = filter(filters, function(f) { return f.indexOf('attribute:') !== -1; });\n  var attributes = map(attributeFilters, function(aF) { return aF.split(':')[1]; });\n\n  if (indexOf(attributes, '*') === -1) {\n    forEach(attributes, function(attr) {\n      if (state.isConjunctiveFacet(attr) && state.isFacetRefined(attr)) {\n        if (!partialState.facetsRefinements) partialState.facetsRefinements = {};\n        partialState.facetsRefinements[attr] = state.facetsRefinements[attr];\n      }\n\n      if (state.isDisjunctiveFacet(attr) && state.isDisjunctiveFacetRefined(attr)) {\n        if (!partialState.disjunctiveFacetsRefinements) partialState.disjunctiveFacetsRefinements = {};\n        partialState.disjunctiveFacetsRefinements[attr] = state.disjunctiveFacetsRefinements[attr];\n      }\n\n      if (state.isHierarchicalFacet(attr) && state.isHierarchicalFacetRefined(attr)) {\n        if (!partialState.hierarchicalFacetsRefinements) partialState.hierarchicalFacetsRefinements = {};\n        partialState.hierarchicalFacetsRefinements[attr] = state.hierarchicalFacetsRefinements[attr];\n      }\n\n      var numericRefinements = state.getNumericRefinements(attr);\n      if (!isEmpty(numericRefinements)) {\n        if (!partialState.numericRefinements) partialState.numericRefinements = {};\n        partialState.numericRefinements[attr] = state.numericRefinements[attr];\n      }\n    });\n  } else {\n    if (!isEmpty(state.numericRefinements)) {\n      partialState.numericRefinements = state.numericRefinements;\n    }\n    if (!isEmpty(state.facetsRefinements)) partialState.facetsRefinements = state.facetsRefinements;\n    if (!isEmpty(state.disjunctiveFacetsRefinements)) {\n      partialState.disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements;\n    }\n    if (!isEmpty(state.hierarchicalFacetsRefinements)) {\n      partialState.hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements;\n    }\n  }\n\n  var searchParameters = filter(\n    filters,\n    function(f) {\n      return f.indexOf('attribute:') === -1;\n    }\n  );\n\n  forEach(\n    searchParameters,\n    function(parameterKey) {\n      partialState[parameterKey] = state[parameterKey];\n    }\n  );\n\n  return partialState;\n}\n\nmodule.exports = filterState;\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar isUndefined = require('lodash/isUndefined');\nvar isString = require('lodash/isString');\nvar isFunction = require('lodash/isFunction');\nvar isEmpty = require('lodash/isEmpty');\nvar defaults = require('lodash/defaults');\n\nvar reduce = require('lodash/reduce');\nvar filter = require('lodash/filter');\nvar omit = require('lodash/omit');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute] ?\n      [valueAsString] :\n      refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaults({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(refinementList, attribute, value) {\n    if (isUndefined(value)) {\n      return lib.clearRefinement(refinementList, attribute);\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function(v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {\n    if (isUndefined(value)) throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {\n    if (isUndefined(attribute)) {\n      if (isEmpty(refinementList)) return refinementList;\n      return {};\n    } else if (isString(attribute)) {\n      if (isEmpty(refinementList[attribute])) return refinementList;\n      return omit(refinementList, attribute);\n    } else if (isFunction(attribute)) {\n      var hasChanged = false;\n\n      var newRefinementList = reduce(refinementList, function(memo, values, key) {\n        var facetList = filter(values, function(value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (!isEmpty(facetList)) {\n          if (facetList.length !== values.length) hasChanged = true;\n          memo[key] = facetList;\n        }\n        else hasChanged = true;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean}\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var indexOf = require('lodash/indexOf');\n\n    var containsRefinements = !!refinementList[attribute] &&\n      refinementList[attribute].length > 0;\n\n    if (isUndefined(refinementValue) || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return indexOf(refinementList[attribute], refinementValueAsString) !== -1;\n  }\n};\n\nmodule.exports = lib;\n","'use strict';\n\nvar keys = require('lodash/keys');\nvar intersection = require('lodash/intersection');\nvar forOwn = require('lodash/forOwn');\nvar forEach = require('lodash/forEach');\nvar filter = require('lodash/filter');\nvar map = require('lodash/map');\nvar reduce = require('lodash/reduce');\nvar omit = require('lodash/omit');\nvar indexOf = require('lodash/indexOf');\nvar isNaN = require('lodash/isNaN');\nvar isEmpty = require('lodash/isEmpty');\nvar isEqual = require('lodash/isEqual');\nvar isUndefined = require('lodash/isUndefined');\nvar isString = require('lodash/isString');\nvar isFunction = require('lodash/isFunction');\nvar find = require('lodash/find');\nvar trim = require('lodash/trim');\n\nvar defaults = require('lodash/defaults');\nvar merge = require('lodash/merge');\n\nvar valToNumber = require('../functions/valToNumber');\n\nvar filterState = require('./filterState');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * like _.find but using _.isEqual to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into\n * @param {any} searchedValue the value we're looking for\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function(currentValue) {\n    return isEqual(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};\n\n  /**\n   * Targeted index. This parameter is mandatory.\n   * @member {string}\n   */\n  this.index = params.index || '';\n\n  // Query\n  /**\n   * Query string of the instant search. The empty string is a valid query.\n   * @member {string}\n   * @see https://www.algolia.com/doc/rest#param-query\n   */\n  this.query = params.query || '';\n\n  // Facets\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};\n\n  /**\n   * Contains the numeric filters in the raw format of the Algolia API. Setting\n   * this parameter is not compatible with the usage of numeric filters methods.\n   * @see https://www.algolia.com/doc/javascript#numericFilters\n   * @member {string}\n   */\n  this.numericFilters = params.numericFilters;\n\n  /**\n   * Contains the tag filters in the raw format of the Algolia API. Setting this\n   * parameter is not compatible with the of the add/remove/toggle methods of the\n   * tag api.\n   * @see https://www.algolia.com/doc/rest#param-tagFilters\n   * @member {string}\n   */\n  this.tagFilters = params.tagFilters;\n\n  /**\n   * Contains the optional tag filters in the raw format of the Algolia API.\n   * @see https://www.algolia.com/doc/rest#param-tagFilters\n   * @member {string}\n   */\n  this.optionalTagFilters = params.optionalTagFilters;\n\n  /**\n   * Contains the optional facet filters in the raw format of the Algolia API.\n   * @see https://www.algolia.com/doc/rest#param-tagFilters\n   * @member {string}\n   */\n  this.optionalFacetFilters = params.optionalFacetFilters;\n\n\n  // Misc. parameters\n  /**\n   * Number of hits to be returned by the search API\n   * @member {number}\n   * @see https://www.algolia.com/doc/rest#param-hitsPerPage\n   */\n  this.hitsPerPage = params.hitsPerPage;\n  /**\n   * Number of values for each faceted attribute\n   * @member {number}\n   * @see https://www.algolia.com/doc/rest#param-maxValuesPerFacet\n   */\n  this.maxValuesPerFacet = params.maxValuesPerFacet;\n  /**\n   * The current page number\n   * @member {number}\n   * @see https://www.algolia.com/doc/rest#param-page\n   */\n  this.page = params.page || 0;\n  /**\n   * How the query should be treated by the search engine.\n   * Possible values: prefixAll, prefixLast, prefixNone\n   * @see https://www.algolia.com/doc/rest#param-queryType\n   * @member {string}\n   */\n  this.queryType = params.queryType;\n  /**\n   * How the typo tolerance behave in the search engine.\n   * Possible values: true, false, min, strict\n   * @see https://www.algolia.com/doc/rest#param-typoTolerance\n   * @member {string}\n   */\n  this.typoTolerance = params.typoTolerance;\n\n  /**\n   * Number of characters to wait before doing one character replacement.\n   * @see https://www.algolia.com/doc/rest#param-minWordSizefor1Typo\n   * @member {number}\n   */\n  this.minWordSizefor1Typo = params.minWordSizefor1Typo;\n  /**\n   * Number of characters to wait before doing a second character replacement.\n   * @see https://www.algolia.com/doc/rest#param-minWordSizefor2Typos\n   * @member {number}\n   */\n  this.minWordSizefor2Typos = params.minWordSizefor2Typos;\n  /**\n   * Configure the precision of the proximity ranking criterion\n   * @see https://www.algolia.com/doc/rest#param-minProximity\n   */\n  this.minProximity = params.minProximity;\n  /**\n   * Should the engine allow typos on numerics.\n   * @see https://www.algolia.com/doc/rest#param-allowTyposOnNumericTokens\n   * @member {boolean}\n   */\n  this.allowTyposOnNumericTokens = params.allowTyposOnNumericTokens;\n  /**\n   * Should the plurals be ignored\n   * @see https://www.algolia.com/doc/rest#param-ignorePlurals\n   * @member {boolean}\n   */\n  this.ignorePlurals = params.ignorePlurals;\n  /**\n   * Restrict which attribute is searched.\n   * @see https://www.algolia.com/doc/rest#param-restrictSearchableAttributes\n   * @member {string}\n   */\n  this.restrictSearchableAttributes = params.restrictSearchableAttributes;\n  /**\n   * Enable the advanced syntax.\n   * @see https://www.algolia.com/doc/rest#param-advancedSyntax\n   * @member {boolean}\n   */\n  this.advancedSyntax = params.advancedSyntax;\n  /**\n   * Enable the analytics\n   * @see https://www.algolia.com/doc/rest#param-analytics\n   * @member {boolean}\n   */\n  this.analytics = params.analytics;\n  /**\n   * Tag of the query in the analytics.\n   * @see https://www.algolia.com/doc/rest#param-analyticsTags\n   * @member {string}\n   */\n  this.analyticsTags = params.analyticsTags;\n  /**\n   * Enable the synonyms\n   * @see https://www.algolia.com/doc/rest#param-synonyms\n   * @member {boolean}\n   */\n  this.synonyms = params.synonyms;\n  /**\n   * Should the engine replace the synonyms in the highlighted results.\n   * @see https://www.algolia.com/doc/rest#param-replaceSynonymsInHighlight\n   * @member {boolean}\n   */\n  this.replaceSynonymsInHighlight = params.replaceSynonymsInHighlight;\n  /**\n   * Add some optional words to those defined in the dashboard\n   * @see https://www.algolia.com/doc/rest#param-optionalWords\n   * @member {string}\n   */\n  this.optionalWords = params.optionalWords;\n  /**\n   * Possible values are \"lastWords\" \"firstWords\" \"allOptional\" \"none\" (default)\n   * @see https://www.algolia.com/doc/rest#param-removeWordsIfNoResults\n   * @member {string}\n   */\n  this.removeWordsIfNoResults = params.removeWordsIfNoResults;\n  /**\n   * List of attributes to retrieve\n   * @see https://www.algolia.com/doc/rest#param-attributesToRetrieve\n   * @member {string}\n   */\n  this.attributesToRetrieve = params.attributesToRetrieve;\n  /**\n   * List of attributes to highlight\n   * @see https://www.algolia.com/doc/rest#param-attributesToHighlight\n   * @member {string}\n   */\n  this.attributesToHighlight = params.attributesToHighlight;\n  /**\n   * Code to be embedded on the left part of the highlighted results\n   * @see https://www.algolia.com/doc/rest#param-highlightPreTag\n   * @member {string}\n   */\n  this.highlightPreTag = params.highlightPreTag;\n  /**\n   * Code to be embedded on the right part of the highlighted results\n   * @see https://www.algolia.com/doc/rest#param-highlightPostTag\n   * @member {string}\n   */\n  this.highlightPostTag = params.highlightPostTag;\n  /**\n   * List of attributes to snippet\n   * @see https://www.algolia.com/doc/rest#param-attributesToSnippet\n   * @member {string}\n   */\n  this.attributesToSnippet = params.attributesToSnippet;\n  /**\n   * Enable the ranking informations in the response, set to 1 to activate\n   * @see https://www.algolia.com/doc/rest#param-getRankingInfo\n   * @member {number}\n   */\n  this.getRankingInfo = params.getRankingInfo;\n  /**\n   * Remove duplicates based on the index setting attributeForDistinct\n   * @see https://www.algolia.com/doc/rest#param-distinct\n   * @member {boolean|number}\n   */\n  this.distinct = params.distinct;\n  /**\n   * Center of the geo search.\n   * @see https://www.algolia.com/doc/rest#param-aroundLatLng\n   * @member {string}\n   */\n  this.aroundLatLng = params.aroundLatLng;\n  /**\n   * Center of the search, retrieve from the user IP.\n   * @see https://www.algolia.com/doc/rest#param-aroundLatLngViaIP\n   * @member {boolean}\n   */\n  this.aroundLatLngViaIP = params.aroundLatLngViaIP;\n  /**\n   * Radius of the geo search.\n   * @see https://www.algolia.com/doc/rest#param-aroundRadius\n   * @member {number}\n   */\n  this.aroundRadius = params.aroundRadius;\n  /**\n   * Precision of the geo search.\n   * @see https://www.algolia.com/doc/rest#param-aroundPrecision\n   * @member {number}\n   */\n  this.minimumAroundRadius = params.minimumAroundRadius;\n  /**\n   * Precision of the geo search.\n   * @see https://www.algolia.com/doc/rest#param-minimumAroundRadius\n   * @member {number}\n   */\n  this.aroundPrecision = params.aroundPrecision;\n  /**\n   * Geo search inside a box.\n   * @see https://www.algolia.com/doc/rest#param-insideBoundingBox\n   * @member {string}\n   */\n  this.insideBoundingBox = params.insideBoundingBox;\n  /**\n   * Geo search inside a polygon.\n   * @see https://www.algolia.com/doc/rest#param-insidePolygon\n   * @member {string}\n   */\n  this.insidePolygon = params.insidePolygon;\n  /**\n   * Allows to specify an ellipsis character for the snippet when we truncate the text\n   * (added before and after if truncated).\n   * The default value is an empty string and we recommend to set it to \"…\"\n   * @see https://www.algolia.com/doc/rest#param-insidePolygon\n   * @member {string}\n   */\n  this.snippetEllipsisText = params.snippetEllipsisText;\n  /**\n   * Allows to specify some attributes name on which exact won't be applied.\n   * Attributes are separated with a comma (for example \"name,address\" ), you can also use a\n   * JSON string array encoding (for example encodeURIComponent('[\"name\",\"address\"]') ).\n   * By default the list is empty.\n   * @see https://www.algolia.com/doc/rest#param-disableExactOnAttributes\n   * @member {string|string[]}\n   */\n  this.disableExactOnAttributes = params.disableExactOnAttributes;\n  /**\n   * Applies 'exact' on single word queries if the word contains at least 3 characters\n   * and is not a stop word.\n   * Can take two values: true or false.\n   * By default, its set to false.\n   * @see https://www.algolia.com/doc/rest#param-enableExactOnSingleWordQuery\n   * @member {boolean}\n   */\n  this.enableExactOnSingleWordQuery = params.enableExactOnSingleWordQuery;\n\n  // Undocumented parameters, still needed otherwise we fail\n  this.offset = params.offset;\n  this.length = params.length;\n\n  var self = this;\n  forOwn(params, function checkForUnknownParameter(paramValue, paramName) {\n    if (SearchParameters.PARAMETERS.indexOf(paramName) === -1) {\n      self[paramName] = paramValue;\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function(partialState) {\n  // Do not reparse numbers in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity'\n  ];\n\n  forEach(numberKeys, function(k) {\n    var value = partialState[k];\n    if (isString(value)) {\n      var parsedValue = parseFloat(value);\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {\n      return geoRect.map(function(value) {\n        return parseFloat(value);\n      });\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    forEach(partialState.numericRefinements, function(operators, attribute) {\n      numericRefinements[attribute] = {};\n      forEach(operators, function(values, operator) {\n        var parsedValues = map(values, function(v) {\n          if (Array.isArray(v)) {\n            return map(v, function(vPrime) {\n              if (isString(vPrime)) {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (isString(v)) {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  forEach(newParameters.hierarchicalFacets, function(facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function(currentState, parameters) {\n  var params = parameters || {};\n\n  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n      'an error, if it is really what you want, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n      'an error, if it is not, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.numericFilters && params.numericRefinements && !isEmpty(params.numericRefinements)) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  if (!isEmpty(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters}\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var clear = RefinementList.clearRefinement;\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: clear(this.facetsRefinements, attribute, 'conjunctiveFacet'),\n      facetsExcludes: clear(this.facetsExcludes, attribute, 'exclude'),\n      disjunctiveFacetsRefinements: clear(this.disjunctiveFacetsRefinements, attribute, 'disjunctiveFacet'),\n      hierarchicalFacetsRefinements: clear(this.hierarchicalFacetsRefinements, attribute, 'hierarchicalFacet')\n    };\n    if (patch.numericRefinements === this.numericRefinements &&\n        patch.facetsRefinements === this.facetsRefinements &&\n        patch.facetsExcludes === this.facetsExcludes &&\n        patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&\n        patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters}\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: []\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters}\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters}\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters}\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters}\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters}\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters}\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters}\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters}\n   * @example\n   * // for price = 50 or 40\n   * searchparameter.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * searchparameter.addNumericRefinement('size', '=', 38);\n   * searchparameter.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function(attribute, operator, v) {\n    var value = valToNumber(v);\n\n    if (this.isNumericRefined(attribute, operator, value)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(value);\n    } else {\n      mod[attribute][operator] = [value];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      throw new Error(facetName + ' is not defined in the facets attribute of the helper configuration');\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function(facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      throw new Error(\n        facetName + ' is not defined in the disjunctiveFacets attribute of the helper configuration'\n      );\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function(facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      throw new Error(facetName + ' is not defined in the facets attribute of the helper configuration');\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters}\n   */\n  removeNumericRefinement: function(attribute, operator, paramValue) {\n    if (paramValue !== undefined) {\n      var paramValueAsNumber = valToNumber(paramValue);\n      if (!this.isNumericRefined(attribute, operator, paramValueAsNumber)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator && isEqual(value.val, paramValueAsNumber);\n        })\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator;\n        })\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function(value, key) {\n        return key === attribute;\n      })\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList[]} list of refinements\n   */\n  getNumericRefinements: function(facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function(attribute, operator) {\n    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>}\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (isUndefined(attribute)) {\n      if (isEmpty(this.numericRefinements)) return this.numericRefinements;\n      return {};\n    } else if (isString(attribute)) {\n      if (isEmpty(this.numericRefinements[attribute])) return this.numericRefinements;\n      return omit(this.numericRefinements, attribute);\n    } else if (isFunction(attribute)) {\n      var hasChanged = false;\n      var newNumericRefinements = reduce(this.numericRefinements, function(memo, operators, key) {\n        var operatorList = {};\n\n        forEach(operators, function(values, operator) {\n          var outValues = [];\n          forEach(values, function(value) {\n            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');\n            if (!predicateResult) outValues.push(value);\n          });\n          if (!isEmpty(outValues)) {\n            if (outValues.length !== values.length) hasChanged = true;\n            operatorList[operator] = outValues;\n          }\n          else hasChanged = true;\n        });\n\n        if (!isEmpty(operatorList)) memo[key] = operatorList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters}\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet])\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet])\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters}\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters}\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag)\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters}\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: filter(this.facets, function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: filter(this.disjunctiveFacets, function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters}\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: filter(this.hierarchicalFacets, function(f) {\n        return f.name !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters}\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters}\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: filter(this.tagRefinements, function(t) { return t !== tag; })\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error('Cannot refine the undeclared facet ' + facet +\n      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));\n\n    var mod = {};\n\n    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 && (\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0] === value ||\n      // remove a parent refinement of the current refinement:\n      //  - refinement was 'beer > IPA > Flying dog'\n      //  - call is toggleRefine('beer > IPA')\n      //  - refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0\n    );\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaults({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function(facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaults({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function(facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is not refined.');\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaults({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters}\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isDisjunctiveFacet: function(facet) {\n    return indexOf(this.disjunctiveFacets, facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean}\n   */\n  isHierarchicalFacet: function(facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isConjunctiveFacet: function(facet) {\n    return indexOf(this.facets, facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return indexOf(refinements, value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (isUndefined(value) && isUndefined(operator)) {\n      return !!this.numericRefinements[attribute];\n    }\n\n    var isOperatorDefined = this.numericRefinements[attribute] &&\n      !isUndefined(this.numericRefinements[attribute][operator]);\n\n    if (isUndefined(value) || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined = !isUndefined(\n      findArray(this.numericRefinements[attribute][operator], parsedValue)\n    );\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean}\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return indexOf(this.tagRefinements, tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      keys(this.numericRefinements),\n      this.disjunctiveFacets\n    );\n\n    return keys(this.disjunctiveFacetsRefinements)\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets());\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      map(this.hierarchicalFacets, 'name'),\n      keys(this.hierarchicalFacetsRefinements)\n    );\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]}\n   */\n  getUnrefinedDisjunctiveFacets: function() {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return filter(this.disjunctiveFacets, function(f) {\n      return indexOf(refinedFacets, f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n    'facets', 'disjunctiveFacets', 'facetsRefinements',\n    'facetsExcludes', 'disjunctiveFacetsRefinements',\n    'numericRefinements', 'tagRefinements', 'hierarchicalFacets', 'hierarchicalFacetsRefinements'\n  ],\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    forOwn(this, function(paramValue, paramName) {\n      if (indexOf(managedParameters, paramName) === -1 && paramValue !== undefined) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user retrieve any parameter value from the SearchParameters\n   * @param {string} paramName name of the parameter\n   * @return {any} the value of the parameter\n   */\n  getQueryParameter: function getQueryParameter(paramName) {\n    if (!this.hasOwnProperty(paramName)) {\n      throw new Error(\n        \"Parameter '\" + paramName + \"' is not an attribute of SearchParameters \" +\n        '(http://algolia.github.io/algoliasearch-helper-js/docs/SearchParameters.html)');\n    }\n\n    return this[paramName];\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    var parsedParams = SearchParameters._parseNumbers(params);\n\n    return this.mutateMe(function mergeWith(newInstance) {\n      var ks = keys(params);\n\n      forEach(ks, function(k) {\n        newInstance[k] = parsedParams[k];\n      });\n\n      return newInstance;\n    });\n  },\n\n  /**\n   * Returns an object with only the selected attributes.\n   * @param {string[]} filters filters to retrieve only a subset of the state. It\n   * accepts strings that can be either attributes of the SearchParameters (e.g. hitsPerPage)\n   * or attributes of the index with the notation 'attribute:nameOfMyAttribute'\n   * @return {object}\n   */\n  filter: function(filters) {\n    return filterState(this, filters);\n  },\n  /**\n   * Helper function to make it easier to build new instances from a mutating\n   * function\n   * @private\n   * @param {function} fn newMutableState -> previousState -> () function that will\n   * change the value of the newMutable to the desired state\n   * @return {SearchParameters} a new instance with the specified modifications applied\n   */\n  mutateMe: function mutateMe(fn) {\n    var newState = new this.constructor(this);\n\n    fn(newState, this);\n    return newState;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function(hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function(hierarchicalFacetName) {\n    return find(\n      this.hierarchicalFacets,\n      {name: hierarchicalFacetName}\n    );\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function(facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      throw new Error(\n        'Cannot get the breadcrumb of an unknown hierarchical facet: `' + facetName + '`');\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return map(path, trim);\n  },\n\n  toString: function() {\n    return JSON.stringify(this, null, 2);\n  }\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseSum;\n","var baseIteratee = require('./_baseIteratee'),\n    baseSum = require('./_baseSum');\n\n/**\n * This method is like `_.sum` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the value to be summed.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the sum.\n * @example\n *\n * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n *\n * _.sumBy(objects, function(o) { return o.n; });\n * // => 20\n *\n * // The `_.property` iteratee shorthand.\n * _.sumBy(objects, 'n');\n * // => 20\n */\nfunction sumBy(array, iteratee) {\n  return (array && array.length)\n    ? baseSum(array, baseIteratee(iteratee, 2))\n    : 0;\n}\n\nmodule.exports = sumBy;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  var index = -1;\n  iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var baseOrderBy = require('./_baseOrderBy'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nmodule.exports = orderBy;\n","var WeakMap = require('./_WeakMap');\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nmodule.exports = metaMap;\n","var identity = require('./identity'),\n    metaMap = require('./_metaMap');\n\n/**\n * The base implementation of `setData` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nmodule.exports = baseSetData;\n","var baseCreate = require('./_baseCreate'),\n    isObject = require('./isObject');\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nmodule.exports = createCtor;\n","var createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\nmodule.exports = createBind;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nmodule.exports = composeArgs;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\nmodule.exports = composeArgsRight;\n","/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      ++result;\n    }\n  }\n  return result;\n}\n\nmodule.exports = countHolders;\n","/**\n * The function whose prototype chain sequence wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nmodule.exports = baseLodash;\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @constructor\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__dir__ = 1;\n  this.__filtered__ = false;\n  this.__iteratees__ = [];\n  this.__takeCount__ = MAX_ARRAY_LENGTH;\n  this.__views__ = [];\n}\n\n// Ensure `LazyWrapper` is an instance of `baseLodash`.\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nmodule.exports = LazyWrapper;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var metaMap = require('./_metaMap'),\n    noop = require('./noop');\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nmodule.exports = getData;\n","/** Used to lookup unminified function names. */\nvar realNames = {};\n\nmodule.exports = realNames;\n","var realNames = require('./_realNames');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = (func.name + ''),\n      array = realNames[result],\n      length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nmodule.exports = getFuncName;\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable explicit method chain sequences.\n */\nfunction LodashWrapper(value, chainAll) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__chain__ = !!chainAll;\n  this.__index__ = 0;\n  this.__values__ = undefined;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nmodule.exports = LodashWrapper;\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    copyArray = require('./_copyArray');\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  if (wrapper instanceof LazyWrapper) {\n    return wrapper.clone();\n  }\n  var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n  result.__actions__ = copyArray(wrapper.__actions__);\n  result.__index__  = wrapper.__index__;\n  result.__values__ = wrapper.__values__;\n  return result;\n}\n\nmodule.exports = wrapperClone;\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    baseLodash = require('./_baseLodash'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike'),\n    wrapperClone = require('./_wrapperClone');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit method\n * chain sequences. Methods that operate on and return arrays, collections,\n * and functions can be chained together. Methods that retrieve a single value\n * or may return a primitive value will automatically end the chain sequence\n * and return the unwrapped value. Otherwise, the value must be unwrapped\n * with `_#value`.\n *\n * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n * enabled using `_.chain`.\n *\n * The execution of chained methods is lazy, that is, it's deferred until\n * `_#value` is implicitly or explicitly called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion.\n * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n * the creation of intermediate arrays and can greatly reduce the number of\n * iteratee executions. Sections of a chain sequence qualify for shortcut\n * fusion if the section is applied to an array and iteratees accept only\n * one argument. The heuristic for whether a section qualifies for shortcut\n * fusion is subject to change.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n * `zipObject`, `zipObjectDeep`, and `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n * `upperFirst`, `value`, and `words`\n *\n * @name _\n * @constructor\n * @category Seq\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // Returns an unwrapped value.\n * wrapped.reduce(_.add);\n * // => 6\n *\n * // Returns a wrapped value.\n * var squares = wrapped.map(square);\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\nlodash.prototype.constructor = lodash;\n\nmodule.exports = lodash;\n","var LazyWrapper = require('./_LazyWrapper'),\n    getData = require('./_getData'),\n    getFuncName = require('./_getFuncName'),\n    lodash = require('./wrapperLodash');\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n *  else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func),\n      other = lodash[funcName];\n\n  if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nmodule.exports = isLaziable;\n","var baseSetData = require('./_baseSetData'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity\n * function to avoid garbage collection pauses in V8. See\n * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = shortOut(baseSetData);\n\nmodule.exports = setData;\n","/** Used to match wrap detail comments. */\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n\nmodule.exports = getWrapDetails;\n","/** Used to match wrap detail comments. */\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\n\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\nfunction insertWrapDetails(source, details) {\n  var length = details.length;\n  if (!length) {\n    return source;\n  }\n  var lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n\nmodule.exports = insertWrapDetails;\n","var arrayEach = require('./_arrayEach'),\n    arrayIncludes = require('./_arrayIncludes');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256,\n    WRAP_FLIP_FLAG = 512;\n\n/** Used to associate wrap methods with their bit flags. */\nvar wrapFlags = [\n  ['ary', WRAP_ARY_FLAG],\n  ['bind', WRAP_BIND_FLAG],\n  ['bindKey', WRAP_BIND_KEY_FLAG],\n  ['curry', WRAP_CURRY_FLAG],\n  ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n  ['flip', WRAP_FLIP_FLAG],\n  ['partial', WRAP_PARTIAL_FLAG],\n  ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n  ['rearg', WRAP_REARG_FLAG]\n];\n\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function(pair) {\n    var value = '_.' + pair[0];\n    if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n\nmodule.exports = updateWrapDetails;\n","var getWrapDetails = require('./_getWrapDetails'),\n    insertWrapDetails = require('./_insertWrapDetails'),\n    setToString = require('./_setToString'),\n    updateWrapDetails = require('./_updateWrapDetails');\n\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\nfunction setWrapToString(wrapper, reference, bitmask) {\n  var source = (reference + '');\n  return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n}\n\nmodule.exports = setWrapToString;\n","var isLaziable = require('./_isLaziable'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & WRAP_CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n  if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n    bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n  }\n  var newData = [\n    func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n    newHoldersRight, argPos, ary, arity\n  ];\n\n  var result = wrapFunc.apply(undefined, newData);\n  if (isLaziable(func)) {\n    setData(result, newData);\n  }\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n\nmodule.exports = createRecurry;\n","/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\nmodule.exports = getHolder;\n","var copyArray = require('./_copyArray'),\n    isIndex = require('./_isIndex');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nmodule.exports = reorder;\n","/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\nmodule.exports = replaceHolders;\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    countHolders = require('./_countHolders'),\n    createCtor = require('./_createCtor'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    reorder = require('./_reorder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_ARY_FLAG = 128,\n    WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & WRAP_ARY_FLAG,\n      isBind = bitmask & WRAP_BIND_FLAG,\n      isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n      isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n      isFlip = bitmask & WRAP_FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createHybrid;\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    createHybrid = require('./_createHybrid'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createCurry;\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createPartial;\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers used to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and\n * `_.rearg` modify function arguments, making the order in which they are\n * executed important, preventing the merging of metadata. However, we make\n * an exception for a safe combined case where curried functions have `_.ary`\n * and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n  var isCombo =\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n    ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & WRAP_BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = value;\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & WRAP_ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nmodule.exports = mergeData;\n","var baseSetData = require('./_baseSetData'),\n    createBind = require('./_createBind'),\n    createCurry = require('./_createCurry'),\n    createHybrid = require('./_createHybrid'),\n    createPartial = require('./_createPartial'),\n    getData = require('./_getData'),\n    mergeData = require('./_mergeData'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString'),\n    toInteger = require('./toInteger');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *    1 - `_.bind`\n *    2 - `_.bindKey`\n *    4 - `_.curry` or `_.curryRight` of a bound function\n *    8 - `_.curry`\n *   16 - `_.curryRight`\n *   32 - `_.partial`\n *   64 - `_.partialRight`\n *  128 - `_.rearg`\n *  256 - `_.ary`\n *  512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n  var data = isBindKey ? undefined : getData(func);\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  if (data) {\n    mergeData(newData, data);\n  }\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] === undefined\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setWrapToString(setter(result, newData), func, bitmask);\n}\n\nmodule.exports = createWrap;\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with `partials` prepended to the\n * arguments it receives. This method is like `_.bind` except it does **not**\n * alter the `this` binding.\n *\n * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for partially applied arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of partially\n * applied functions.\n *\n * @static\n * @memberOf _\n * @since 0.2.0\n * @category Function\n * @param {Function} func The function to partially apply arguments to.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new partially applied function.\n * @example\n *\n * function greet(greeting, name) {\n *   return greeting + ' ' + name;\n * }\n *\n * var sayHelloTo = _.partial(greet, 'hello');\n * sayHelloTo('fred');\n * // => 'hello fred'\n *\n * // Partially applied with placeholders.\n * var greetFred = _.partial(greet, _, 'fred');\n * greetFred('hi');\n * // => 'hi fred'\n */\nvar partial = baseRest(function(func, partials) {\n  var holders = replaceHolders(partials, getHolder(partial));\n  return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n});\n\n// Assign default placeholders.\npartial.placeholder = {};\n\nmodule.exports = partial;\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * This method is like `_.partial` except that partially applied arguments\n * are appended to the arguments it receives.\n *\n * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for partially applied arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of partially\n * applied functions.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Function\n * @param {Function} func The function to partially apply arguments to.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new partially applied function.\n * @example\n *\n * function greet(greeting, name) {\n *   return greeting + ' ' + name;\n * }\n *\n * var greetFred = _.partialRight(greet, 'fred');\n * greetFred('hi');\n * // => 'hi fred'\n *\n * // Partially applied with placeholders.\n * var sayHelloTo = _.partialRight(greet, 'hello', _);\n * sayHelloTo('fred');\n * // => 'hello fred'\n */\nvar partialRight = baseRest(function(func, partials) {\n  var holders = replaceHolders(partials, getHolder(partialRight));\n  return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n});\n\n// Assign default placeholders.\npartialRight.placeholder = {};\n\nmodule.exports = partialRight;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","var baseClamp = require('./_baseClamp'),\n    baseToString = require('./_baseToString'),\n    toInteger = require('./toInteger'),\n    toString = require('./toString');\n\n/**\n * Checks if `string` starts with the given target string.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {string} [target] The string to search for.\n * @param {number} [position=0] The position to search from.\n * @returns {boolean} Returns `true` if `string` starts with `target`,\n *  else `false`.\n * @example\n *\n * _.startsWith('abc', 'a');\n * // => true\n *\n * _.startsWith('abc', 'b');\n * // => false\n *\n * _.startsWith('abc', 'b', 1);\n * // => true\n */\nfunction startsWith(string, target, position) {\n  string = toString(string);\n  position = position == null\n    ? 0\n    : baseClamp(toInteger(position), 0, string.length);\n\n  target = baseToString(target);\n  return string.slice(position, position + target.length) == target;\n}\n\nmodule.exports = startsWith;\n","'use strict';\n\nvar reduce = require('lodash/reduce');\nvar find = require('lodash/find');\nvar startsWith = require('lodash/startsWith');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  return reduce(sortBy, function preparePredicate(out, sortInstruction) {\n    var sortInstructions = sortInstruction.split(':');\n    if (defaults && sortInstructions.length === 1) {\n      var similarDefault = find(defaults, function(predicate) {\n        return startsWith(predicate, sortInstruction[0]);\n      });\n      if (similarDefault) {\n        sortInstructions = similarDefault.split(':');\n      }\n    }\n    out[0].push(sortInstructions[0]);\n    out[1].push(sortInstructions[1]);\n    return out;\n  }, [[], []]);\n};\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar last = require('lodash/last');\nvar map = require('lodash/map');\nvar reduce = require('lodash/reduce');\nvar orderBy = require('lodash/orderBy');\nvar trim = require('lodash/trim');\nvar find = require('lodash/find');\nvar pickBy = require('lodash/pickBy');\n\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement = state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n      state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0] || '';\n    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    var hierarchicalRootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(hierarchicalFacet);\n    var sortBy = prepareHierarchicalFacetSortBy(state._getHierarchicalFacetSortBy(hierarchicalFacet));\n\n    var generateTreeFn = generateHierarchicalTree(sortBy, hierarchicalSeparator, hierarchicalRootPath,\n      hierarchicalShowParentLevel, hierarchicalFacetRefinement);\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(hierarchicalRootPath.split(hierarchicalSeparator).length);\n    }\n\n    return reduce(results, generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      data: null\n    });\n  };\n}\n\nfunction generateHierarchicalTree(sortBy, hierarchicalSeparator, hierarchicalRootPath,\n                                  hierarchicalShowParentLevel, currentRefinement) {\n  return function generateTree(hierarchicalTree, hierarchicalFacetResult, currentHierarchicalLevel) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        parent = parent && find(parent.data, {isRefined: true});\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bières'],\n      //       level1: ['beers > IPA', 'bières > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bières > Belges`\n      // showing up\n\n      var onlyMatchingValuesFn = filterFacetValues(parent.path || hierarchicalRootPath,\n        currentRefinement, hierarchicalSeparator, hierarchicalRootPath, hierarchicalShowParentLevel);\n\n      parent.data = orderBy(\n        map(\n          pickBy(hierarchicalFacetResult.data, onlyMatchingValuesFn),\n          formatHierarchicalFacetValue(hierarchicalSeparator, currentRefinement)\n        ),\n        sortBy[0], sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\nfunction filterFacetValues(parentPath, currentRefinement, hierarchicalSeparator, hierarchicalRootPath,\n                           hierarchicalShowParentLevel) {\n  return function(facetCount, facetValue) {\n    // we want the facetValue is a child of hierarchicalRootPath\n    if (hierarchicalRootPath &&\n      (facetValue.indexOf(hierarchicalRootPath) !== 0 || hierarchicalRootPath === facetValue)) {\n      return false;\n    }\n\n    // we always want root levels (only when there is no prefix path)\n    return !hierarchicalRootPath && facetValue.indexOf(hierarchicalSeparator) === -1 ||\n      // if there is a rootPath, being root level mean 1 level under rootPath\n      hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length - hierarchicalRootPath.split(hierarchicalSeparator).length === 1 ||\n      // if current refinement is a root level and current facetValue is a root level,\n      // keep the facetValue\n      facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1 ||\n      // currentRefinement is a child of the facet value\n      currentRefinement.indexOf(facetValue) === 0 ||\n      // facetValue is a child of the current parent, add it\n      facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel || facetValue.indexOf(currentRefinement) === 0);\n  };\n}\n\nfunction formatHierarchicalFacetValue(hierarchicalSeparator, currentRefinement) {\n  return function format(facetCount, facetValue) {\n    return {\n      name: trim(last(facetValue.split(hierarchicalSeparator))),\n      path: facetValue,\n      count: facetCount,\n      isRefined: currentRefinement === facetValue || currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n      data: null\n    };\n  };\n}\n","'use strict';\n\nvar forEach = require('lodash/forEach');\nvar compact = require('lodash/compact');\nvar indexOf = require('lodash/indexOf');\nvar findIndex = require('lodash/findIndex');\nvar get = require('lodash/get');\n\nvar sumBy = require('lodash/sumBy');\nvar find = require('lodash/find');\nvar includes = require('lodash/includes');\nvar map = require('lodash/map');\nvar orderBy = require('lodash/orderBy');\n\nvar defaults = require('lodash/defaults');\nvar merge = require('lodash/merge');\n\nvar isFunction = require('lodash/isFunction');\n\nvar partial = require('lodash/partial');\nvar partialRight = require('lodash/partialRight');\n\nvar formatSort = require('../functions/formatSort');\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\nfunction getIndices(obj) {\n  var indices = {};\n\n  forEach(obj, function(val, idx) { indices[val] = idx; });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\nfunction findMatchingHierarchicalFacetFromAttributeName(hierarchicalFacets, hierarchicalAttributeName) {\n  return find(\n    hierarchicalFacets,\n    function facetKeyMatchesAttribute(hierarchicalFacet) {\n      return includes(hierarchicalFacet.attributes, hierarchicalAttributeName);\n    }\n  );\n}\n\n/*eslint-disable */\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devi…d=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex™\": 202,\n            \"Insignia™\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\n/*eslint-enable */\nfunction SearchResults(state, results) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  /**\n   * query used to generate the results\n   * @member {string}\n   */\n  this.query = mainSubResponse.query;\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @member {string}\n   */\n  this.parsedQuery = mainSubResponse.parsedQuery;\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   *  - `value` : the value of the facet highlighted (html)\n   *  - `matchLevel`: full, partial or none depending on how the query terms match\n   * @member {object[]}\n   */\n  this.hits = mainSubResponse.hits;\n  /**\n   * index where the results come from\n   * @member {string}\n   */\n  this.index = mainSubResponse.index;\n  /**\n   * number of hits per page requested\n   * @member {number}\n   */\n  this.hitsPerPage = mainSubResponse.hitsPerPage;\n  /**\n   * total number of hits of this query on the index\n   * @member {number}\n   */\n  this.nbHits = mainSubResponse.nbHits;\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @member {number}\n   */\n  this.nbPages = mainSubResponse.nbPages;\n  /**\n   * current page\n   * @member {number}\n   */\n  this.page = mainSubResponse.page;\n  /**\n   * sum of the processing time of all the queries\n   * @member {number}\n   */\n  this.processingTimeMS = sumBy(results, 'processingTimeMS');\n  /**\n   * The position if the position was guessed by IP.\n   * @member {string}\n   * @example \"48.8637,2.3615\",\n   */\n  this.aroundLatLng = mainSubResponse.aroundLatLng;\n  /**\n   * The radius computed by Algolia.\n   * @member {string}\n   * @example \"126792922\",\n   */\n  this.automaticRadius = mainSubResponse.automaticRadius;\n  /**\n   * String identifying the server used to serve this request.\n   * @member {string}\n   * @example \"c7-use-2.algolia.net\",\n   */\n  this.serverUsed = mainSubResponse.serverUsed;\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @member {boolean}\n   */\n  this.timeoutCounts = mainSubResponse.timeoutCounts;\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @member {boolean}\n   */\n  this.timeoutHits = mainSubResponse.timeoutHits;\n\n  /**\n   * True if the counts of the facets is exhaustive\n   * @member {boolean}\n   */\n  this.exhaustiveFacetsCount = mainSubResponse.exhaustiveFacetsCount;\n\n  /**\n   * True if the number of hits is exhaustive\n   * @member {boolean}\n   */\n  this.exhaustiveNbHits = mainSubResponse.exhaustiveNbHits;\n\n\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @member {object[]}\n   */\n  this.userData = mainSubResponse.userData;\n\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @member {string}\n   */\n  this.queryID = mainSubResponse.queryID;\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = map(state.hierarchicalFacets, function initFutureTree() {\n    return [];\n  });\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  var self = this;\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets informations from the first, general, response.\n  forEach(mainSubResponse.facets, function(facetValueObject, facetKey) {\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, {name: hierarchicalFacet.name});\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount\n      };\n    } else {\n      var isFacetDisjunctive = indexOf(state.disjunctiveFacets, facetKey) !== -1;\n      var isFacetConjunctive = indexOf(state.facets, facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  forEach(disjunctiveFacets, function(disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    forEach(result.facets, function(facetResults, dfacet) {\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, {name: hierarchicalFacet.name});\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], {attribute: dfacet});\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaults({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          forEach(state.disjunctiveFacetsRefinements[dfacet], function(refinementValue) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (!self.disjunctiveFacets[position].data[refinementValue] &&\n              indexOf(state.disjunctiveFacetsRefinements[dfacet], refinementValue) > -1) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some root level values for hierarchical facets, merge them\n  forEach(state.getRefinedHierarchicalFacets(), function(refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {\n      return;\n    }\n\n    var result = results[nextDisjunctiveResult];\n\n    forEach(result.facets, function(facetResults, dfacet) {\n      var position = findIndex(state.hierarchicalFacets, {name: hierarchicalFacet.name});\n      var attributeIndex = findIndex(self.hierarchicalFacets[position], {attribute: dfacet});\n\n      // previous refinements and no results so not able to find it\n      if (attributeIndex === -1) {\n        return;\n      }\n\n      // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n      // then the disjunctive values will be `beers` (count: 100),\n      // but we do not want to display\n      //   | beers (100)\n      //     > IPA (5)\n      // We want\n      //   | beers (5)\n      //     > IPA (5)\n      var defaultData = {};\n\n      if (currentRefinement.length > 0) {\n        var root = currentRefinement[0].split(separator)[0];\n        defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];\n      }\n\n      self.hierarchicalFacets[position][attributeIndex].data = defaults(\n        defaultData,\n        facetResults,\n        self.hierarchicalFacets[position][attributeIndex].data\n      );\n    });\n\n    nextDisjunctiveResult++;\n  });\n\n  // add the excludes\n  forEach(state.facetsExcludes, function(excludes, facetName) {\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainSubResponse.facets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount\n    };\n    forEach(excludes, function(facetValue) {\n      self.facets[position] = self.facets[position] || {name: facetName};\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  this.hierarchicalFacets = map(this.hierarchicalFacets, generateHierarchicalTree(state));\n\n  this.facets = compact(this.facets);\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function(name) {\n  var predicate = {name: name};\n\n  return find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate);\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  var predicate = {name: attribute};\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return map(facet.data, function(v, k) {\n      return {\n        name: k,\n        count: v,\n        isRefined: results._state.isFacetRefined(attribute, k),\n        isExcluded: results._state.isExcludeRefined(attribute, k)\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return map(disjunctiveFacet.data, function(v, k) {\n      return {\n        name: k,\n        count: v,\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, k)\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    return find(results.hierarchicalFacets, predicate);\n  }\n}\n\n/**\n * Sort nodes of a hierarchical facet results\n * @private\n * @param {HierarchicalFacet} node node to upon which we want to apply the sort\n */\nfunction recSort(sortFn, node) {\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n  var children = map(node.data, partial(recSort, sortFn));\n  var sortedChildren = sortFn(children);\n  var newNode = merge({}, node, {data: sortedChildren});\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('results', function(content){\n *   //get values ordered only by name ascending using the string predicate\n *   content.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   content.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function(attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) throw new Error(attribute + ' is not a retrieved facet.');\n\n  var options = defaults({}, opts, {sortBy: SearchResults.DEFAULT_SORT});\n\n  if (Array.isArray(options.sortBy)) {\n    var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n    if (Array.isArray(facetValues)) {\n      return orderBy(facetValues, order[0], order[1]);\n    }\n    // If facetValues is not an array, it's an object thus a hierarchical facet object\n    return recSort(partialRight(orderBy, order[0], order[1]), facetValues);\n  } else if (isFunction(options.sortBy)) {\n    if (Array.isArray(facetValues)) {\n      return facetValues.sort(options.sortBy);\n    }\n    // If facetValues is not an array, it's an object thus a hierarchical facet object\n    return recSort(partial(vanillaSortFn, options.sortBy), facetValues);\n  }\n  throw new Error(\n    'options.sortBy is optional but if defined it must be ' +\n    'either an array of string (predicates) or a sorting function'\n  );\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function(attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  throw new Error(attribute + ' is not present in `facets` or `disjunctiveFacets`');\n};\n\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, {name: facetName});\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhausistivity for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function() {\n  var state = this._state;\n  var results = this;\n  var res = [];\n\n  forEach(state.facetsRefinements, function(refinements, attributeName) {\n    forEach(refinements, function(name) {\n      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));\n    });\n  });\n\n  forEach(state.facetsExcludes, function(refinements, attributeName) {\n    forEach(refinements, function(name) {\n      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));\n    });\n  });\n\n  forEach(state.disjunctiveFacetsRefinements, function(refinements, attributeName) {\n    forEach(refinements, function(name) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));\n    });\n  });\n\n  forEach(state.hierarchicalFacetsRefinements, function(refinements, attributeName) {\n    forEach(refinements, function(name) {\n      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));\n    });\n  });\n\n  forEach(state.numericRefinements, function(operators, attributeName) {\n    forEach(operators, function(values, operator) {\n      forEach(values, function(value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator\n        });\n      });\n    });\n  });\n\n  forEach(state.tagRefinements, function(name) {\n    res.push({type: 'tag', attributeName: '_tags', name: name});\n  });\n\n  return res;\n};\n\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, {name: attributeName});\n  var count = get(facet, 'data[' + name + ']');\n  var exhaustive = get(facet, 'exhaustive');\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count || 0,\n    exhaustive: exhaustive || false\n  };\n}\n\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, {name: attributeName});\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var splitted = name.split(facetDeclaration.separator);\n  var configuredName = splitted[splitted.length - 1];\n  for (var i = 0; facet !== undefined && i < splitted.length; ++i) {\n    facet = find(facet.data, {name: splitted[i]});\n  }\n  var count = get(facet, 'count');\n  var exhaustive = get(facet, 'exhaustive');\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: configuredName,\n    count: count || 0,\n    exhaustive: exhaustive || false\n  };\n}\n\nmodule.exports = SearchResults;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\nvar events = require('events');\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, events.EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function() {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function(parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\nvar forEach = require('lodash/forEach');\nvar map = require('lodash/map');\nvar reduce = require('lodash/reduce');\nvar merge = require('lodash/merge');\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state)\n    });\n\n    // One for each disjunctive facets\n    forEach(state.getRefinedDisjunctiveFacets(), function(refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)\n      });\n    });\n\n    // maybe more to get the root level of hierarchical facets when activated\n    forEach(state.getRefinedHierarchicalFacets(), function(refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      // if we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get the root values\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {\n        queries.push({\n          indexName: index,\n          params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet, true)\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @return {object.<string, any>}\n   */\n  _getHitsSearchParams: function(state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));\n\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets,\n      tagFilters: tagFilters\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return merge(state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object}\n   */\n  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 1,\n      page: 0,\n      attributesToRetrieve: [],\n      attributesToHighlight: [],\n      attributesToSnippet: [],\n      tagFilters: tagFilters,\n      analytics: false,\n      clickAnalytics: false\n    };\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n        state,\n        hierarchicalFacet,\n        hierarchicalRootLevel\n      );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return merge(state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function(state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    forEach(state.numericRefinements, function(operators, attribute) {\n      forEach(operators, function(values, operator) {\n        if (facetName !== attribute) {\n          forEach(values, function(value) {\n            if (Array.isArray(value)) {\n              var vs = map(value, function(v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending\n   * @private\n   * @return {string}\n   */\n  _getTagFilters: function(state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @return {array.<string>}\n   */\n  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    forEach(state.facetsRefinements, function(facetValues, facetName) {\n      forEach(facetValues, function(facetValue) {\n        facetFilters.push(facetName + ':' + facetValue);\n      });\n    });\n\n    forEach(state.facetsExcludes, function(facetValues, facetName) {\n      forEach(facetValues, function(facetValue) {\n        facetFilters.push(facetName + ':-' + facetValue);\n      });\n    });\n\n    forEach(state.disjunctiveFacetsRefinements, function(facetValues, facetName) {\n      if (facetName === facet || !facetValues || facetValues.length === 0) return;\n      var orFilters = [];\n\n      forEach(facetValues, function(facetValue) {\n        orFilters.push(facetName + ':' + facetValue);\n      });\n\n      facetFilters.push(orFilters);\n    });\n\n    forEach(state.hierarchicalFacetsRefinements, function(facetValues, facetName) {\n      var facetValue = facetValues[0];\n\n      if (facetValue === undefined) {\n        return;\n      }\n\n      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeToRefine;\n      var attributesIndex;\n\n      // we ask for parent facet values only when the `facet` is the current hierarchical facet\n      if (facet === facetName) {\n        // if we are at the root level already, no need to ask for facet values, we get them from\n        // the hits query\n        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||\n          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {\n          return;\n        }\n\n        if (!rootPath) {\n          attributesIndex = facetValue.split(separator).length - 2;\n          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n        } else {\n          attributesIndex = rootPath.split(separator).length - 1;\n          facetValue = rootPath;\n        }\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      } else {\n        attributesIndex = facetValue.split(separator).length - 1;\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      }\n\n      if (attributeToRefine) {\n        facetFilters.push([attributeToRefine + ':' + facetValue]);\n      }\n    });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function(state) {\n    var out = [];\n\n    return reduce(\n      state.hierarchicalFacets,\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      }, out);\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?\n      state.clearRefinements(facetName) :\n      state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    var queries = merge(requestBuilder._getHitsSearchParams(stateForSearchForFacetValues), searchForFacetSearchParameters);\n    return queries;\n  }\n};\n\nmodule.exports = requestBuilder;\n","var baseForOwn = require('./_baseForOwn');\n\n/**\n * The base implementation of `_.invert` and `_.invertBy` which inverts\n * `object` with values transformed by `iteratee` and set by `setter`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform values.\n * @param {Object} accumulator The initial inverted object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseInverter(object, setter, iteratee, accumulator) {\n  baseForOwn(object, function(value, key, object) {\n    setter(accumulator, iteratee(value), key, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseInverter;\n","var baseInverter = require('./_baseInverter');\n\n/**\n * Creates a function like `_.invertBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} toIteratee The function to resolve iteratees.\n * @returns {Function} Returns the new inverter function.\n */\nfunction createInverter(setter, toIteratee) {\n  return function(object, iteratee) {\n    return baseInverter(object, setter, toIteratee(iteratee), {});\n  };\n}\n\nmodule.exports = createInverter;\n","var constant = require('./constant'),\n    createInverter = require('./_createInverter'),\n    identity = require('./identity');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Creates an object composed of the inverted keys and values of `object`.\n * If `object` contains duplicate values, subsequent values overwrite\n * property assignments of previous values.\n *\n * @static\n * @memberOf _\n * @since 0.7.0\n * @category Object\n * @param {Object} object The object to invert.\n * @returns {Object} Returns the new inverted object.\n * @example\n *\n * var object = { 'a': 1, 'b': 2, 'c': 1 };\n *\n * _.invert(object);\n * // => { '1': 'c', '2': 'b' }\n */\nvar invert = createInverter(function(result, value, key) {\n  if (value != null &&\n      typeof value.toString != 'function') {\n    value = nativeObjectToString.call(value);\n  }\n\n  result[value] = key;\n}, constant(identity));\n\nmodule.exports = invert;\n","'use strict';\n\nvar invert = require('lodash/invert');\nvar keys = require('lodash/keys');\n\nvar keys2Short = {\n  advancedSyntax: 'aS',\n  allowTyposOnNumericTokens: 'aTONT',\n  analyticsTags: 'aT',\n  analytics: 'a',\n  aroundLatLngViaIP: 'aLLVIP',\n  aroundLatLng: 'aLL',\n  aroundPrecision: 'aP',\n  aroundRadius: 'aR',\n  attributesToHighlight: 'aTH',\n  attributesToRetrieve: 'aTR',\n  attributesToSnippet: 'aTS',\n  disjunctiveFacetsRefinements: 'dFR',\n  disjunctiveFacets: 'dF',\n  distinct: 'd',\n  facetsExcludes: 'fE',\n  facetsRefinements: 'fR',\n  facets: 'f',\n  getRankingInfo: 'gRI',\n  hierarchicalFacetsRefinements: 'hFR',\n  hierarchicalFacets: 'hF',\n  highlightPostTag: 'hPoT',\n  highlightPreTag: 'hPrT',\n  hitsPerPage: 'hPP',\n  ignorePlurals: 'iP',\n  index: 'idx',\n  insideBoundingBox: 'iBB',\n  insidePolygon: 'iPg',\n  length: 'l',\n  maxValuesPerFacet: 'mVPF',\n  minimumAroundRadius: 'mAR',\n  minProximity: 'mP',\n  minWordSizefor1Typo: 'mWS1T',\n  minWordSizefor2Typos: 'mWS2T',\n  numericFilters: 'nF',\n  numericRefinements: 'nR',\n  offset: 'o',\n  optionalWords: 'oW',\n  page: 'p',\n  queryType: 'qT',\n  query: 'q',\n  removeWordsIfNoResults: 'rWINR',\n  replaceSynonymsInHighlight: 'rSIH',\n  restrictSearchableAttributes: 'rSA',\n  synonyms: 's',\n  tagFilters: 'tF',\n  tagRefinements: 'tR',\n  typoTolerance: 'tT',\n  optionalTagFilters: 'oTF',\n  optionalFacetFilters: 'oFF',\n  snippetEllipsisText: 'sET',\n  disableExactOnAttributes: 'dEOA',\n  enableExactOnSingleWordQuery: 'eEOSWQ'\n};\n\nvar short2Keys = invert(keys2Short);\n\nmodule.exports = {\n  /**\n   * All the keys of the state, encoded.\n   * @const\n   */\n  ENCODED_PARAMETERS: keys(short2Keys),\n  /**\n   * Decode a shorten attribute\n   * @param {string} shortKey the shorten attribute\n   * @return {string} the decoded attribute, undefined otherwise\n   */\n  decode: function(shortKey) {\n    return short2Keys[shortKey];\n  },\n  /**\n   * Encode an attribute into a short version\n   * @param {string} key the attribute\n   * @return {string} the shorten attribute\n   */\n  encode: function(key) {\n    return keys2Short[key];\n  }\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    var obj;\n\n    while (queue.length) {\n        var item = queue.pop();\n        obj = item.obj[item.prop];\n\n        if (Array.isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n\n    return obj;\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (Array.isArray(target) && Array.isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                if (target[i] && typeof target[i] === 'object') {\n                    target[i] = merge(target[i], item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nvar encode = function encode(str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    return compactQueue(queue);\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(stringify(\n                obj[key],\n                generateArrayPrefix(prefix, key),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        } else {\n            values = values.concat(stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;\n    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;\n    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (typeof options.format === 'undefined') {\n        options.format = formats['default'];\n    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {\n        throw new TypeError('Unknown format option provided.');\n    }\n    var formatter = formats.formatters[options.format];\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encode ? encoder : null,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly\n        ));\n    }\n\n    var joined = keys.join(delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    parameterLimit: 1000,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder);\n        }\n        if (has.call(obj, key)) {\n            obj[key] = [].concat(obj[key]).concat(val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]') {\n            obj = [];\n            obj = obj.concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.decoder !== null && options.decoder !== undefined && typeof options.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    options.ignoreQueryPrefix = options.ignoreQueryPrefix === true;\n    options.delimiter = typeof options.delimiter === 'string' || utils.isRegExp(options.delimiter) ? options.delimiter : defaults.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : defaults.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : defaults.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.decoder = typeof options.decoder === 'function' ? options.decoder : defaults.decoder;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : defaults.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : defaults.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : defaults.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : defaults.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and `partials` prepended to the arguments it receives.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * function greet(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * }\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = baseRest(function(func, thisArg, partials) {\n  var bitmask = WRAP_BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getHolder(bind));\n    bitmask |= WRAP_PARTIAL_FLAG;\n  }\n  return createWrap(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nmodule.exports = bind;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nmodule.exports = mapKeys;\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n","'use strict';\n\n/**\n * Module containing the functions to serialize and deserialize\n * {SearchParameters} in the query string format\n * @module algoliasearchHelper.url\n */\n\nvar shortener = require('./SearchParameters/shortener');\nvar SearchParameters = require('./SearchParameters');\n\nvar qs = require('qs');\n\nvar bind = require('lodash/bind');\nvar forEach = require('lodash/forEach');\nvar pick = require('lodash/pick');\nvar map = require('lodash/map');\nvar mapKeys = require('lodash/mapKeys');\nvar mapValues = require('lodash/mapValues');\nvar isString = require('lodash/isString');\nvar isPlainObject = require('lodash/isPlainObject');\nvar isEmpty = require('lodash/isEmpty');\nvar invert = require('lodash/invert');\n\nvar encode = require('qs/lib/utils').encode;\n\nfunction recursiveEncode(input) {\n  if (isPlainObject(input)) {\n    return mapValues(input, recursiveEncode);\n  }\n  if (Array.isArray(input)) {\n    return map(input, recursiveEncode);\n  }\n  if (isString(input)) {\n    return encode(input);\n  }\n  return input;\n}\n\nvar refinementsParameters = ['dFR', 'fR', 'nR', 'hFR', 'tR'];\nvar stateKeys = shortener.ENCODED_PARAMETERS;\nfunction sortQueryStringValues(prefixRegexp, invertedMapping, a, b) {\n  if (prefixRegexp !== null) {\n    a = a.replace(prefixRegexp, '');\n    b = b.replace(prefixRegexp, '');\n  }\n\n  a = invertedMapping[a] || a;\n  b = invertedMapping[b] || b;\n\n  if (stateKeys.indexOf(a) !== -1 || stateKeys.indexOf(b) !== -1) {\n    if (a === 'q') return -1;\n    if (b === 'q') return 1;\n\n    var isARefinements = refinementsParameters.indexOf(a) !== -1;\n    var isBRefinements = refinementsParameters.indexOf(b) !== -1;\n    if (isARefinements && !isBRefinements) {\n      return 1;\n    } else if (isBRefinements && !isARefinements) {\n      return -1;\n    }\n  }\n\n  return a.localeCompare(b);\n}\n\n/**\n * Read a query string and return an object containing the state\n * @param {string} queryString the query string that will be decoded\n * @param {object} [options] accepted options :\n *   - prefix : the prefix used for the saved attributes, you have to provide the\n *     same that was used for serialization\n *   - mapping : map short attributes to another value e.g. {q: 'query'}\n * @return {object} partial search parameters object (same properties than in the\n * SearchParameters but not exhaustive)\n */\nexports.getStateFromQueryString = function(queryString, options) {\n  var prefixForParameters = options && options.prefix || '';\n  var mapping = options && options.mapping || {};\n  var invertedMapping = invert(mapping);\n\n  var partialStateWithPrefix = qs.parse(queryString);\n  var prefixRegexp = new RegExp('^' + prefixForParameters);\n  var partialState = mapKeys(\n    partialStateWithPrefix,\n    function(v, k) {\n      var hasPrefix = prefixForParameters && prefixRegexp.test(k);\n      var unprefixedKey = hasPrefix ? k.replace(prefixRegexp, '') : k;\n      var decodedKey = shortener.decode(invertedMapping[unprefixedKey] || unprefixedKey);\n      return decodedKey || unprefixedKey;\n    }\n  );\n\n  var partialStateWithParsedNumbers = SearchParameters._parseNumbers(partialState);\n\n  return pick(partialStateWithParsedNumbers, SearchParameters.PARAMETERS);\n};\n\n/**\n * Retrieve an object of all the properties that are not understandable as helper\n * parameters.\n * @param {string} queryString the query string to read\n * @param {object} [options] the options\n *   - prefixForParameters : prefix used for the helper configuration keys\n *   - mapping : map short attributes to another value e.g. {q: 'query'}\n * @return {object} the object containing the parsed configuration that doesn't\n * to the helper\n */\nexports.getUnrecognizedParametersInQueryString = function(queryString, options) {\n  var prefixForParameters = options && options.prefix;\n  var mapping = options && options.mapping || {};\n  var invertedMapping = invert(mapping);\n\n  var foreignConfig = {};\n  var config = qs.parse(queryString);\n  if (prefixForParameters) {\n    var prefixRegexp = new RegExp('^' + prefixForParameters);\n    forEach(config, function(v, key) {\n      if (!prefixRegexp.test(key)) foreignConfig[key] = v;\n    });\n  } else {\n    forEach(config, function(v, key) {\n      if (!shortener.decode(invertedMapping[key] || key)) foreignConfig[key] = v;\n    });\n  }\n\n  return foreignConfig;\n};\n\n/**\n * Generate a query string for the state passed according to the options\n * @param {SearchParameters} state state to serialize\n * @param {object} [options] May contain the following parameters :\n *  - prefix : prefix in front of the keys\n *  - mapping : map short attributes to another value e.g. {q: 'query'}\n *  - moreAttributes : more values to be added in the query string. Those values\n *    won't be prefixed.\n *  - safe : get safe urls for use in emails, chat apps or any application auto linking urls.\n *  All parameters and values will be encoded in a way that it's safe to share them.\n *  Default to false for legacy reasons ()\n * @return {string} the query string\n */\nexports.getQueryStringFromState = function(state, options) {\n  var moreAttributes = options && options.moreAttributes;\n  var prefixForParameters = options && options.prefix || '';\n  var mapping = options && options.mapping || {};\n  var safe = options && options.safe || false;\n  var invertedMapping = invert(mapping);\n\n  var stateForUrl = safe ? state : recursiveEncode(state);\n\n  var encodedState = mapKeys(\n    stateForUrl,\n    function(v, k) {\n      var shortK = shortener.encode(k);\n      return prefixForParameters + (mapping[shortK] || shortK);\n    }\n  );\n\n  var prefixRegexp = prefixForParameters === '' ? null : new RegExp('^' + prefixForParameters);\n  var sort = bind(sortQueryStringValues, null, prefixRegexp, invertedMapping);\n  if (!isEmpty(moreAttributes)) {\n    var stateQs = qs.stringify(encodedState, {encode: safe, sort: sort});\n    var moreQs = qs.stringify(moreAttributes, {encode: safe});\n    if (!stateQs) return moreQs;\n    return stateQs + '&' + moreQs;\n  }\n\n  return qs.stringify(encodedState, {encode: safe, sort: sort});\n};\n","'use strict';\n\nmodule.exports = '2.28.1';\n","'use strict';\n\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar DerivedHelper = require('./DerivedHelper');\nvar requestBuilder = require('./requestBuilder');\n\nvar events = require('events');\nvar inherits = require('./functions/inherits');\n\nvar flatten = require('lodash/flatten');\nvar forEach = require('lodash/forEach');\nvar isEmpty = require('lodash/isEmpty');\nvar map = require('lodash/map');\n\nvar url = require('./url');\nvar version = require('./version');\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {SearchParameters} state the current parameters with the latest changes applied\n * @property {SearchResults} lastResults the previous results received from Algolia. `null` before\n * the first request\n * @example\n * helper.on('change', function(state, lastResults) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {SearchParameters} state the parameters used for this search\n * @property {SearchResults} lastResults the results from the previous search. `null` if\n * it is the first search.\n * @example\n * helper.on('search', function(state, lastResults) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {SearchParameters} state the parameters used for this search\n * it is the first search.\n * @property {string} facet the facet searched into\n * @property {string} query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(state, facet, query) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {SearchParameters} state the parameters used for this search\n * it is the first search.\n * @example\n * helper.on('searchOnce', function(state) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {SearchResults} results the results received from Algolia\n * @property {SearchParameters} state the parameters used to query Algolia. Those might\n * be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(results, state) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {Error} error the error returned by the Algolia.\n * @example\n * helper.on('error', function(error) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (client.addAlgoliaAgent && !doesClientAgentContainsHelper(client)) {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, events.EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper}\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function() {\n  this._search();\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function() {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [callback] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {\n  var tempState = !options ? this.state : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', tempState);\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function(content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function(err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(function(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    return {\n      content: new SearchResults(tempState, content.results),\n      state: tempState,\n      _originalResponse: content\n    };\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  if (\n    !clientHasSFFV &&\n    typeof this.client.initIndex !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);\n\n  this._currentNbQueries++;\n  var self = this;\n\n  this.emit('searchForFacetValues', state, facet, query);\n  var searchForFacetValuesPromise = clientHasSFFV\n    ? this.client.searchForFacetValues([{indexName: state.index, params: algoliaQuery}])\n    : this.client.initIndex(state.index).searchForFacetValues(algoliaQuery);\n\n  return searchForFacetValuesPromise.then(function addIsRefined(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n    content = Array.isArray(content) ? content[0] : content;\n\n    content.facetHits = forEach(content.facetHits, function(f) {\n      f.isRefined = isDisjunctive ?\n        state.isDisjunctiveFacetRefined(facet, f.value) :\n        state.isFacetRefined(facet, f.value);\n    });\n\n    return content;\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function(q) {\n  this._change(this.state.setPage(0).setQuery(q));\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function(name) {\n  this._change(this.state.setPage(0).clearRefinements(name));\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function() {\n  this._change(this.state.setPage(0).clearTags());\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {\n  this._change(this.state.setPage(0).addDisjunctiveFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {\n  this._change(this.state.setPage(0).addHierarchicalFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {\n  this._change(this.state.setPage(0).addNumericRefinement(attribute, operator, value));\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {\n  this._change(this.state.setPage(0).addFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function() {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {\n  this._change(this.state.setPage(0).addExcludeRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function() {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function(tag) {\n  this._change(this.state.setPage(0).addTagRefinement(tag));\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {\n  this._change(this.state.setPage(0).removeNumericRefinement(attribute, operator, value));\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {\n  this._change(this.state.setPage(0).removeDisjunctiveFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {\n  this._change(this.state.setPage(0).removeHierarchicalFacetRefinement(facet));\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {\n  this._change(this.state.setPage(0).removeFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function() {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {\n  this._change(this.state.setPage(0).removeExcludeRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function() {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function(tag) {\n  this._change(this.state.setPage(0).removeTagRefinement(tag));\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {\n  this._change(this.state.setPage(0).toggleExcludeFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function() {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {\n  this._change(this.state.setPage(0).toggleFacetRefinement(facet, value));\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function() {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function(tag) {\n  this._change(this.state.setPage(0).toggleTagRefinement(tag));\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function() {\n  return this.setPage(this.state.page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper}\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function() {\n  return this.setPage(this.state.page - 1);\n};\n\n/**\n * @private\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change(this.state.setPage(page));\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function(name) {\n  this._change(this.state.setPage(0).setIndex(name));\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {\n  this._change(this.state.setPage(0).setQueryParameter(parameter, value));\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function(newState) {\n  this._change(SearchParameters.make(newState));\n  return this;\n};\n\n/**\n * Get the current search state stored in the helper. This object is immutable.\n * @param {string[]} [filters] optional filters to retrieve only a subset of the state\n * @return {SearchParameters|object} if filters is specified a plain object is\n * returned containing only the requested fields, otherwise return the unfiltered\n * state\n * @example\n * // Get the complete state as stored in the helper\n * helper.getState();\n * @example\n * // Get a part of the state with all the refinements on attributes and the query\n * helper.getState(['query', 'attribute:category']);\n */\nAlgoliaSearchHelper.prototype.getState = function(filters) {\n  if (filters === undefined) return this.state;\n  return this.state.filter(filters);\n};\n\n/**\n * DEPRECATED Get part of the state as a query string. By default, the output keys will not\n * be prefixed and will only take the applied refinements and the query.\n * @deprecated\n * @param {object} [options] May contain the following parameters :\n *\n * **filters** : possible values are all the keys of the [SearchParameters](#searchparameters), `index` for\n * the index, all the refinements with `attribute:*` or for some specific attributes with\n * `attribute:theAttribute`\n *\n * **prefix** : prefix in front of the keys\n *\n * **moreAttributes** : more values to be added in the query string. Those values\n *    won't be prefixed.\n * @return {string} the query string\n */\nAlgoliaSearchHelper.prototype.getStateAsQueryString = function getStateAsQueryString(options) {\n  var filters = options && options.filters || ['query', 'attribute:*'];\n  var partialState = this.getState(filters);\n\n  return url.getQueryStringFromState(partialState, options);\n};\n\n/**\n * DEPRECATED Read a query string and return an object containing the state. Use\n * url module.\n * @deprecated\n * @static\n * @param {string} queryString the query string that will be decoded\n * @param {object} options accepted options :\n *   - prefix : the prefix used for the saved attributes, you have to provide the\n *     same that was used for serialization\n * @return {object} partial search parameters object (same properties than in the\n * SearchParameters but not exhaustive)\n * @see {@link url#getStateFromQueryString}\n */\nAlgoliaSearchHelper.getConfigurationFromQueryString = url.getStateFromQueryString;\n\n/**\n * DEPRECATED Retrieve an object of all the properties that are not understandable as helper\n * parameters. Use url module.\n * @deprecated\n * @static\n * @param {string} queryString the query string to read\n * @param {object} options the options\n *   - prefixForParameters : prefix used for the helper configuration keys\n * @return {object} the object containing the parsed configuration that doesn't\n * to the helper\n */\nAlgoliaSearchHelper.getForeignConfigurationInQueryString = url.getUnrecognizedParametersInQueryString;\n\n/**\n * DEPRECATED Overrides part of the state with the properties stored in the provided query\n * string.\n * @deprecated\n * @param {string} queryString the query string containing the informations to url the state\n * @param {object} options optional parameters :\n *  - prefix : prefix used for the algolia parameters\n *  - triggerChange : if set to true the state update will trigger a change event\n */\nAlgoliaSearchHelper.prototype.setStateFromQueryString = function(queryString, options) {\n  var triggerChange = options && options.triggerChange || false;\n  var configuration = url.getStateFromQueryString(queryString, options);\n  var updatedState = this.state.setQueryParameters(configuration);\n\n  if (triggerChange) this.setState(updatedState);\n  else this.overrideStateWithoutTriggeringChangeEvent(updatedState);\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {\n  this.state = new SearchParameters(newState);\n  return this;\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isRefined = function(facet, value) {\n  if (this.state.isConjunctiveFacet(facet)) {\n    return this.state.isFacetRefined(facet, value);\n  } else if (this.state.isDisjunctiveFacet(facet)) {\n    return this.state.isDisjunctiveFacetRefined(facet, value);\n  }\n\n  throw new Error(facet +\n    ' is not properly defined in this helper configuration' +\n    '(use the facets or disjunctiveFacets keys to configure it)');\n};\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {\n  if (!isEmpty(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype.hasTag = function(tag) {\n  return this.state.isTagRefined(tag);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function() {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n\n/**\n * Get the name of the currently used index.\n * @return {string}\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function() {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function() {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get a parameter of the search by its name. It is possible that a parameter is directly\n * defined in the index dashboard, but it will be undefined using this method.\n *\n * The complete list of parameters is\n * available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters have their own API)\n * @param {string} parameterName the parameter name\n * @return {any} the parameter value\n * @example\n * var hitsPerPage = helper.getQueryParameter('hitsPerPage');\n */\nAlgoliaSearchHelper.prototype.getQueryParameter = function(parameterName) {\n  return this.state.getQueryParameter(parameterName);\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function(facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    forEach(conjRefinements, function(r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive'\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    forEach(excludeRefinements, function(r) {\n      refinements.push({\n        value: r,\n        type: 'exclude'\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);\n\n    forEach(disjRefinements, function(r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive'\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  forEach(numericRefinements, function(value, operator) {\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric'\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @return {undefined}\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function() {\n  var state = this.state;\n  var mainQueries = requestBuilder._getQueries(state.index, state);\n\n  var states = [{\n    state: state,\n    queriesCount: mainQueries.length,\n    helper: this\n  }];\n\n  this.emit('search', state, this.lastResults);\n\n  var derivedQueries = map(this.derivedHelpers, function(derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var queries = requestBuilder._getQueries(derivedState.index, derivedState);\n    states.push({\n      state: derivedState,\n      queriesCount: queries.length,\n      helper: derivedHelper\n    });\n    derivedHelper.emit('search', derivedState, derivedHelper.lastResults);\n    return queries;\n  });\n\n  var queries = mainQueries.concat(flatten(derivedQueries));\n  var queryId = this._queryId++;\n\n  this._currentNbQueries++;\n\n  try {\n    this.client.search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (err) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', err);\n  }\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}\n *  state state used for to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {\n  // FIXME remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n  forEach(states, function(s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);\n    helper.emit('result', formattedResponse, state);\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, err) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', err);\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {\n  return query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0;\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {\n  return this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0;\n};\n\nAlgoliaSearchHelper.prototype._change = function(newState) {\n  if (newState !== this.state) {\n    this.state = newState;\n    this.emit('change', this.state, this.lastResults);\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.clearCache = function() {\n  this.client.clearCache && this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.setClient = function(newClient) {\n  if (this.client === newClient) return this;\n\n  if (newClient.addAlgoliaAgent && !doesClientAgentContainsHelper(newClient)) {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch}\n */\nAlgoliaSearchHelper.prototype.getClient = function() {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper}\n */\nAlgoliaSearchHelper.prototype.derive = function(fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @return {undefined}\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function() {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\n\n/*\n * This function tests if the _ua parameter of the client\n * already contains the JS Helper UA\n */\nfunction doesClientAgentContainsHelper(client) {\n  // this relies on JS Client internal variable, this might break if implementation changes\n  var currentAgent = client._ua;\n  return !currentAgent ? false :\n    currentAgent.indexOf('JS Helper') !== -1;\n}\n\nmodule.exports = AlgoliaSearchHelper;\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\n\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(result) {\n *   console.log(result);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper}\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version.js');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\n/**\n * URL tools to generate query string and parse them from/into\n * SearchParameters\n * @member module:algoliasearchHelper.url\n * @type {object} {@link url}\n *\n */\nalgoliasearchHelper.url = require('./src/url');\n\nmodule.exports = algoliasearchHelper;\n","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { isEqual } from './utils';\n\nvar RoutingManager =\n/*#__PURE__*/\nfunction () {\n  function RoutingManager(_ref) {\n    var router = _ref.router,\n        stateMapping = _ref.stateMapping,\n        instantSearchInstance = _ref.instantSearchInstance;\n\n    _classCallCheck(this, RoutingManager);\n\n    _defineProperty(this, \"instantSearchInstance\", void 0);\n\n    _defineProperty(this, \"router\", void 0);\n\n    _defineProperty(this, \"stateMapping\", void 0);\n\n    _defineProperty(this, \"isFirstRender\", true);\n\n    _defineProperty(this, \"currentUiState\", void 0);\n\n    _defineProperty(this, \"initState\", void 0);\n\n    _defineProperty(this, \"renderURLFromState\", void 0);\n\n    this.router = router;\n    this.stateMapping = stateMapping;\n    this.instantSearchInstance = instantSearchInstance;\n    this.currentUiState = this.stateMapping.routeToState(this.router.read());\n  }\n\n  _createClass(RoutingManager, [{\n    key: \"getAllSearchParameters\",\n    value: function getAllSearchParameters(_ref2) {\n      var currentSearchParameters = _ref2.currentSearchParameters,\n          uiState = _ref2.uiState;\n      var widgets = this.instantSearchInstance.widgets;\n      return widgets.reduce(function (parameters, widget) {\n        if (!widget.getWidgetSearchParameters) {\n          return parameters;\n        }\n\n        return widget.getWidgetSearchParameters(parameters, {\n          uiState: uiState\n        });\n      }, currentSearchParameters);\n    }\n  }, {\n    key: \"getAllUiStates\",\n    value: function getAllUiStates(_ref3) {\n      var searchParameters = _ref3.searchParameters;\n      var widgets = this.instantSearchInstance.widgets;\n      var helper = this.instantSearchInstance.helper;\n      return widgets.reduce(function (state, widget) {\n        if (!widget.getWidgetState) {\n          return state;\n        }\n\n        return widget.getWidgetState(state, {\n          helper: helper,\n          searchParameters: searchParameters\n        });\n      }, {});\n    }\n  }, {\n    key: \"setupRouting\",\n    value: function setupRouting(state) {\n      var _this = this;\n\n      var helper = this.instantSearchInstance.helper;\n      this.router.onUpdate(function (route) {\n        var nextUiState = _this.stateMapping.routeToState(route);\n\n        var widgetsUiState = _this.getAllUiStates({\n          searchParameters: helper.state\n        });\n\n        if (isEqual(nextUiState, widgetsUiState)) {\n          return;\n        }\n\n        _this.currentUiState = nextUiState;\n\n        var searchParameters = _this.getAllSearchParameters({\n          currentSearchParameters: state,\n          uiState: _this.currentUiState\n        });\n\n        helper.overrideStateWithoutTriggeringChangeEvent(searchParameters).search();\n      });\n\n      this.renderURLFromState = function (searchParameters) {\n        _this.currentUiState = _this.getAllUiStates({\n          searchParameters: searchParameters\n        });\n\n        var route = _this.stateMapping.stateToRoute(_this.currentUiState);\n\n        _this.router.write(route);\n      };\n\n      helper.on('change', this.renderURLFromState); // Compare initial state and first render state to see if the query has been\n      // changed by the `searchFunction`. It's required because the helper of the\n      // `searchFunction` does not trigger change event (not the same instance).\n\n      var firstRenderState = this.getAllUiStates({\n        searchParameters: state\n      });\n\n      if (!isEqual(this.initState, firstRenderState)) {\n        // Force update the URL, if the state has changed since the initial read.\n        // We do this in order to make the URL update when there is `searchFunction`\n        // that prevents the search of the initial rendering.\n        // See: https://github.com/algolia/instantsearch.js/issues/2523#issuecomment-339356157\n        this.currentUiState = firstRenderState;\n        var route = this.stateMapping.stateToRoute(this.currentUiState);\n        this.router.write(route);\n      }\n    }\n  }, {\n    key: \"getConfiguration\",\n    value: function getConfiguration(currentConfiguration) {\n      // We have to create a `SearchParameters` because `getAllSearchParameters`\n      // expects an instance of `SearchParameters` and not a plain object.\n      var currentSearchParameters = algoliasearchHelper.SearchParameters.make(currentConfiguration);\n      return _objectSpread({}, this.getAllSearchParameters({\n        uiState: this.currentUiState,\n        currentSearchParameters: currentSearchParameters\n      }));\n    }\n  }, {\n    key: \"init\",\n    value: function init(_ref4) {\n      var state = _ref4.state;\n      // Store the initial state from the storage to compare it with the state on next renders\n      // in case the `searchFunction` has modified it.\n      this.initState = this.getAllUiStates({\n        searchParameters: state\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render(_ref5) {\n      var state = _ref5.state;\n\n      if (this.isFirstRender) {\n        this.isFirstRender = false;\n        this.setupRouting(state);\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose(_ref6) {\n      var helper = _ref6.helper,\n          state = _ref6.state;\n\n      if (this.renderURLFromState) {\n        this.instantSearchInstance.helper.removeListener('change', this.renderURLFromState);\n      }\n\n      if (this.router.dispose) {\n        this.router.dispose({\n          helper: helper,\n          state: state\n        });\n      }\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL(state) {\n      var uiState = this.getAllUiStates({\n        searchParameters: state\n      });\n      var route = this.stateMapping.stateToRoute(uiState);\n      return this.router.createURL(route);\n    }\n  }, {\n    key: \"onHistoryChange\",\n    value: function onHistoryChange(callback) {\n      var _this2 = this;\n\n      var helper = this.instantSearchInstance.helper;\n      this.router.onUpdate(function (route) {\n        var nextUiState = _this2.stateMapping.routeToState(route);\n\n        var widgetsUiState = _this2.getAllUiStates({\n          searchParameters: helper.state\n        });\n\n        if (isEqual(nextUiState, widgetsUiState)) {\n          return;\n        }\n\n        _this2.currentUiState = nextUiState;\n\n        var searchParameters = _this2.getAllSearchParameters({\n          currentSearchParameters: helper.state,\n          uiState: _this2.currentUiState\n        });\n\n        callback(_objectSpread({}, searchParameters));\n      });\n    }\n  }]);\n\n  return RoutingManager;\n}();\n\nexport default RoutingManager;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SimpleUIStateMapping =\n/*#__PURE__*/\nfunction () {\n  function SimpleUIStateMapping() {\n    _classCallCheck(this, SimpleUIStateMapping);\n  }\n\n  _createClass(SimpleUIStateMapping, [{\n    key: \"stateToRoute\",\n    value: function stateToRoute(uiState) {\n      return uiState;\n    }\n  }, {\n    key: \"routeToState\",\n    value: function routeToState(routeState) {\n      return routeState;\n    }\n  }]);\n\n  return SimpleUIStateMapping;\n}();\n\nexport default function () {\n  return new SimpleUIStateMapping();\n}","function isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport qs from 'qs';\n\nvar defaultCreateURL = function defaultCreateURL(_ref) {\n  var qsModule = _ref.qsModule,\n      routeState = _ref.routeState,\n      location = _ref.location;\n  var protocol = location.protocol,\n      hostname = location.hostname,\n      _location$port = location.port,\n      port = _location$port === void 0 ? '' : _location$port,\n      pathname = location.pathname,\n      hash = location.hash;\n  var queryString = qsModule.stringify(routeState);\n  var portWithPrefix = port === '' ? '' : \":\".concat(port); // IE <= 11 has no proper `location.origin` so we cannot rely on it.\n\n  if (!routeState || Object.keys(routeState).length === 0) {\n    return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname).concat(hash);\n  }\n\n  return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname, \"?\").concat(queryString).concat(hash);\n};\n\nvar defaultParseURL = function defaultParseURL(_ref2) {\n  var qsModule = _ref2.qsModule,\n      location = _ref2.location;\n  // `qs` by default converts arrays with more than 20 items to an object.\n  // We want to avoid this because the data structure manipulated can therefore vary.\n  // Setting the limit to `100` seems a good number because the engine's default is 100\n  // (it can go up to 1000 but it is very unlikely to select more than 100 items in the UI).\n  //\n  // Using an `arrayLimit` of `n` allows `n + 1` items.\n  //\n  // See:\n  //   - https://github.com/ljharb/qs#parsing-arrays\n  //   - https://www.algolia.com/doc/api-reference/api-parameters/maxValuesPerFacet/\n  return qsModule.parse(location.search.slice(1), {\n    arrayLimit: 99\n  });\n};\n\nvar setWindowTitle = function setWindowTitle(title) {\n  if (title) {\n    window.document.title = title;\n  }\n};\n\nvar BrowserHistory =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Initializes a new storage provider that syncs the search state to the URL\n   * using web APIs (`window.location.pushState` and `onpopstate` event).\n   */\n  function BrowserHistory() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        windowTitle = _ref3.windowTitle,\n        _ref3$writeDelay = _ref3.writeDelay,\n        writeDelay = _ref3$writeDelay === void 0 ? 400 : _ref3$writeDelay,\n        _ref3$createURL = _ref3.createURL,\n        createURL = _ref3$createURL === void 0 ? defaultCreateURL : _ref3$createURL,\n        _ref3$parseURL = _ref3.parseURL,\n        parseURL = _ref3$parseURL === void 0 ? defaultParseURL : _ref3$parseURL;\n\n    _classCallCheck(this, BrowserHistory);\n\n    _defineProperty(this, \"windowTitle\", void 0);\n\n    _defineProperty(this, \"writeDelay\", void 0);\n\n    _defineProperty(this, \"_createURL\", void 0);\n\n    _defineProperty(this, \"parseURL\", void 0);\n\n    _defineProperty(this, \"writeTimer\", void 0);\n\n    this.windowTitle = windowTitle;\n    this.writeTimer = undefined;\n    this.writeDelay = writeDelay;\n    this._createURL = createURL;\n    this.parseURL = parseURL;\n    var title = this.windowTitle && this.windowTitle(this.read());\n    setWindowTitle(title);\n  }\n  /**\n   * Reads the URL and returns a syncable UI search state.\n   */\n\n\n  _createClass(BrowserHistory, [{\n    key: \"read\",\n    value: function read() {\n      return this.parseURL({\n        qsModule: qs,\n        location: window.location\n      });\n    }\n    /**\n     * Pushes a search state into the URL.\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(routeState) {\n      var _this = this;\n\n      var url = this.createURL(routeState);\n      var title = this.windowTitle && this.windowTitle(routeState);\n\n      if (this.writeTimer) {\n        window.clearTimeout(this.writeTimer);\n      }\n\n      this.writeTimer = window.setTimeout(function () {\n        setWindowTitle(title);\n        window.history.pushState(routeState, title || '', url);\n        _this.writeTimer = undefined;\n      }, this.writeDelay);\n    }\n    /**\n     * Sets a callback on the `onpopstate` event of the history API of the current page.\n     * It enables the URL sync to keep track of the changes.\n     */\n\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(callback) {\n      var _this2 = this;\n\n      this._onPopState = function (event) {\n        if (_this2.writeTimer) {\n          window.clearTimeout(_this2.writeTimer);\n          _this2.writeTimer = undefined;\n        }\n\n        var routeState = event.state; // At initial load, the state is read from the URL without update.\n        // Therefore the state object is not available.\n        // In this case, we fallback and read the URL.\n\n        if (!routeState) {\n          callback(_this2.read());\n        } else {\n          callback(routeState);\n        }\n      };\n\n      window.addEventListener('popstate', this._onPopState);\n    }\n    /**\n     * Creates a complete URL from a given syncable UI state.\n     *\n     * It always generates the full URL, not a relative one.\n     * This allows to handle cases like using a <base href>.\n     * See: https://github.com/algolia/instantsearch.js/issues/790\n     */\n\n  }, {\n    key: \"createURL\",\n    value: function createURL(routeState) {\n      return this._createURL({\n        qsModule: qs,\n        routeState: routeState,\n        location: window.location\n      });\n    }\n    /**\n     * Removes the event listener and cleans up the URL.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this._onPopState) {\n        window.removeEventListener('popstate', this._onPopState);\n      }\n\n      if (this.writeTimer) {\n        window.clearTimeout(this.writeTimer);\n      }\n\n      this.write({});\n    }\n  }]);\n\n  return BrowserHistory;\n}();\n\nexport default function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return _construct(BrowserHistory, args);\n}","export default '3.6.0';","var NAMESPACE = 'ais';\nexport var component = function component(componentName) {\n  return function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        descendantName = _ref.descendantName,\n        modifierName = _ref.modifierName;\n\n    var descendent = descendantName ? \"-\".concat(descendantName) : '';\n    var modifier = modifierName ? \"--\".concat(modifierName) : '';\n    return \"\".concat(NAMESPACE, \"-\").concat(componentName).concat(descendent).concat(modifier);\n  };\n};","import { getPropertyByPath } from '../lib/utils';\nimport { TAG_REPLACEMENT } from '../lib/escape-highlight';\nimport { component } from '../lib/suit';\nvar suit = component('Highlight');\nexport default function highlight(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit;\n  var attributeValue = getPropertyByPath(hit, \"_highlightResult.\".concat(attribute, \".value\")) || '';\n  var className = suit({\n    descendantName: 'highlighted'\n  });\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { getPropertyByPath } from '../lib/utils';\nimport { TAG_REPLACEMENT } from '../lib/escape-highlight';\nimport { component } from '../lib/suit';\nvar suit = component('Snippet');\nexport default function snippet(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit;\n  var attributeValue = getPropertyByPath(hit, \"_snippetResult.\".concat(attribute, \".value\")) || '';\n  var className = suit({\n    descendantName: 'highlighted'\n  });\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { highlight as _highlight, snippet as _snippet } from '../helpers';\nexport default function hoganHelpers(_ref) {\n  var numberLocale = _ref.numberLocale;\n  return {\n    formatNumber: function formatNumber(value, render) {\n      return Number(render(value)).toLocaleString(numberLocale);\n    },\n    highlight: function highlight(options, render) {\n      try {\n        var highlightOptions = JSON.parse(options);\n        return render(_highlight(_objectSpread({}, highlightOptions, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe highlight helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    snippet: function snippet(options, render) {\n      try {\n        var snippetOptions = JSON.parse(options);\n        return render(_snippet(_objectSpread({}, snippetOptions, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe snippet helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    }\n  };\n}","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport EventEmitter from 'events';\nimport RoutingManager from './RoutingManager';\nimport simpleMapping from './stateMappings/simple';\nimport historyRouter from './routers/history';\nimport version from './version';\nimport createHelpers from './createHelpers';\nimport { createDocumentationMessageGenerator, findIndex, isPlainObject, mergeDeep, noop } from './utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\nvar ROUTING_DEFAULT_OPTIONS = {\n  stateMapping: simpleMapping(),\n  router: historyRouter()\n};\n\nfunction defaultCreateURL() {\n  return '#';\n}\n/**\n * Widgets are the building blocks of InstantSearch.js. Any\n * valid widget must have at least a `render` or a `init` function.\n * @typedef {Object} Widget\n * @property {function} [render] Called after each search response has been received\n * @property {function} [getConfiguration] Let the widget update the configuration\n * of the search with new parameters\n * @property {function} [init] Called once before the first search\n */\n\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * @fires Instantsearch#render This event is triggered each time a render is done\n */\n\n\nvar InstantSearch =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n\n  function InstantSearch(options) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InstantSearch).call(this));\n    var _options$indexName = options.indexName,\n        indexName = _options$indexName === void 0 ? null : _options$indexName,\n        numberLocale = options.numberLocale,\n        _options$searchParame = options.searchParameters,\n        searchParameters = _options$searchParame === void 0 ? {} : _options$searchParame,\n        _options$routing = options.routing,\n        routing = _options$routing === void 0 ? null : _options$routing,\n        searchFunction = options.searchFunction,\n        _options$stalledSearc = options.stalledSearchDelay,\n        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n        _options$searchClient = options.searchClient,\n        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n        _options$insightsClie = options.insightsClient,\n        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie;\n\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n\n    if (typeof options.urlSync !== 'undefined') {\n      throw new Error(withUsage('The `urlSync` option was removed in InstantSearch.js 3. You may want to use the `routing` option.'));\n    }\n\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error('The provided `insightsClient` must be a function.');\n    }\n\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.helper = null;\n    _this.indexName = indexName;\n    _this.searchParameters = _objectSpread({}, searchParameters, {\n      index: indexName\n    });\n    _this.widgets = [];\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n\n    if (searchFunction) {\n      _this._searchFunction = searchFunction;\n    }\n\n    if (routing === true) _this.routing = ROUTING_DEFAULT_OPTIONS;else if (isPlainObject(routing)) _this.routing = _objectSpread({}, ROUTING_DEFAULT_OPTIONS, {}, routing);\n    return _this;\n  }\n  /**\n   * Adds a widget. This can be done before and after InstantSearch has been started. Adding a\n   * widget after InstantSearch started is considered **EXPERIMENTAL** and therefore\n   * it is possibly buggy, if you find anything please\n   * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20hot%20addWidget).\n   * @param  {Widget} widget The widget to add to InstantSearch. Widgets are simple objects\n   * that have methods that map the search life cycle in a UI perspective. Usually widgets are\n   * created by [widget factories](widgets.html) like the one provided with InstantSearch.js.\n   * @return {undefined} This method does not return anything\n   */\n\n\n  _createClass(InstantSearch, [{\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      this.addWidgets([widget]);\n    }\n    /**\n     * Adds multiple widgets. This can be done before and after the InstantSearch has been started. This feature\n     * is considered **EXPERIMENTAL** and therefore it is possibly buggy, if you find anything please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20addWidgets).\n     * @param  {Widget[]} widgets The array of widgets to add to InstantSearch.\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      var _this2 = this;\n\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      } // The routing manager widget is always added manually at the last position.\n      // By removing it from the last position and adding it back after, we ensure\n      // it keeps this position.\n      // fixes #3148\n\n\n      var lastWidget = this.widgets.pop();\n      widgets.forEach(function (widget) {\n        // Add the widget to the list of widget\n        if (widget.render === undefined && widget.init === undefined) {\n          throw new Error(\"The widget definition expects a `render` and/or an `init` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/widgets/create-your-own-widgets/js/\");\n        }\n\n        _this2.widgets.push(widget);\n      }); // Second part of the fix for #3148\n\n      if (lastWidget) this.widgets.push(lastWidget); // Init the widget directly if instantsearch has been already started\n\n      if (this.started && Boolean(widgets.length)) {\n        this.searchParameters = this.widgets.reduce(enhanceConfiguration, _objectSpread({}, this.helper.state));\n        this.helper.setState(this.searchParameters);\n        widgets.forEach(function (widget) {\n          if (widget.init) {\n            widget.init({\n              state: _this2.helper.state,\n              helper: _this2.helper,\n              templatesConfig: _this2.templatesConfig,\n              createURL: _this2._createAbsoluteURL,\n              onHistoryChange: _this2._onHistoryChange,\n              instantSearchInstance: _this2\n            });\n          }\n        });\n        this.helper.search();\n      }\n    }\n    /**\n     * Removes a widget. This can be done after the InstantSearch has been started. This feature\n     * is considered **EXPERIMENTAL** and therefore it is possibly buggy, if you find anything please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20removeWidget).\n     * @param  {Widget} widget The widget instance to remove from InstantSearch. This widget must implement a `dispose()` method in order to be gracefully removed.\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      this.removeWidgets([widget]);\n    }\n    /**\n     * Removes multiple widgets. This can be done only after the InstantSearch has been started. This feature\n     * is considered **EXPERIMENTAL** and therefore it is possibly buggy, if you find anything please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20addWidgets).\n     * @param  {Widget[]} widgets Array of widgets instances to remove from InstantSearch.\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      var _this3 = this;\n\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n\n      widgets.forEach(function (widget) {\n        if (!_this3.widgets.includes(widget) || typeof widget.dispose !== 'function') {\n          throw new Error(\"The `dispose` method is required to remove the widget.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/widgets/create-your-own-widgets/js/#the-widget-lifecycle-and-api\");\n        }\n\n        _this3.widgets = _this3.widgets.filter(function (w) {\n          return w !== widget;\n        });\n        var nextState = widget.dispose({\n          helper: _this3.helper,\n          state: _this3.helper.state\n        }); // re-compute remaining widgets to the state\n        // in a case two widgets were using the same configuration but we removed one\n\n        if (nextState) {\n          _this3.searchParameters = _this3.widgets.reduce(enhanceConfiguration, _objectSpread({}, nextState));\n\n          _this3.helper.setState(_this3.searchParameters);\n        }\n      }); // If there's multiple call to `removeWidget()` let's wait until they are all made\n      // and then check for widgets.length & make a search on next tick\n      //\n      // This solves an issue where you unmount a page and removing widget by widget\n\n      setTimeout(function () {\n        // no need to trigger a search if we don't have any widgets left\n        if (_this3.widgets.length > 0) {\n          _this3.helper.search();\n        }\n      }, 0);\n    }\n    /**\n     * Clears the cached answers from Algolia and triggers a new search.\n     *\n     * @return {undefined} Does not return anything\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (this.helper) {\n        this.helper.clearCache().search();\n      }\n    }\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     *\n     * @return {undefined} Does not return anything\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this4 = this;\n\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      }\n\n      if (this.routing) {\n        var routingManager = new RoutingManager(_objectSpread({}, this.routing, {\n          instantSearchInstance: this\n        }));\n        this._onHistoryChange = routingManager.onHistoryChange.bind(routingManager);\n        this._createURL = routingManager.createURL.bind(routingManager);\n        this._createAbsoluteURL = this._createURL;\n        this.widgets.push(routingManager);\n      } else {\n        this._createURL = defaultCreateURL;\n        this._createAbsoluteURL = defaultCreateURL;\n        this._onHistoryChange = noop;\n      }\n\n      this.searchParameters = this.widgets.reduce(enhanceConfiguration, this.searchParameters);\n      var helper = algoliasearchHelper(this.client, this.searchParameters.index || this.indexName, this.searchParameters);\n\n      if (this._searchFunction) {\n        this._mainHelperSearch = helper.search.bind(helper);\n\n        helper.search = function () {\n          var helperSearchFunction = algoliasearchHelper({\n            search: function search() {\n              return new Promise(noop);\n            }\n          }, helper.state.index, helper.state);\n          helperSearchFunction.once('search', function (state) {\n            helper.overrideStateWithoutTriggeringChangeEvent(state);\n\n            _this4._mainHelperSearch();\n          });\n\n          _this4._searchFunction(helperSearchFunction);\n        };\n      }\n\n      this.helper = helper;\n\n      this._init(helper.state, this.helper);\n\n      this.helper.on('result', this._render.bind(this, this.helper));\n      this.helper.on('error', function (e) {\n        _this4.emit('error', e);\n      });\n      this._searchStalledTimer = null;\n      this._isSearchStalled = true;\n      this.helper.search();\n      this.helper.on('search', function () {\n        if (!_this4._isSearchStalled && !_this4._searchStalledTimer) {\n          _this4._searchStalledTimer = setTimeout(function () {\n            _this4._isSearchStalled = true;\n\n            _this4._render(_this4.helper, _this4.helper.lastResults, _this4.helper.lastResults._state);\n          }, _this4._stalledSearchDelay);\n        }\n      }); // track we started the search if we add more widgets,\n      // to init them directly after add\n\n      this.started = true;\n    }\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.removeWidgets(this.widgets); // You can not start an instance two times, therefore a disposed instance needs to set started as false\n      // otherwise this can not be restarted at a later point.\n\n      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n\n      this.helper.removeAllListeners();\n      this.helper = null;\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL(params) {\n      if (!this._createURL) {\n        throw new Error('The `start` method needs to be called before `createURL`.');\n      }\n\n      return this._createURL(this.helper.state.setQueryParameters(params));\n    }\n  }, {\n    key: \"_render\",\n    value: function _render(helper, results, state) {\n      var _this5 = this;\n\n      if (!this.helper.hasPendingRequests()) {\n        clearTimeout(this._searchStalledTimer);\n        this._searchStalledTimer = null;\n        this._isSearchStalled = false;\n      }\n\n      this.widgets.forEach(function (widget) {\n        if (!widget.render) {\n          return;\n        }\n\n        widget.render({\n          templatesConfig: _this5.templatesConfig,\n          results: results,\n          state: state,\n          helper: helper,\n          createURL: _this5._createAbsoluteURL,\n          instantSearchInstance: _this5,\n          searchMetadata: {\n            isSearchStalled: _this5._isSearchStalled\n          }\n        });\n      });\n      /**\n       * Render is triggered when the rendering of the widgets has been completed\n       * after a search.\n       * @event InstantSearch#render\n       */\n\n      this.emit('render');\n    }\n  }, {\n    key: \"_init\",\n    value: function _init(state, helper) {\n      var _this6 = this;\n\n      this.widgets.forEach(function (widget) {\n        if (widget.init) {\n          widget.init({\n            state: state,\n            helper: helper,\n            templatesConfig: _this6.templatesConfig,\n            createURL: _this6._createAbsoluteURL,\n            onHistoryChange: _this6._onHistoryChange,\n            instantSearchInstance: _this6\n          });\n        }\n      });\n    }\n  }]);\n\n  return InstantSearch;\n}(EventEmitter);\n\nexport function enhanceConfiguration(configuration, widgetDefinition) {\n  if (!widgetDefinition.getConfiguration) {\n    return configuration;\n  } // Get the relevant partial configuration asked by the widget\n\n\n  var partialConfiguration = widgetDefinition.getConfiguration(configuration);\n\n  if (!partialConfiguration) {\n    return configuration;\n  }\n\n  if (!partialConfiguration.hierarchicalFacets) {\n    return mergeDeep(configuration, partialConfiguration);\n  }\n\n  var hierarchicalFacets = partialConfiguration.hierarchicalFacets,\n      partialWithoutHierarchcialFacets = _objectWithoutProperties(partialConfiguration, [\"hierarchicalFacets\"]); // The `mergeDeep` function uses a `uniq` function under the hood, but the\n  // implementation does not support arrays of objects (we also had the issue\n  // with the Lodash version). The `hierarchicalFacets` attribute is an array\n  // of objects, which means that this attribute is never deduplicated. It\n  // becomes problematic when widgets are frequently added/removed, since the\n  // function `enhanceConfiguration` is called at each operation.\n  // https://github.com/algolia/instantsearch.js/issues/3278\n\n\n  var configurationWithHierarchicalFacets = _objectSpread({}, configuration, {\n    hierarchicalFacets: hierarchicalFacets.reduce(function (facets, facet) {\n      var index = findIndex(facets, function (_) {\n        return _.name === facet.name;\n      });\n\n      if (index === -1) {\n        return facets.concat(facet);\n      }\n\n      var nextFacets = facets.slice();\n      nextFacets.splice(index, 1, facet);\n      return nextFacets;\n    }, configuration.hierarchicalFacets || [])\n  });\n\n  return mergeDeep(configurationWithHierarchicalFacets, partialWithoutHierarchcialFacets);\n}\nexport default InstantSearch;","// We aren't using the native `Array.prototype.findIndex` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `findIndex` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.findIndex` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\nfunction findIndex(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nexport default findIndex;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createDocumentationMessageGenerator, noop, isPlainObject } from '../../lib/utils';\nimport { enhanceConfiguration } from '../../lib/InstantSearch';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'configure',\n  connector: true\n});\n/**\n * @typedef {Object} CustomConfigureWidgetOptions\n * @property {Object} searchParameters The Configure widget options are search parameters\n */\n\n/**\n * @typedef {Object} ConfigureRenderingOptions\n * @property {function(searchParameters: Object)} refine Sets new `searchParameters` and trigger a search.\n * @property {Object} widgetParams All original `CustomConfigureWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * The **Configure** connector provides the logic to build a custom widget\n * that will give you ability to override or force some search parameters sent to Algolia API.\n *\n * @type {Connector}\n * @param {function(ConfigureRenderingOptions)} renderFn Rendering function for the custom **Configure** Widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomConfigureWidgetOptions)} Re-usable widget factory for a custom **Configure** widget.\n */\n\nexport default function connectConfigure() {\n  var renderFn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!isPlainObject(widgetParams.searchParameters)) {\n      throw new Error(withUsage('The `searchParameters` option expects an object.'));\n    }\n\n    return {\n      getConfiguration: function getConfiguration() {\n        return widgetParams.searchParameters;\n      },\n      init: function init(_ref) {\n        var helper = _ref.helper;\n        this._refine = this.refine(helper);\n        renderFn({\n          refine: this._refine,\n          widgetParams: widgetParams\n        }, true);\n      },\n      refine: function refine(helper) {\n        var _this = this;\n\n        return function (searchParameters) {\n          // merge new `searchParameters` with the ones set from other widgets\n          var actualState = _this.removeSearchParameters(helper.state);\n\n          var nextSearchParameters = enhanceConfiguration(_objectSpread({}, actualState), {\n            getConfiguration: function getConfiguration() {\n              return searchParameters;\n            }\n          }); // trigger a search with the new merged searchParameters\n\n          helper.setState(nextSearchParameters).search(); // update original `widgetParams.searchParameters` to the new refined one\n\n          widgetParams.searchParameters = searchParameters;\n        };\n      },\n      render: function render() {\n        renderFn({\n          refine: this._refine,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref2) {\n        var state = _ref2.state;\n        unmountFn();\n        return this.removeSearchParameters(state);\n      },\n      removeSearchParameters: function removeSearchParameters(state) {\n        // widgetParams are assumed 'controlled',\n        // so they override whatever other widgets give the state\n        return state.mutateMe(function (mutableState) {\n          Object.keys(widgetParams.searchParameters).forEach(function (key) {\n            delete mutableState[key];\n          });\n        });\n      }\n    };\n  };\n}","import escapeHits, { TAG_PLACEHOLDER } from '../../lib/escape-highlight';\nimport { checkRendering, createDocumentationMessageGenerator, find, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'autocomplete',\n  connector: true\n});\n/**\n * @typedef {Object} Index\n * @property {string} index Name of the index.\n * @property {string} label Label of the index (for display purpose).\n * @property {Object[]} hits The hits resolved from the index matching the query.\n * @property {Object} results The full results object from Algolia API.\n */\n\n/**\n * @typedef {Object} AutocompleteRenderingOptions\n * @property {Index[]} indices The indices you provided with their hits and results and the main index as first position.\n * @property {function(string)} refine Search into the indices with the query provided.\n * @property {string} currentRefinement The actual value of the query.\n * @property {Object} widgetParams All original widget options forwarded to the `renderFn`.\n */\n\n/**\n * @typedef {Object} CustomAutocompleteWidgetOptions\n * @property {{value: string, label: string}[]} [indices = []] Name of the others indices to search into.\n * @property {boolean} [escapeHTML = true] If true, escape HTML tags from `hits[i]._highlightResult`.\n */\n\n/**\n * **Autocomplete** connector provides the logic to build a widget that will give the user the ability to search into multiple indices.\n *\n * This connector provides a `refine()` function to search for a query and a `currentRefinement` as the current query used to search.\n * @type {Connector}\n * @param {function(AutocompleteRenderingOptions, boolean)} renderFn Rendering function for the custom **Autocomplete** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomAutocompleteWidgetOptions)} Re-usable widget factory for a custom **Autocomplete** widget.\n */\n\nexport default function connectAutocomplete(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _widgetParams$escapeH = widgetParams.escapeHTML,\n        escapeHTML = _widgetParams$escapeH === void 0 ? true : _widgetParams$escapeH,\n        _widgetParams$indices = widgetParams.indices,\n        indices = _widgetParams$indices === void 0 ? [] : _widgetParams$indices; // user passed a wrong `indices` option type\n\n    if (!Array.isArray(indices)) {\n      throw new Error(withUsage('The `indices` option expects an array of objects.'));\n    }\n\n    return {\n      getConfiguration: function getConfiguration() {\n        return escapeHTML ? TAG_PLACEHOLDER : undefined;\n      },\n      init: function init(_ref) {\n        var _this = this;\n\n        var instantSearchInstance = _ref.instantSearchInstance,\n            helper = _ref.helper;\n        this._refine = this.refine(helper);\n        this.indices = [{\n          helper: helper,\n          label: 'primary',\n          index: helper.getIndex(),\n          results: undefined,\n          hits: []\n        }]; // add additionnal indices into `this.indices`\n\n        indices.forEach(function (_ref2) {\n          var label = _ref2.label,\n              value = _ref2.value;\n          var derivedHelper = helper.derive(function (searchParameters) {\n            return searchParameters.setIndex(value);\n          });\n\n          _this.indices.push({\n            label: label,\n            index: value,\n            helper: derivedHelper,\n            results: undefined,\n            hits: []\n          }); // update results then trigger render after a search from any helper\n\n\n          derivedHelper.on('result', function (results) {\n            return _this.saveResults({\n              results: results,\n              label: label\n            });\n          });\n        });\n        this.instantSearchInstance = instantSearchInstance;\n        this.renderWithAllIndices({\n          isFirstRendering: true\n        });\n      },\n      saveResults: function saveResults(_ref3) {\n        var results = _ref3.results,\n            label = _ref3.label;\n        var derivedIndex = find(this.indices, function (i) {\n          return i.label === label;\n        });\n\n        if (escapeHTML && results && results.hits && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n\n        derivedIndex.results = results;\n        derivedIndex.hits = results && results.hits && Array.isArray(results.hits) ? results.hits : [];\n        this.renderWithAllIndices();\n      },\n      refine: function refine(helper) {\n        return function (query) {\n          return helper.setQuery(query).search();\n        };\n      },\n      render: function render(_ref4) {\n        var results = _ref4.results;\n        this.saveResults({\n          results: results,\n          label: this.indices[0].label\n        });\n      },\n      renderWithAllIndices: function renderWithAllIndices() {\n        var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            _ref5$isFirstRenderin = _ref5.isFirstRendering,\n            isFirstRendering = _ref5$isFirstRenderin === void 0 ? false : _ref5$isFirstRenderin;\n\n        var currentRefinement = this.indices[0].helper.state.query;\n        renderFn({\n          widgetParams: widgetParams,\n          currentRefinement: currentRefinement,\n          // we do not want to provide the `helper` to the end-user\n          indices: this.indices.map(function (_ref6) {\n            var index = _ref6.index,\n                label = _ref6.label,\n                hits = _ref6.hits,\n                results = _ref6.results;\n            return {\n              index: index,\n              label: label,\n              hits: hits,\n              results: results\n            };\n          }),\n          instantSearchInstance: this.instantSearchInstance,\n          refine: this._refine\n        }, isFirstRendering);\n      },\n      dispose: function dispose() {\n        // detach every derived indices from the main helper instance\n        this.indices.slice(1).forEach(function (_ref7) {\n          var helper = _ref7.helper;\n          return helper.detach();\n        });\n        unmountFn();\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport { checkRendering, createDocumentationMessageGenerator, warning, getRefinements, isEqual, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'query-rules',\n  connector: true\n});\n\nfunction hasStateRefinements(state) {\n  return [state.disjunctiveFacetsRefinements, state.facetsRefinements, state.hierarchicalFacetsRefinements, state.numericRefinements].some(function (refinement) {\n    return Boolean(refinement && Object.keys(refinement).length > 0);\n  });\n} // A context rule must consist only of alphanumeric characters, hyphens, and underscores.\n// See https://www.algolia.com/doc/guides/managing-results/refine-results/merchandising-and-promoting/in-depth/implementing-query-rules/#context\n\n\nfunction escapeRuleContext(ruleName) {\n  return ruleName.replace(/[^a-z0-9-_]+/gi, '_');\n}\n\nfunction getRuleContextsFromTrackedFilters(_ref) {\n  var helper = _ref.helper,\n      sharedHelperState = _ref.sharedHelperState,\n      trackedFilters = _ref.trackedFilters;\n  var ruleContexts = Object.keys(trackedFilters).reduce(function (facets, facetName) {\n    var facetRefinements = getRefinements(helper.lastResults || {}, sharedHelperState).filter(function (refinement) {\n      return refinement.attributeName === facetName;\n    }).map(function (refinement) {\n      return refinement.numericValue || refinement.name;\n    });\n    var getTrackedFacetValues = trackedFilters[facetName];\n    var trackedFacetValues = getTrackedFacetValues(facetRefinements);\n    return [].concat(_toConsumableArray(facets), _toConsumableArray(facetRefinements.filter(function (facetRefinement) {\n      return trackedFacetValues.includes(facetRefinement);\n    }).map(function (facetValue) {\n      return escapeRuleContext(\"ais-\".concat(facetName, \"-\").concat(facetValue));\n    })));\n  }, []);\n  return ruleContexts;\n}\n\nfunction applyRuleContexts(sharedHelperState) {\n  var helper = this.helper,\n      initialRuleContexts = this.initialRuleContexts,\n      trackedFilters = this.trackedFilters,\n      transformRuleContexts = this.transformRuleContexts;\n  var previousRuleContexts = sharedHelperState.ruleContexts || [];\n  var newRuleContexts = getRuleContextsFromTrackedFilters({\n    helper: helper,\n    sharedHelperState: sharedHelperState,\n    trackedFilters: trackedFilters\n  });\n  var nextRuleContexts = [].concat(_toConsumableArray(initialRuleContexts), _toConsumableArray(newRuleContexts));\n  warning(nextRuleContexts.length <= 10, \"\\nThe maximum number of `ruleContexts` is 10. They have been sliced to that limit.\\nConsider using `transformRuleContexts` to minimize the number of rules sent to Algolia.\\n\");\n  var ruleContexts = transformRuleContexts(nextRuleContexts).slice(0, 10);\n\n  if (!isEqual(previousRuleContexts, ruleContexts)) {\n    helper.overrideStateWithoutTriggeringChangeEvent(_objectSpread({}, sharedHelperState, {\n      ruleContexts: ruleContexts\n    }));\n  }\n}\n\nvar connectQueryRules = function connectQueryRules(render) {\n  var unmount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(render, withUsage());\n  return function (widgetParams) {\n    var _ref2 = widgetParams || {},\n        _ref2$trackedFilters = _ref2.trackedFilters,\n        trackedFilters = _ref2$trackedFilters === void 0 ? {} : _ref2$trackedFilters,\n        _ref2$transformRuleCo = _ref2.transformRuleContexts,\n        transformRuleContexts = _ref2$transformRuleCo === void 0 ? function (rules) {\n      return rules;\n    } : _ref2$transformRuleCo,\n        _ref2$transformItems = _ref2.transformItems,\n        transformItems = _ref2$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref2$transformItems;\n\n    Object.keys(trackedFilters).forEach(function (facetName) {\n      if (typeof trackedFilters[facetName] !== 'function') {\n        throw new Error(withUsage(\"'The \\\"\".concat(facetName, \"\\\" filter value in the `trackedFilters` option expects a function.\")));\n      }\n    });\n    var hasTrackedFilters = Object.keys(trackedFilters).length > 0; // We store the initial rule contexts applied before creating the widget\n    // so that we do not override them with the rules created from `trackedFilters`.\n\n    var initialRuleContexts = [];\n    var onHelperChange;\n    return {\n      init: function init(_ref3) {\n        var helper = _ref3.helper,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        initialRuleContexts = state.ruleContexts || [];\n        onHelperChange = applyRuleContexts.bind({\n          helper: helper,\n          initialRuleContexts: initialRuleContexts,\n          trackedFilters: trackedFilters,\n          transformRuleContexts: transformRuleContexts\n        });\n\n        if (hasTrackedFilters) {\n          // We need to apply the `ruleContexts` based on the `trackedFilters`\n          // before the helper changes state in some cases:\n          //   - Some filters are applied on the first load (e.g. using `configure`)\n          //   - The `transformRuleContexts` option sets initial `ruleContexts`.\n          if (hasStateRefinements(state) || Boolean(widgetParams.transformRuleContexts)) {\n            onHelperChange(state);\n          } // We track every change in the helper to override its state and add\n          // any `ruleContexts` needed based on the `trackedFilters`.\n\n\n          helper.on('change', onHelperChange);\n        }\n\n        render({\n          items: [],\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function (_render) {\n        function render(_x) {\n          return _render.apply(this, arguments);\n        }\n\n        render.toString = function () {\n          return _render.toString();\n        };\n\n        return render;\n      }(function (_ref4) {\n        var results = _ref4.results,\n            instantSearchInstance = _ref4.instantSearchInstance;\n        var _results$userData = results.userData,\n            userData = _results$userData === void 0 ? [] : _results$userData;\n        var items = transformItems(userData);\n        render({\n          items: items,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      }),\n      dispose: function dispose(_ref5) {\n        var helper = _ref5.helper,\n            state = _ref5.state;\n        unmount();\n\n        if (hasTrackedFilters) {\n          helper.removeListener('change', onHelperChange);\n          return state.setQueryParameter('ruleContexts', initialRuleContexts);\n        }\n\n        return state;\n      }\n    };\n  };\n};\n\nexport default connectQueryRules;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport default function createVoiceSearchHelper(_ref) {\n  var searchAsYouSpeak = _ref.searchAsYouSpeak,\n      onQueryChange = _ref.onQueryChange,\n      onStateChange = _ref.onStateChange;\n  var SpeechRecognitionAPI = window.webkitSpeechRecognition || window.SpeechRecognition;\n\n  var getDefaultState = function getDefaultState(status) {\n    return {\n      status: status,\n      transcript: '',\n      isSpeechFinal: false,\n      errorCode: undefined\n    };\n  };\n\n  var state = getDefaultState('initial');\n  var recognition;\n\n  var isBrowserSupported = function isBrowserSupported() {\n    return Boolean(SpeechRecognitionAPI);\n  };\n\n  var isListening = function isListening() {\n    return state.status === 'askingPermission' || state.status === 'waiting' || state.status === 'recognizing';\n  };\n\n  var setState = function setState() {\n    var newState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    state = _objectSpread({}, state, {}, newState);\n    onStateChange();\n  };\n\n  var getState = function getState() {\n    return state;\n  };\n\n  var resetState = function resetState() {\n    var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'initial';\n    setState(getDefaultState(status));\n  };\n\n  var onStart = function onStart() {\n    setState({\n      status: 'waiting'\n    });\n  };\n\n  var onError = function onError(event) {\n    setState({\n      status: 'error',\n      errorCode: event.error\n    });\n  };\n\n  var onResult = function onResult(event) {\n    setState({\n      status: 'recognizing',\n      transcript: event.results[0] && event.results[0][0] && event.results[0][0].transcript || '',\n      isSpeechFinal: event.results[0] && event.results[0].isFinal\n    });\n\n    if (searchAsYouSpeak && state.transcript) {\n      onQueryChange(state.transcript);\n    }\n  };\n\n  var onEnd = function onEnd() {\n    if (!state.errorCode && state.transcript && !searchAsYouSpeak) {\n      onQueryChange(state.transcript);\n    }\n\n    if (state.status !== 'error') {\n      setState({\n        status: 'finished'\n      });\n    }\n  };\n\n  var start = function start() {\n    recognition = new SpeechRecognitionAPI();\n\n    if (!recognition) {\n      return;\n    }\n\n    resetState('askingPermission');\n    recognition.interimResults = true;\n    recognition.addEventListener('start', onStart);\n    recognition.addEventListener('error', onError);\n    recognition.addEventListener('result', onResult);\n    recognition.addEventListener('end', onEnd);\n    recognition.start();\n  };\n\n  var dispose = function dispose() {\n    if (!recognition) {\n      return;\n    }\n\n    recognition.stop();\n    recognition.removeEventListener('start', onStart);\n    recognition.removeEventListener('error', onError);\n    recognition.removeEventListener('result', onResult);\n    recognition.removeEventListener('end', onEnd);\n    recognition = undefined;\n  };\n\n  var stop = function stop() {\n    dispose(); // Because `dispose` removes event listeners, `end` listener is not called.\n    // So we're setting the `status` as `finished` here.\n    // If we don't do it, it will be still `waiting` or `recognizing`.\n\n    resetState('finished');\n  };\n\n  var toggleListening = function toggleListening() {\n    if (!isBrowserSupported()) {\n      return;\n    }\n\n    if (isListening()) {\n      stop();\n    } else {\n      start();\n    }\n  };\n\n  return {\n    getState: getState,\n    isBrowserSupported: isBrowserSupported,\n    isListening: isListening,\n    toggleListening: toggleListening,\n    dispose: dispose\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nimport createVoiceSearchHelper from '../../lib/voiceSearchHelper';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'voice-search',\n  connector: true\n});\n\nvar connectVoiceSearch = function connectVoiceSearch(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _render = function render(_ref) {\n      var isFirstRendering = _ref.isFirstRendering,\n          instantSearchInstance = _ref.instantSearchInstance,\n          _ref$voiceSearchHelpe = _ref.voiceSearchHelper,\n          isBrowserSupported = _ref$voiceSearchHelpe.isBrowserSupported,\n          isListening = _ref$voiceSearchHelpe.isListening,\n          toggleListening = _ref$voiceSearchHelpe.toggleListening,\n          getState = _ref$voiceSearchHelpe.getState;\n      renderFn({\n        isBrowserSupported: isBrowserSupported(),\n        isListening: isListening(),\n        toggleListening: toggleListening,\n        voiceListeningState: getState(),\n        widgetParams: widgetParams,\n        instantSearchInstance: instantSearchInstance\n      }, isFirstRendering);\n    };\n\n    var _widgetParams$searchA = widgetParams.searchAsYouSpeak,\n        searchAsYouSpeak = _widgetParams$searchA === void 0 ? false : _widgetParams$searchA;\n    return {\n      init: function init(_ref2) {\n        var _this = this;\n\n        var helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance;\n\n        this._refine = function () {\n          var previousQuery;\n\n          var setQueryAndSearch = function setQueryAndSearch(query) {\n            if (query !== helper.state.query) {\n              previousQuery = helper.state.query;\n              helper.setQuery(query);\n            }\n\n            if (typeof previousQuery !== 'undefined' && previousQuery !== query) {\n              helper.search();\n            }\n          };\n\n          return setQueryAndSearch;\n        }();\n\n        this._voiceSearchHelper = createVoiceSearchHelper({\n          searchAsYouSpeak: searchAsYouSpeak,\n          onQueryChange: function onQueryChange(query) {\n            return _this._refine(query);\n          },\n          onStateChange: function onStateChange() {\n            _render({\n              isFirstRendering: false,\n              instantSearchInstance: instantSearchInstance,\n              voiceSearchHelper: _this._voiceSearchHelper\n            });\n          }\n        });\n\n        _render({\n          isFirstRendering: true,\n          instantSearchInstance: instantSearchInstance,\n          voiceSearchHelper: this._voiceSearchHelper\n        });\n      },\n      render: function render(_ref3) {\n        var instantSearchInstance = _ref3.instantSearchInstance;\n\n        _render({\n          isFirstRendering: false,\n          instantSearchInstance: instantSearchInstance,\n          voiceSearchHelper: this._voiceSearchHelper\n        });\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n\n        this._voiceSearchHelper.dispose();\n\n        unmountFn();\n        return state.setQuery('');\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var query = searchParameters.query;\n\n        if (query === '' || uiState && uiState.query === query) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          query: query\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        return searchParameters.setQuery(uiState.query || '');\n      }\n    };\n  };\n};\n\nexport default connectVoiceSearch;","import suit from '../util/suit';\n\nexport const createSuitMixin = ({ name }) => ({\n  props: {\n    classNames: {\n      type: Object,\n      default: undefined,\n    },\n  },\n  methods: {\n    suit(element, modifier) {\n      const className = suit(name, element, modifier);\n      const userClassName = this.classNames && this.classNames[className];\n      if (userClassName) {\n        return [className, userClassName].join(' ');\n      }\n      return className;\n    },\n  },\n});\n","/**\n * Create class names like ais-widgetName-element--modifier\n *\n * @param {string} widgetName first part\n * @param {string} element part separated by -\n * @param {string} modifier final part, separated by --\n *\n * @returns {string} the composed class name\n */\nexport default function suit(widgetName, element, modifier) {\n  if (!widgetName) {\n    throw new Error('You need to provide `widgetName` in your data');\n  }\n\n  const elements = [`ais-${widgetName}`];\n\n  if (element) {\n    elements.push(`-${element}`);\n  }\n\n  if (modifier) {\n    elements.push(`--${modifier}`);\n  }\n\n  return elements.join('');\n}\n","<template>\n  <div\n    :class=\"suit()\"\n    v-if=\"state\"\n  >\n    <slot\n      :refine=\"state.refine\"\n      :current-refinement=\"state.currentRefinement\"\n      :indices=\"state.indices\"\n    >\n      <p>This widget doesn't render anything without a filled in default slot.</p>\n      <p>query, function to refine and results are provided.</p>\n      <pre>refine: Function</pre>\n      <pre>currentRefinement: \"{{ state.currentRefinement }}\"</pre>\n      <details>\n        <summary><code>indices</code>:</summary>\n        <pre>{{ state.indices }}</pre>\n      </details>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createWidgetMixin } from '../mixins/widget';\nimport { connectAutocomplete } from 'instantsearch.js/es/connectors';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisAutocomplete',\n  mixins: [\n    createWidgetMixin({ connector: connectAutocomplete }),\n    createSuitMixin({ name: 'Autocomplete' }),\n  ],\n  props: {\n    indices: {\n      type: Array,\n      required: false,\n      default: undefined,\n    },\n    escapeHTML: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        indices: this.indices,\n        escapeHTML: this.escapeHTML,\n      };\n    },\n  },\n};\n</script>\n","import Vue from 'vue';\n\nexport const PANEL_EMITTER_NAMESPACE = 'instantSearchPanelEmitter';\nexport const PANEL_CHANGE_EVENT = 'PANEL_CHANGE_EVENT';\n\nexport const createPanelProviderMixin = () => ({\n  props: {\n    emitter: {\n      type: Object,\n      required: false,\n      default() {\n        return new Vue({\n          name: 'PanelProvider',\n        });\n      },\n    },\n  },\n  provide() {\n    return {\n      [PANEL_EMITTER_NAMESPACE]: this.emitter,\n    };\n  },\n  data() {\n    return {\n      canRefine: true,\n    };\n  },\n  created() {\n    this.emitter.$on(PANEL_CHANGE_EVENT, value => {\n      this.updateCanRefine(value);\n    });\n  },\n  beforeDestroy() {\n    this.emitter.$destroy();\n  },\n  methods: {\n    updateCanRefine(value) {\n      this.canRefine = value;\n    },\n  },\n});\n\nexport const createPanelConsumerMixin = ({ mapStateToCanRefine }) => ({\n  inject: {\n    emitter: {\n      from: PANEL_EMITTER_NAMESPACE,\n      default() {\n        return {\n          $emit: () => {},\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      state: null,\n      hasAlreadyEmitted: false,\n    };\n  },\n  watch: {\n    state(nextState, previousState) {\n      if (!previousState || !nextState) {\n        return;\n      }\n\n      const previousCanRefine = mapStateToCanRefine(previousState);\n      const nextCanRefine = mapStateToCanRefine(nextState);\n\n      if (!this.hasAlreadyEmitted || previousCanRefine !== nextCanRefine) {\n        this.emitter.$emit(PANEL_CHANGE_EVENT, nextCanRefine);\n\n        this.hasAlreadyEmitted = true;\n      }\n    },\n  },\n});\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !state.canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :items=\"state.items\"\n      :can-refine=\"state.canRefine\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n    >\n      <ul :class=\"suit('list')\">\n        <li :class=\"[suit('item'), !state.items.length && suit('item', 'selected')]\">\n          <a\n            v-if=\"Boolean(state.items.length)\"\n            :href=\"state.createURL()\"\n            :class=\"suit('link')\"\n            @click.prevent=\"state.refine()\"\n          >\n            <slot name=\"rootLabel\">Home</slot>\n          </a>\n          <span v-else>\n            <slot name=\"rootLabel\">Home</slot>\n          </span>\n        </li>\n        <li\n          v-for=\"(item, index) in state.items\"\n          :key=\"item.label\"\n          :class=\"[suit('item'), isLastItem(index) && suit('item', 'selected')]\"\n        >\n          <span\n            :class=\"suit('separator')\"\n            aria-hidden=\"true\"\n          >\n            <slot name=\"separator\">></slot>\n          </span>\n          <a\n            v-if=\"!isLastItem(index)\"\n            :href=\"state.createURL(item.value)\"\n            :class=\"suit('link')\"\n            @click.prevent=\"state.refine(item.value)\"\n          >{{ item.label }}</a>\n          <span v-else>{{ item.label }}</span>\n        </li>\n      </ul>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectBreadcrumb } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\n\nexport default {\n  name: 'AisBreadcrumb',\n  mixins: [\n    createWidgetMixin({ connector: connectBreadcrumb }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.canRefine,\n    }),\n    createSuitMixin({ name: 'Breadcrumb' }),\n  ],\n  props: {\n    attributes: {\n      type: Array,\n      required: true,\n    },\n    separator: {\n      type: String,\n      default: ' > ',\n    },\n    rootPath: {\n      type: String,\n      default: null,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attributes: this.attributes,\n        separator: this.separator,\n        rootPath: this.rootPath,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n  methods: {\n    isLastItem(index) {\n      return this.state.items.length - 1 === index;\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      :can-refine=\"canRefine\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n    >\n      <button\n        type=\"reset\"\n        :class=\"[suit('button'), !canRefine && suit('button', 'disabled')]\"\n        :disabled=\"!canRefine\"\n        @click.prevent=\"state.refine\"\n      >\n        <slot name=\"resetLabel\">Clear refinements</slot>\n      </button>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectClearRefinements } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\n\nexport default {\n  name: 'AisClearRefinements',\n  mixins: [\n    createWidgetMixin({ connector: connectClearRefinements }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.hasRefinements,\n    }),\n    createSuitMixin({ name: 'ClearRefinements' }),\n  ],\n  props: {\n    // explicitly no default, since included and excluded are incompatible\n    // eslint-disable-next-line vue/require-default-prop\n    excludedAttributes: {\n      type: Array,\n    },\n    // explicitly no default, since included and excluded are incompatible\n    // eslint-disable-next-line vue/require-default-prop\n    includedAttributes: {\n      type: Array,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        includedAttributes: this.includedAttributes,\n        excludedAttributes: this.excludedAttributes,\n        transformItems: this.transformItems,\n      };\n    },\n    canRefine() {\n      return this.state.hasRefinements;\n    },\n  },\n};\n</script>\n","import { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\nimport { connectConfigure } from 'instantsearch.js/es/connectors';\n\nexport default {\n  inheritAttrs: false,\n  name: 'AisConfigure',\n  mixins: [\n    createSuitMixin({ name: 'Configure' }),\n    createWidgetMixin({ connector: connectConfigure }),\n  ],\n  computed: {\n    widgetParams() {\n      return {\n        searchParameters: this.$attrs,\n      };\n    },\n  },\n  render(createElement) {\n    if (!this.state || !this.$scopedSlots.default) {\n      return null;\n    }\n\n    return createElement(\n      'div',\n      {\n        class: this.suit(),\n      },\n      [\n        this.$scopedSlots.default({\n          refine: this.state.refine,\n          searchParameters: this.state.widgetParams.searchParameters,\n        }),\n      ]\n    );\n  },\n};\n","<template>\n  <div\n    :class=\"[suit(), noRefinement && suit('','noRefinement')]\"\n    v-if=\"state\"\n  >\n    <slot\n      :refine=\"state.refine\"\n      :items=\"state.items\"\n      :createURL=\"state.createURL\"\n    >\n      <ul :class=\"suit('list')\">\n        <li\n          v-for=\"item in state.items\"\n          :key=\"item.attribute\"\n          :class=\"suit('item')\"\n        >\n          <slot\n            name=\"item\"\n            :refine=\"item.refine\"\n            :item=\"item\"\n            :createURL=\"state.createURL\"\n          >\n            <span :class=\"suit('label')\">{{ item.label | capitalize }}: </span>\n            <span\n              v-for=\"refinement in item.refinements\"\n              :key=\"createItemKey(refinement)\"\n              :class=\"suit('category')\"\n            >\n              <slot\n                name=\"refinement\"\n                :refine=\"item.refine\"\n                :refinement=\"refinement\"\n                :createURL=\"state.createURL\"\n              >\n                <span :class=\"suit('categoryLabel')\">\n                  <q v-if=\"refinement.attribute === 'query'\">{{ refinement.label }}</q>\n                  <template v-else>\n                    {{ refinement.label }}\n                  </template>\n                </span>\n                <button\n                  :class=\"suit('delete')\"\n                  @click=\"item.refine(refinement)\"\n                >\n                  ✕\n                </button>\n              </slot>\n            </span>\n          </slot>\n        </li>\n      </ul>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createWidgetMixin } from '../mixins/widget';\nimport { connectCurrentRefinements } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisCurrentRefinements',\n  mixins: [\n    createSuitMixin({ name: 'CurrentRefinements' }),\n    createWidgetMixin({ connector: connectCurrentRefinements }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.items.length > 0,\n    }),\n  ],\n  props: {\n    // no default because included and excluded are incompatible\n    // eslint-disable-next-line vue/require-default-prop\n    includedAttributes: {\n      type: Array,\n    },\n    // no default because included and excluded are incompatible\n    // eslint-disable-next-line vue/require-default-prop\n    excludedAttributes: {\n      type: Array,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    noRefinement() {\n      return this.state && this.state.items.length === 0;\n    },\n    widgetParams() {\n      return {\n        includedAttributes: this.includedAttributes,\n        excludedAttributes: this.excludedAttributes,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n  methods: {\n    createItemKey({ attribute, value, type, operator }) {\n      return [attribute, type, value, operator].join(':');\n    },\n  },\n  filters: {\n    capitalize(value) {\n      if (!value) return '';\n      return (\n        value\n          .toString()\n          .charAt(0)\n          .toLocaleUpperCase() + value.toString().slice(1)\n      );\n    },\n  },\n};\n</script>\n","<template>\n  <ul\n    :class=\"[\n      suit('list'),\n      level > 0 && suit('list', 'child'),\n      suit('list', `lvl${level}`)\n    ]\"\n  >\n    <li\n      v-for=\"item in items\"\n      :key=\"item.value\"\n      :class=\"[\n        suit('item'),\n        item.data && suit('item', 'parent'),\n        item.isRefined && suit('item', 'selected')\n      ]\"\n    >\n      <a\n        :href=\"createURL(item.value)\"\n        :class=\"suit('link')\"\n        @click.prevent=\"refine(item.value)\"\n      >\n        <span :class=\"suit('label')\">{{ item.label }}</span>\n        <span :class=\"suit('count')\">{{ item.count }}</span>\n      </a>\n\n      <hierarchical-menu-list\n        v-if=\"item.data\"\n        :items=\"item.data\"\n        :level=\"level + 1\"\n        :refine=\"refine\"\n        :createURL=\"createURL\"\n        :suit=\"suit\"\n      />\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  name: 'HierarchicalMenuList',\n  props: {\n    items: {\n      type: Array,\n      required: true,\n    },\n    level: {\n      type: Number,\n      required: true,\n    },\n    refine: {\n      type: Function,\n      required: true,\n    },\n    createURL: {\n      type: Function,\n      required: true,\n    },\n    suit: {\n      type: Function,\n      required: true,\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :items=\"state.items\"\n      :can-refine=\"canRefine\"\n      :can-toggle-show-more=\"state.canToggleShowMore\"\n      :is-showing-more=\"state.isShowingMore\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n      :toggle-show-more=\"state.toggleShowMore\"\n    >\n      <hierarchical-menu-list\n        :items=\"state.items\"\n        :level=\"0\"\n        :refine=\"state.refine\"\n        :createURL=\"state.createURL\"\n        :suit=\"suit\"\n      />\n\n      <button\n        v-if=\"showMore\"\n        :class=\"[\n          suit('showMore'),\n          !state.canToggleShowMore && suit('showMore', 'disabled')\n        ]\"\n        :disabled=\"!state.canToggleShowMore\"\n        @click.prevent=\"state.toggleShowMore\"\n      >\n        <slot\n          name=\"showMoreLabel\"\n          :is-showing-more=\"state.isShowingMore\"\n        >{{ state.isShowingMore ? 'Show less' : 'Show more' }}</slot>\n      </button>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectHierarchicalMenu } from 'instantsearch.js/es/connectors';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport HierarchicalMenuList from './HierarchicalMenuList.vue';\nimport { createSuitMixin } from '../mixins/suit';\n\nconst mapStateToCanRefine = state => state.items.length > 0;\n\nexport default {\n  name: 'AisHierarchicalMenu',\n  mixins: [\n    createSuitMixin({ name: 'HierarchicalMenu' }),\n    createWidgetMixin({ connector: connectHierarchicalMenu }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine,\n    }),\n  ],\n  components: {\n    HierarchicalMenuList,\n  },\n  props: {\n    attributes: {\n      type: Array,\n      required: true,\n    },\n    limit: {\n      type: Number,\n      default: 10,\n    },\n    showMoreLimit: {\n      type: Number,\n      default: 20,\n    },\n    showMore: {\n      type: Boolean,\n      default: false,\n    },\n    sortBy: {\n      type: [Array, Function],\n      default() {\n        return ['name:asc'];\n      },\n    },\n    separator: {\n      type: String,\n      default: ' > ',\n    },\n    rootPath: {\n      type: String,\n      default: null,\n    },\n    showParentLevel: {\n      type: Boolean,\n      default: true,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attributes: this.attributes,\n        limit: this.limit,\n        showMore: this.showMore,\n        showMoreLimit: this.showMoreLimit,\n        separator: this.separator,\n        rootPath: this.rootPath,\n        showParentLevel: this.showParentLevel,\n        sortBy: this.sortBy,\n        transformItems: this.transformItems,\n      };\n    },\n    canRefine() {\n      return mapStateToCanRefine(this.state);\n    },\n  },\n};\n</script>\n","/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/unescape.js\n */\n\n/** Used to map HTML entities to characters. */\nconst htmlUnescapes = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\",\n};\n\n/** Used to match HTML entities and HTML characters. */\nconst reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;\nconst reHasEscapedHtml = RegExp(reEscapedHtml.source);\n\n/**\n * The inverse of `_.escape`; this method converts the HTML entities\n * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n * their corresponding characters.\n *\n * **Note:** No other HTML entities are unescaped. To unescape additional\n * HTML entities use a third-party library like [_he_](https://mths.be/he).\n *\n * @static\n * @memberOf _\n * @since 0.6.0\n * @category String\n * @param {string} [string=''] The string to unescape.\n * @returns {string} Returns the unescaped string.\n * @example\n *\n * _.unescape('fred, barney, &amp; pebbles');\n * // => 'fred, barney, & pebbles'\n */\nexport function unescape(string) {\n  return string && reHasEscapedHtml.test(string)\n    ? string.replace(reEscapedHtml, character => htmlUnescapes[character])\n    : string;\n}\n","// copied from React InstantSearch\nimport { getPropertyByPath } from 'instantsearch.js/es/lib/utils';\nimport { unescape } from '../util/unescape';\n\nconst TAG_PLACEHOLDER = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__',\n};\n\n/**\n * Parses an highlighted attribute into an array of objects with the string value, and\n * a boolean that indicated if this part is highlighted.\n *\n * @param {string} preTag - string used to identify the start of an highlighted value\n * @param {string} postTag - string used to identify the end of an highlighted value\n * @param {string} highlightedValue - highlighted attribute as returned by Algolia highlight feature\n * @return {object[]} - An array of {value: string, isHighlighted: boolean}.\n */\nfunction parseHighlightedAttribute({ preTag, postTag, highlightedValue = '' }) {\n  const splitByPreTag = highlightedValue.split(preTag);\n  const firstValue = splitByPreTag.shift();\n  const elements =\n    firstValue === '' ? [] : [{ value: firstValue, isHighlighted: false }];\n\n  if (postTag === preTag) {\n    let isHighlighted = true;\n    splitByPreTag.forEach(split => {\n      elements.push({ value: split, isHighlighted });\n      isHighlighted = !isHighlighted;\n    });\n  } else {\n    splitByPreTag.forEach(split => {\n      const splitByPostTag = split.split(postTag);\n\n      elements.push({\n        value: splitByPostTag[0],\n        isHighlighted: true,\n      });\n\n      if (splitByPostTag[1] !== '') {\n        elements.push({\n          value: splitByPostTag[1],\n          isHighlighted: false,\n        });\n      }\n    });\n  }\n\n  return elements;\n}\n\n/**\n * Find an highlighted attribute given an `attribute` and an `highlightProperty`, parses it,\n * and provided an array of objects with the string value and a boolean if this\n * value is highlighted.\n *\n * In order to use this feature, highlight must be activated in the configuration of\n * the index. The `preTag` and `postTag` attributes are respectively highlightPreTag and\n * highlightPostTag in Algolia configuration.\n *\n * @param {string} preTag - string used to identify the start of an highlighted value\n * @param {string} postTag - string used to identify the end of an highlighted value\n * @param {string} highlightProperty - the property that contains the highlight structure in the results\n * @param {string} attribute - the highlighted attribute to look for\n * @param {object} hit - the actual hit returned by Algolia.\n * @return {object[]} - An array of {value: string, isHighlighted: boolean}.\n */\nexport function parseAlgoliaHit({\n  preTag = TAG_PLACEHOLDER.highlightPreTag,\n  postTag = TAG_PLACEHOLDER.highlightPostTag,\n  highlightProperty,\n  attribute,\n  hit,\n}) {\n  if (!hit) throw new Error('`hit`, the matching record, must be provided');\n\n  const highlightObject =\n    getPropertyByPath(hit[highlightProperty], attribute) || {};\n\n  if (Array.isArray(highlightObject)) {\n    return highlightObject.map(item =>\n      parseHighlightedAttribute({\n        preTag,\n        postTag,\n        highlightedValue: unescape(item.value),\n      })\n    );\n  }\n\n  return parseHighlightedAttribute({\n    preTag,\n    postTag,\n    highlightedValue: unescape(highlightObject.value),\n  });\n}\n","<template>\n  <span\n    :class=\"suit()\"\n  >\n    <component\n      v-for=\"({ value, isHighlighted }, index) in parsedHighlights\"\n      :class=\"[isHighlighted && suit('highlighted')]\"\n      :key=\"index\"\n      :is=\"isHighlighted ? highlightedTagName : textNode\"\n    >{{ value }}</component>\n  </span>\n</template>\n\n<script>\nimport { parseAlgoliaHit } from '../util/parseAlgoliaHit';\n\nexport default {\n  name: 'AisHighlighter',\n  props: {\n    hit: {\n      type: Object,\n      required: true,\n    },\n    attribute: {\n      type: String,\n      required: true,\n    },\n    highlightedTagName: {\n      type: String,\n      default: 'mark',\n    },\n    suit: { type: Function, required: true },\n    highlightProperty: { type: String, required: true },\n    preTag: { type: String, required: true },\n    postTag: { type: String, required: true },\n  },\n  data() {\n    return {\n      textNode: {\n        functional: true,\n        render(createElement, context) {\n          const slots = context.slots();\n          return slots.default;\n        },\n      },\n    };\n  },\n  computed: {\n    parsedHighlights() {\n      return parseAlgoliaHit({\n        attribute: this.attribute,\n        hit: this.hit,\n        highlightProperty: this.highlightProperty,\n        preTag: this.preTag,\n        postTag: this.postTag,\n      });\n    },\n  },\n};\n</script>\n","<template>\n  <ais-highlighter\n    :hit=\"hit\"\n    :attribute=\"attribute\"\n    :highlighted-tag-name=\"highlightedTagName\"\n    :suit=\"suit\"\n    highlight-property=\"_highlightResult\"\n    pre-tag=\"<mark>\"\n    post-tag=\"</mark>\"\n  />\n</template>\n\n<script>\nimport { createSuitMixin } from '../mixins/suit';\nimport AisHighlighter from './Highlighter.vue';\n\nexport default {\n  name: 'AisHighlight',\n  mixins: [createSuitMixin({ name: 'Highlight' })],\n  components: { AisHighlighter },\n  props: {\n    hit: {\n      type: Object,\n      required: true,\n    },\n    attribute: {\n      type: String,\n      required: true,\n    },\n    highlightedTagName: {\n      type: String,\n      default: 'mark',\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      :items=\"items\"\n      :insights=\"state.insights\"\n    >\n      <ol :class=\"suit('list')\">\n        <li\n          v-for=\"(item, itemIndex) in items\"\n          :key=\"item.objectID\"\n          :class=\"suit('item')\"\n        >\n          <slot\n            name=\"item\"\n            :item=\"item\"\n            :index=\"itemIndex\"\n            :insights=\"state.insights\"\n          >objectID: {{ item.objectID }}, index: {{ itemIndex }}</slot>\n        </li>\n      </ol>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectHitsWithInsights } from 'instantsearch.js/es/connectors';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisHits',\n  mixins: [\n    createWidgetMixin({ connector: connectHitsWithInsights }),\n    createSuitMixin({ name: 'Hits' }),\n  ],\n  props: {\n    escapeHTML: {\n      type: Boolean,\n      default: true,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    items() {\n      return this.state.hits;\n    },\n    widgetParams() {\n      return {\n        escapeHTML: this.escapeHTML,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      :items=\"state.items\"\n      :refine=\"state.refine\"\n      :hasNoResults=\"state.hasNoResults\"\n    >\n      <select\n        :class=\"suit('select')\"\n        v-model=\"selected\"\n        @change=\"handleChange\"\n      >\n        <option\n          v-for=\"item in state.items\"\n          :key=\"item.value\"\n          :class=\"suit('option')\"\n          :value=\"item.value\"\n        >{{ item.label }}</option>\n      </select>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectHitsPerPage } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisHitsPerPage',\n  mixins: [\n    createSuitMixin({ name: 'HitsPerPage' }),\n    createWidgetMixin({ connector: connectHitsPerPage }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => !state.hasNoResults,\n    }),\n  ],\n  props: {\n    items: {\n      type: Array,\n      required: true,\n      default: () => [],\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  data() {\n    return {\n      selected: this.items.find(item => item.default === true).value,\n    };\n  },\n  computed: {\n    widgetParams() {\n      return {\n        items: this.items,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n  methods: {\n    handleChange() {\n      this.state.refine(this.selected);\n    },\n  },\n};\n</script>\n","import InstantSearch from './lib/InstantSearch';\nimport version from './lib/version';\nimport { snippet, highlight } from './helpers';\n\nvar instantsearch = function instantsearch(options) {\n  return new InstantSearch(options);\n};\n\ninstantsearch.version = version;\ninstantsearch.snippet = snippet;\ninstantsearch.highlight = highlight;\nObject.defineProperty(instantsearch, 'widgets', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.widgets\\\" are not available from the ES build.\\n\\nTo import the widgets:\\n\\nimport { searchBox } from 'instantsearch.js/es/widgets'\");\n  }\n});\nObject.defineProperty(instantsearch, 'connectors', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.connectors\\\" are not available from the ES build.\\n\\nTo import the connectors:\\n\\nimport { connectSearchBox } from 'instantsearch.js/es/connectors'\");\n  }\n});\nexport default instantsearch;\n","/* eslint-disable */\n\n// source: @babel/plugin-proposal-object-rest-spread@7.2.0\n// prettier-ignore\nexport function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\n// source: @babel/plugin-proposal-object-rest-spread@7.2.0\n// prettier-ignore\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n","import { createSuitMixin } from '../mixins/suit';\nimport { version } from '../../package.json'; // rollup does pick only what needed from json\nimport { _objectSpread } from './polyfills';\nimport Vue from 'vue';\n\nexport const createInstantSearchComponent = component =>\n  _objectSpread(\n    {\n      mixins: [createSuitMixin({ name: 'InstantSearch' })],\n      provide() {\n        return {\n          instantSearchInstance: this.instantSearchInstance,\n        };\n      },\n      watch: {\n        searchClient(searchClient) {\n          this.instantSearchInstance.helper.setClient(searchClient).search();\n        },\n        indexName(indexName) {\n          this.instantSearchInstance.helper.setIndex(indexName).search();\n        },\n        stalledSearchDelay(stalledSearchDelay) {\n          // private InstantSearch.js API:\n          this.instantSearchInstance._stalledSearchDelay = stalledSearchDelay;\n        },\n        routing() {\n          throw new Error(\n            'routing configuration can not be changed dynamically at this point.' +\n              '\\n\\n' +\n              'Please open a new issue: https://github.com/algolia/vue-instantsearch/issues/new?template=feature.md'\n          );\n        },\n        searchFunction(searchFunction) {\n          // private InstantSearch.js API:\n          this.instantSearchInstance._searchFunction = searchFunction;\n        },\n      },\n      created() {\n        const searchClient = this.instantSearchInstance.client;\n        if (typeof searchClient.addAlgoliaAgent === 'function') {\n          searchClient.addAlgoliaAgent(`Vue (${Vue.version})`);\n          searchClient.addAlgoliaAgent(`Vue InstantSearch (${version})`);\n        }\n      },\n      mounted() {\n        // from the documentation: https://vuejs.org/v2/api/#mounted\n        // \"Note that mounted does not guarantee that all child components have also been mounted. If you want to\n        // wait until the entire view has been rendered, you can use vm.$nextTick inside of mounted\"\n        this.$nextTick(() => {\n          if (!this.instantSearchInstance.started) {\n            this.instantSearchInstance.start();\n          }\n        });\n      },\n      beforeDestroy() {\n        if (this.instantSearchInstance.started) {\n          this.instantSearchInstance.dispose();\n\n          // TODO: remove this once algolia/instantsearch.js#3399 is used\n          this.instantSearchInstance.started = false;\n\n          // TODO: remove this once algolia/instantsearch.js#3415 is used\n          this.instantSearchInstance.helper = null;\n        }\n\n        // a hydrated instance will no longer be hydrated once disposed, and starts from scratch\n        this.instantSearchInstance.hydrated = false;\n      },\n    },\n    component\n  );\n","import instantsearch from 'instantsearch.js/es';\nimport { createInstantSearchComponent } from '../util/createInstantSearchComponent';\nimport { warn } from '../util/warn';\n\nconst oldApiWarning = `Vue InstantSearch: You used the prop api-key or app-id.\nThese have been replaced by search-client.\n\nSee more info here: https://www.algolia.com/doc/api-reference/widgets/instantsearch/vue/#widget-param-search-client`;\n\nexport default createInstantSearchComponent({\n  name: 'AisInstantSearch',\n  props: {\n    searchClient: {\n      type: Object,\n      required: true,\n    },\n    insightsClient: {\n      type: Function,\n      required: false,\n    },\n    indexName: {\n      type: String,\n      required: true,\n    },\n    routing: {\n      default: null,\n      validator(value) {\n        if (\n          typeof value === 'boolean' ||\n          !value.router ||\n          !value.stateMapping\n        ) {\n          warn(\n            'routing should be an object, with `router` and `stateMapping`. See https://www.algolia.com/doc/api-reference/widgets/instantsearch/vue/#widget-param-routing'\n          );\n          return false;\n        }\n        return true;\n      },\n    },\n    stalledSearchDelay: {\n      type: Number,\n      default: 200,\n    },\n    searchFunction: {\n      type: Function,\n      default: null,\n    },\n\n    apiKey: {\n      type: String,\n      default: null,\n      validator(value) {\n        if (value) {\n          warn(oldApiWarning);\n        }\n        return false;\n      },\n    },\n    appId: {\n      type: String,\n      default: null,\n      validator(value) {\n        if (value) {\n          warn(oldApiWarning);\n        }\n        return false;\n      },\n    },\n  },\n  data() {\n    return {\n      instantSearchInstance: instantsearch({\n        searchClient: this.searchClient,\n        insightsClient: this.insightsClient,\n        indexName: this.indexName,\n        routing: this.routing,\n        stalledSearchDelay: this.stalledSearchDelay,\n        searchFunction: this.searchFunction,\n      }),\n    };\n  },\n  render(createElement) {\n    return createElement(\n      'div',\n      {\n        class: {\n          [this.suit()]: true,\n          [this.suit('', 'ssr')]: false,\n        },\n      },\n      this.$slots.default\n    );\n  },\n});\n","import { createInstantSearchComponent } from '../util/createInstantSearchComponent';\n\nexport default createInstantSearchComponent({\n  name: 'AisInstantSearchSsr',\n  inject: {\n    // should be possible to configure this with {camelcase: ['error', {allow: ['^\\\\$_']}]}\n    // but that didn't work\n    // eslint-disable-next-line camelcase\n    $_ais: {\n      default() {\n        throw new Error('`rootMixin` is required when using SSR.');\n      },\n    },\n  },\n  data() {\n    return {\n      instantSearchInstance: this.$_ais,\n    };\n  },\n  render(createElement) {\n    return createElement(\n      'div',\n      {\n        class: {\n          [this.suit()]: true,\n          [this.suit('', 'ssr')]: true,\n        },\n      },\n      this.$slots.default\n    );\n  },\n});\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n\n    <slot\n      v-if=\"showPrevious\"\n      name=\"loadPrevious\"\n      :refine-previous=\"refinePrevious\"\n      :page=\"state.results.page\"\n      :is-first-page=\"state.isFirstPage\"\n    >\n      <button\n        :class=\"[suit('loadPrevious'), state.isFirstPage && suit('loadPrevious', 'disabled')]\"\n        :disabled=\"state.isFirstPage\"\n        @click=\"refinePrevious()\"\n      >Show previous results</button>\n    </slot>\n\n    <slot\n      :items=\"items\"\n      :results=\"state.results\"\n      :is-last-page=\"state.isLastPage\"\n      :refine-previous=\"refinePrevious\"\n      :refine-next=\"refineNext\"\n      :refine=\"refineNext\"\n      :insights=\"state.insights\"\n    >\n      <ol :class=\"suit('list')\">\n        <li\n          v-for=\"(item, index) in items\"\n          :class=\"suit('item')\"\n          :key=\"item.objectID\"\n        >\n          <slot\n            name=\"item\"\n            :item=\"item\"\n            :index=\"index\"\n            :insights=\"state.insights\"\n          >objectID: {{ item.objectID }}, index: {{ index }}</slot>\n        </li>\n      </ol>\n\n      <slot\n        name=\"loadMore\"\n        :refine-next=\"refineNext\"\n        :refine=\"refineNext\"\n        :page=\"state.results.page\"\n        :is-last-page=\"state.isLastPage\"\n      >\n        <button\n          :class=\"[suit('loadMore'), state.isLastPage && suit('loadMore', 'disabled')]\"\n          :disabled=\"state.isLastPage\"\n          @click=\"refineNext()\"\n        >Show more results</button>\n      </slot>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createWidgetMixin } from '../mixins/widget';\nimport { connectInfiniteHitsWithInsights } from 'instantsearch.js/es/connectors';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisInfiniteHits',\n  mixins: [\n    createWidgetMixin({ connector: connectInfiniteHitsWithInsights }),\n    createSuitMixin({ name: 'InfiniteHits' }),\n  ],\n  props: {\n    showPrevious: {\n      type: Boolean,\n      default: false,\n    },\n    escapeHTML: {\n      type: Boolean,\n      default: true,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        showPrevious: this.showPrevious,\n        escapeHTML: this.escapeHTML,\n        transformItems: this.transformItems,\n      };\n    },\n    items() {\n      // Fixes InstantSearch.js connectors API: every list\n      // of things must be called `items`\n      return this.state.hits;\n    },\n  },\n  methods: {\n    refinePrevious() {\n      this.state.showPrevious();\n    },\n    refineNext() {\n      this.state.showMore();\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !state.canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :items=\"state.items\"\n      :can-refine=\"state.canRefine\"\n      :can-toggle-show-more=\"state.canToggleShowMore\"\n      :is-showing-more=\"state.isShowingMore\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n      :toggle-show-more=\"state.toggleShowMore\"\n    >\n      <ul :class=\"suit('list')\">\n        <li\n          v-for=\"item in state.items\"\n          :key=\"item.value\"\n          :class=\"[suit('item'), item.isRefined && suit('item', 'selected')]\"\n        >\n          <a\n            :href=\"state.createURL(item.value)\"\n            :class=\"suit('link')\"\n            @click.prevent=\"state.refine(item.value)\"\n          >\n            <span :class=\"suit('label')\">{{ item.label }}</span>\n            <span :class=\"suit('count')\">{{ item.count }}</span>\n          </a>\n        </li>\n      </ul>\n\n      <button\n        v-if=\"showShowMoreButton\"\n        :class=\"[suit('showMore'), !state.canToggleShowMore && suit('showMore', 'disabled')]\"\n        :disabled=\"!state.canToggleShowMore\"\n        @click.prevent=\"state.toggleShowMore()\"\n      >\n        <slot\n          name=\"showMoreLabel\"\n          :is-showing-more=\"state.isShowingMore\"\n        >{{ state.isShowingMore ? 'Show less' : 'Show more' }}</slot>\n      </button>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectMenu } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisMenu',\n  mixins: [\n    createSuitMixin({ name: 'Menu' }),\n    createWidgetMixin({ connector: connectMenu }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.canRefine,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    // TODO: implement searchable in connector\n    // searchable: {\n    //   type: Boolean,\n    //   default: false,\n    // },\n    limit: {\n      type: Number,\n      default: 10,\n    },\n    showMoreLimit: {\n      type: Number,\n      default: 20,\n    },\n    showMore: {\n      type: Boolean,\n      default: false,\n    },\n    sortBy: {\n      type: [Array, Function],\n      default() {\n        return ['count:desc', 'name:asc'];\n      },\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        limit: this.limit,\n        showMore: this.showMore,\n        showMoreLimit: this.showMoreLimit,\n        sortBy: this.sortBy,\n        transformItems: this.transformItems,\n      };\n    },\n    showShowMoreButton() {\n      return this.state.canRefine && this.showMore;\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    :class=\"[suit(), !state.canRefine && suit('', 'noRefinement')]\"\n    v-if=\"state\"\n  >\n    <slot\n      :items=\"state.items\"\n      :can-refine=\"state.canRefine\"\n      :refine=\"refine\"\n      :createURL=\"state.createURL\"\n    >\n      <select\n        :class=\"suit('select')\"\n        @change=\"refine($event.currentTarget.value)\"\n      >\n        <option\n          :class=\"suit('option')\"\n          value=\"\"\n        >\n          <slot name=\"defaultOption\">See all</slot>\n        </option>\n        <option\n          v-for=\"item in state.items\"\n          :key=\"item.value\"\n          :class=\"suit('option')\"\n          :value=\"item.value\"\n          :selected=\"item.isRefined\"\n        >\n          <slot\n            name=\"item\"\n            :item=\"item\"\n          >{{ item.label }} ({{ item.count }})</slot>\n        </option>\n      </select>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectMenu } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisMenuSelect',\n  mixins: [\n    createSuitMixin({ name: 'MenuSelect' }),\n    createWidgetMixin({ connector: connectMenu }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.canRefine,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    limit: {\n      type: Number,\n      default: 10,\n    },\n    sortBy: {\n      type: [Array, Function],\n      default() {\n        return ['name:asc'];\n      },\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        limit: this.limit,\n        sortBy: this.sortBy,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n  methods: {\n    refine(value) {\n      this.state.refine(value);\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :items=\"state.items\"\n      :can-refine=\"canRefine\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n    >\n      <ul :class=\"[suit('list')]\">\n        <li\n          v-for=\"item in state.items\"\n          :key=\"item.label\"\n          :class=\"[suit('item'), item.isRefined && suit('item', 'selected')]\"\n        >\n          <label :class=\"suit('label')\">\n            <input\n              type=\"radio\"\n              :class=\"suit('radio')\"\n              :name=\"attribute\"\n              :value=\"item.value\"\n              :checked=\"item.isRefined\"\n              @change=\"state.refine($event.target.value)\"\n            >\n            <span :class=\"suit('labelText')\">{{ item.label }}</span>\n          </label>\n        </li>\n      </ul>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectNumericMenu } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisNumericMenu',\n  mixins: [\n    createWidgetMixin({ connector: connectNumericMenu }),\n    createSuitMixin({ name: 'NumericMenu' }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => !state.hasNoResults,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    items: {\n      type: Array,\n      required: true,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        transformItems: this.transformItems,\n        items: this.items,\n      };\n    },\n    canRefine() {\n      return !this.state.hasNoResults;\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      :refine=\"refine\"\n      :createURL=\"state.createURL\"\n      :current-refinement=\"state.currentRefinement\"\n      :nb-hits=\"state.nbHits\"\n      :nb-pages=\"state.nbPages\"\n      :pages=\"state.pages\"\n      :is-first-page=\"state.isFirstPage\"\n      :is-last-page=\"state.isLastPage\"\n    >\n      <ul :class=\"suit('list')\">\n        <li\n          :class=\"{\n            [suit('item')]: true,\n            [suit('item', 'firstPage')]: true,\n            [suit('item', 'disabled')]: state.isFirstPage,\n          }\"\n          v-if=\"showFirst\"\n        >\n          <slot\n            name=\"first\"\n            :createURL=\"() => state.createURL(0)\"\n            :is-first-page=\"state.isFirstPage\"\n            :refine=\"() => refine(0)\"\n          >\n            <template v-if=\"!state.isFirstPage\">\n              <a\n                :class=\"suit('link')\"\n                aria-label=\"First\"\n                :href=\"state.createURL(0)\"\n                @click.prevent=\"refine(0)\"\n              >‹‹</a>\n            </template>\n            <template v-else>\n              <span\n                :class=\"suit('link')\"\n                aria-label=\"First\"\n              >‹‹</span>\n            </template>\n          </slot>\n        </li>\n        <li\n          :class=\"{\n            [suit('item')]: true,\n            [suit('item', 'previousPage')]: true,\n            [suit('item', 'disabled')]: state.isFirstPage,\n          }\"\n          v-if=\"showPrevious\"\n        >\n          <slot\n            name=\"previous\"\n            :createURL=\"() => state.createURL(state.currentRefinement - 1)\"\n            :is-first-page=\"state.isFirstPage\"\n            :refine=\"() => refine(state.currentRefinement - 1)\"\n          >\n            <template v-if=\"!state.isFirstPage\">\n              <a\n                :class=\"suit('link')\"\n                aria-label=\"Previous\"\n                :href=\"state.createURL(state.currentRefinement - 1)\"\n                @click.prevent=\"refine(state.currentRefinement - 1)\"\n              >‹</a>\n            </template>\n            <template v-else>\n              <span\n                :class=\"suit('link')\"\n                aria-label=\"Previous\"\n              >‹</span>\n            </template>\n          </slot>\n        </li>\n\n        <li\n          :class=\"{\n            [suit('item')]: true,\n            [suit('item', 'selected')]: state.currentRefinement === page\n          }\"\n          v-for=\"page in state.pages\"\n          :key=\"page\"\n        >\n          <slot\n            name=\"item\"\n            :page=\"page\"\n            :createURL=\"() => state.createURL(page)\"\n            :is-first-page=\"state.isFirstPage\"\n            :is-last-page=\"state.isLastPage\"\n            :refine=\"() => refine(page)\"\n          >\n            <a\n              :class=\"suit('link')\"\n              :href=\"state.createURL(page)\"\n              @click.prevent=\"refine(page)\"\n            >{{ page + 1 }}</a>\n          </slot>\n        </li>\n\n        <li\n          :class=\"{\n            [suit('item')]: true,\n            [suit('item','nextPage')]: true,\n            [suit('item','disabled')]: state.isLastPage\n          }\"\n          v-if=\"showNext\"\n        >\n          <slot\n            name=\"next\"\n            :createURL=\"() => state.createURL(state.currentRefinement + 1)\"\n            :is-last-page=\"state.isLastPage\"\n            :refine=\"() => refine(state.currentRefinement + 1)\"\n          >\n            <template v-if=\"!state.isLastPage\">\n              <a\n                :class=\"suit('link')\"\n                aria-label=\"Next\"\n                :href=\"state.createURL(state.currentRefinement + 1)\"\n                @click.prevent=\"refine(state.currentRefinement + 1)\"\n              >›</a>\n            </template>\n            <template v-else>\n              <span\n                :class=\"suit('link')\"\n                aria-label=\"Next\"\n              >›</span>\n            </template>\n          </slot>\n        </li>\n        <li\n          :class=\"{\n            [suit('item')]: true,\n            [suit('item','lastPage')]: true,\n            [suit('item','disabled')]: state.isLastPage,\n          }\"\n          v-if=\"showLast\"\n        >\n          <slot\n            name=\"last\"\n            :createURL=\"() => state.createURL(state.nbPages - 1)\"\n            :is-last-page=\"state.isLastPage\"\n            :refine=\"() => refine(state.nbPages - 1)\"\n          >\n            <template v-if=\"!state.isLastPage\">\n              <a\n                :class=\"suit('link')\"\n                aria-label=\"Last\"\n                :href=\"state.createURL(state.nbPages - 1)\"\n                @click.prevent=\"refine(state.nbPages - 1)\"\n              >››</a>\n            </template>\n            <template v-else>\n              <span\n                :class=\"suit('link')\"\n                aria-label=\"Last\"\n              >››</span>\n            </template>\n          </slot>\n        </li>\n      </ul>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectPagination } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisPagination',\n  mixins: [\n    createSuitMixin({ name: 'Pagination' }),\n    createWidgetMixin({ connector: connectPagination }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.nbPages > 1,\n    }),\n  ],\n  props: {\n    padding: {\n      type: Number,\n      default: 3,\n      validator(value) {\n        return value > 0;\n      },\n    },\n    totalPages: {\n      type: Number,\n      default: undefined,\n      validator(value) {\n        return value > 0;\n      },\n    },\n    showFirst: {\n      type: Boolean,\n      default: true,\n    },\n    showLast: {\n      type: Boolean,\n      default: true,\n    },\n    showNext: {\n      type: Boolean,\n      default: true,\n    },\n    showPrevious: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        padding: this.padding,\n        totalPages: this.totalPages,\n      };\n    },\n  },\n  methods: {\n    refine(page) {\n      const p = Math.min(Math.max(page, 0), this.state.nbPages - 1);\n      this.state.refine(p);\n      // @TODO: do this in a general way\n      this.$emit('page-change', p);\n    },\n  },\n};\n</script>\n","<template>\n  <div :class=\"[suit(), !canRefine && suit('', 'noRefinement')]\">\n    <div\n      v-if=\"$slots.header || $scopedSlots.header\"\n      :class=\"suit('header')\"\n    >\n      <slot\n        name=\"header\"\n        :has-refinements=\"canRefine\"\n      />\n    </div>\n    <div :class=\"suit('body')\">\n      <slot :has-refinements=\"canRefine\" />\n    </div>\n    <div\n      v-if=\"$slots.footer || $scopedSlots.footer\"\n      :class=\"suit('footer')\"\n    >\n      <slot\n        name=\"footer\"\n        :has-refinements=\"canRefine\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { createPanelProviderMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisPanel',\n  mixins: [createSuitMixin({ name: 'Panel' }), createPanelProviderMixin()],\n};\n</script>\n","<template>\n  <div :class=\"suit()\">\n    <a\n      :class=\"suit('link')\"\n      :href=\"algoliaUrl\"\n      target=\"_blank\"\n      rel=\"noopener\"\n      aria-label=\"search by Algolia\"\n    >\n      <svg\n        style=\"height: 1.2em; width: auto\"\n        :class=\"[suit('logo'), suit('', theme)]\"\n        viewBox=\"0 0 168 24\"\n      >\n        <path\n          :fill=\"theme === 'dark' ? '#FFF': '#5D6494'\"\n          d=\"M6.97 6.68V8.3a4.47 4.47 0 0 0-2.42-.67 2.2 2.2 0 0 0-1.38.4c-.34.26-.5.6-.5 1.02 0 .43.16.77.49 1.03.33.25.83.53 1.51.83a7.04 7.04 0 0 1 1.9 1.08c.34.24.58.54.73.89.15.34.23.74.23 1.18 0 .95-.33 1.7-1 2.24a4 4 0 0 1-2.6.81 5.71 5.71 0 0 1-2.94-.68v-1.71c.84.63 1.81.94 2.92.94.58 0 1.05-.14 1.39-.4.34-.28.5-.65.5-1.13 0-.29-.1-.55-.3-.8a2.2 2.2 0 0 0-.65-.53 23.03 23.03 0 0 0-1.64-.78 13.67 13.67 0 0 1-1.11-.64c-.12-.1-.28-.22-.46-.4a1.72 1.72 0 0 1-.39-.5 4.46 4.46 0 0 1-.22-.6c-.07-.23-.1-.48-.1-.75 0-.91.33-1.63 1-2.17a4 4 0 0 1 2.57-.8c.97 0 1.8.18 2.47.52zm7.47 5.7v-.3a2.26 2.26 0 0 0-.5-1.44c-.3-.35-.74-.53-1.32-.53-.53 0-.99.2-1.37.58-.38.39-.62.95-.72 1.68h3.91zm1 2.79v1.4c-.6.34-1.38.51-2.36.51a4.02 4.02 0 0 1-3-1.13 4.04 4.04 0 0 1-1.11-2.97c0-1.3.34-2.32 1.02-3.06a3.38 3.38 0 0 1 2.6-1.1c1.03 0 1.85.32 2.46.96.6.64.9 1.57.9 2.78 0 .33-.03.68-.09 1.04h-5.31c.1.7.4 1.24.89 1.61.49.38 1.1.56 1.85.56.86 0 1.58-.2 2.15-.6zm6.61-1.78h-1.21c-.6 0-1.05.12-1.35.36-.3.23-.46.53-.46.89 0 .37.12.66.36.88.23.2.57.32 1.02.32.5 0 .9-.15 1.2-.43.3-.28.44-.65.44-1.1v-.92zm-4.07-2.55V9.33a4.96 4.96 0 0 1 2.5-.55c2.1 0 3.17 1.03 3.17 3.08V17H22.1v-.96c-.42.68-1.15 1.02-2.19 1.02-.76 0-1.38-.22-1.84-.66-.46-.44-.7-1-.7-1.68 0-.78.3-1.38.88-1.81.59-.43 1.4-.65 2.46-.65h1.34v-.46c0-.55-.13-.97-.4-1.25-.26-.29-.7-.43-1.32-.43-.86 0-1.65.24-2.35.72zm9.34-1.93v1.42c.39-1 1.1-1.5 2.12-1.5.15 0 .31.02.5.05v1.53c-.23-.1-.48-.14-.76-.14-.54 0-.99.24-1.34.71a2.8 2.8 0 0 0-.52 1.71V17h-1.57V8.91h1.57zm5 4.09a3 3 0 0 0 .76 2.01c.47.53 1.14.8 2 .8.64 0 1.24-.18 1.8-.53v1.4c-.53.32-1.2.48-2 .48a3.98 3.98 0 0 1-4.17-4.18c0-1.16.38-2.15 1.14-2.98a4 4 0 0 1 3.1-1.23c.7 0 1.34.15 1.92.44v1.44a3.24 3.24 0 0 0-1.77-.5A2.65 2.65 0 0 0 32.33 13zm7.92-7.28v4.58c.46-1 1.3-1.5 2.5-1.5.8 0 1.42.24 1.9.73.48.5.72 1.17.72 2.05V17H43.8v-5.1c0-.56-.14-.99-.43-1.29-.28-.3-.65-.45-1.1-.45-.54 0-1 .2-1.42.6-.4.4-.61 1.02-.61 1.85V17h-1.56V5.72h1.56zM55.2 15.74c.6 0 1.1-.25 1.5-.76.4-.5.6-1.16.6-1.95 0-.92-.2-1.62-.6-2.12-.4-.5-.92-.74-1.55-.74-.56 0-1.05.22-1.5.67-.44.45-.66 1.13-.66 2.06 0 .96.22 1.67.64 2.14.43.47.95.7 1.57.7zM53 5.72v4.42a2.74 2.74 0 0 1 2.43-1.34c1.03 0 1.86.38 2.51 1.15.65.76.97 1.78.97 3.05 0 1.13-.3 2.1-.92 2.9-.62.81-1.47 1.21-2.54 1.21s-1.9-.45-2.46-1.34V17h-1.58V5.72H53zm9.9 11.1l-3.22-7.9h1.74l1 2.62 1.26 3.42c.1-.32.48-1.46 1.15-3.42l.91-2.63h1.66l-2.92 7.87c-.78 2.07-1.96 3.1-3.56 3.1-.28 0-.53-.02-.73-.07v-1.34c.17.04.35.06.54.06 1.03 0 1.76-.57 2.17-1.7z\"\n        />\n        <path\n          fill=\"#5468FF\"\n          d=\"M78.99.94h16.6a2.97 2.97 0 0 1 2.96 2.96v16.6a2.97 2.97 0 0 1-2.97 2.96h-16.6a2.97 2.97 0 0 1-2.96-2.96V3.9A2.96 2.96 0 0 1 79 .94\"\n        />\n        <path\n          fill=\"#FFF\"\n          d=\"M89.63 5.97v-.78a.98.98 0 0 0-.98-.97h-2.28a.98.98 0 0 0-.97.97V6c0 .09.08.15.17.13a7.13 7.13 0 0 1 3.9-.02c.08.02.16-.04.16-.13m-6.25 1L83 6.6a.98.98 0 0 0-1.38 0l-.46.46a.97.97 0 0 0 0 1.38l.38.39c.06.06.15.04.2-.02a7.49 7.49 0 0 1 1.63-1.62c.07-.04.08-.14.02-.2m4.16 2.45v3.34c0 .1.1.17.2.12l2.97-1.54c.06-.03.08-.12.05-.18a3.7 3.7 0 0 0-3.08-1.87c-.07 0-.14.06-.14.13m0 8.05a4.49 4.49 0 1 1 0-8.98 4.49 4.49 0 0 1 0 8.98m0-10.85a6.37 6.37 0 1 0 0 12.74 6.37 6.37 0 0 0 0-12.74\"\n        />\n        <path\n          :fill=\"theme === 'dark' ? '#FFF': '#5468FF'\"\n          d=\"M120.92 18.8c-4.38.02-4.38-3.54-4.38-4.1V1.36l2.67-.42v13.25c0 .32 0 2.36 1.71 2.37v2.24zm-10.84-2.18c.82 0 1.43-.04 1.85-.12v-2.72a5.48 5.48 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.11-.44.28-.58.49a.93.93 0 0 0-.22.65c0 .63.22 1 .61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.62.11 2.23.33.6.22 1.09.53 1.44.92.36.4.61.92.76 1.48.16.56.23 1.17.23 1.85v6.87c-.4.1-1.03.2-1.86.32-.84.12-1.78.18-2.82.18-.69 0-1.32-.07-1.9-.2a4 4 0 0 1-1.46-.63c-.4-.3-.72-.67-.96-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.39-1.53.26-.45.6-.82 1.04-1.1.45-.3.95-.5 1.54-.62a8.8 8.8 0 0 1 3.79.05v-.44c0-.3-.04-.6-.11-.87a1.78 1.78 0 0 0-1.1-1.22c-.31-.12-.7-.2-1.15-.2a9.75 9.75 0 0 0-2.95.46l-.33-2.19c.34-.12.84-.23 1.48-.35.65-.12 1.34-.18 2.08-.18zm52.84 9.63c.82 0 1.43-.05 1.85-.13V13.7a5.42 5.42 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.12-.44.28-.58.5a.93.93 0 0 0-.22.65c0 .63.22.99.61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.63.11 2.23.33.6.22 1.1.53 1.45.92.35.39.6.92.76 1.48.15.56.23 1.18.23 1.85v6.88c-.41.08-1.03.19-1.87.31-.83.12-1.77.18-2.81.18-.7 0-1.33-.06-1.9-.2a4 4 0 0 1-1.47-.63c-.4-.3-.72-.67-.95-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.38-1.53.26-.45.61-.82 1.05-1.1.44-.3.95-.5 1.53-.62a8.8 8.8 0 0 1 3.8.05v-.43c0-.31-.04-.6-.12-.88-.07-.28-.2-.52-.38-.73a1.78 1.78 0 0 0-.73-.5c-.3-.1-.68-.2-1.14-.2a9.85 9.85 0 0 0-2.95.47l-.32-2.19a11.63 11.63 0 0 1 3.55-.53zm-8.03-1.27a1.62 1.62 0 0 0 0-3.24 1.62 1.62 0 1 0 0 3.24zm1.35 13.22h-2.7V7.27l2.7-.42V18.8zm-4.72 0c-4.38.02-4.38-3.54-4.38-4.1l-.01-13.34 2.67-.42v13.25c0 .32 0 2.36 1.72 2.37v2.24zm-8.7-5.9a4.7 4.7 0 0 0-.74-2.79 2.4 2.4 0 0 0-2.07-1 2.4 2.4 0 0 0-2.06 1 4.7 4.7 0 0 0-.74 2.8c0 1.16.25 1.94.74 2.62a2.4 2.4 0 0 0 2.07 1.02c.88 0 1.57-.34 2.07-1.02.49-.68.73-1.46.73-2.63zm2.74 0a6.46 6.46 0 0 1-1.52 4.23c-.49.53-1.07.94-1.76 1.22-.68.29-1.73.45-2.26.45-.53 0-1.58-.15-2.25-.45a5.1 5.1 0 0 1-2.88-3.13 7.3 7.3 0 0 1-.01-4.84 5.13 5.13 0 0 1 2.9-3.1 5.67 5.67 0 0 1 2.22-.42c.81 0 1.56.14 2.24.42.69.29 1.28.69 1.75 1.22.49.52.87 1.15 1.14 1.89a7 7 0 0 1 .43 2.5zm-20.14 0c0 1.11.25 2.36.74 2.88.5.52 1.13.78 1.91.78a4.07 4.07 0 0 0 2.12-.6V9.33c-.19-.04-.99-.2-1.76-.23a2.67 2.67 0 0 0-2.23 1 4.73 4.73 0 0 0-.78 2.8zm7.44 5.27c0 1.82-.46 3.16-1.4 4-.94.85-2.37 1.27-4.3 1.27-.7 0-2.17-.13-3.34-.4l.43-2.11c.98.2 2.27.26 2.95.26 1.08 0 1.84-.22 2.3-.66.46-.43.68-1.08.68-1.94v-.44a5.2 5.2 0 0 1-2.54.6 5.6 5.6 0 0 1-2.01-.36 4.2 4.2 0 0 1-2.58-2.71 9.88 9.88 0 0 1 .02-5.35 4.92 4.92 0 0 1 2.93-2.96 6.6 6.6 0 0 1 2.43-.46 19.64 19.64 0 0 1 4.43.66v10.6z\"\n        />\n      </svg>\n    </a>\n  </div>\n</template>\n\n<script>\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisPoweredBy',\n  mixins: [createSuitMixin({ name: 'PoweredBy' })],\n  props: {\n    theme: {\n      default: 'light',\n      validator(value) {\n        return ['light', 'dark'].indexOf(value) !== -1;\n      },\n    },\n  },\n  computed: {\n    algoliaUrl() {\n      return (\n        'https://www.algolia.com/?' +\n        'utm_source=vue-instantsearch&' +\n        'utm_medium=website&' +\n        `utm_content=${location ? location.hostname : ''}&` +\n        'utm_campaign=poweredby'\n      );\n    },\n  },\n};\n</script>\n","import { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { connectQueryRules } from 'instantsearch.js/es/connectors';\n\nexport default {\n  name: 'AisQueryRuleContext',\n  mixins: [\n    createSuitMixin({ name: 'QueryRuleContext' }),\n    createWidgetMixin({\n      connector: connectQueryRules,\n    }),\n  ],\n  props: {\n    trackedFilters: {\n      type: Object,\n      required: true,\n    },\n    transformRuleContexts: {\n      type: Function,\n      required: false,\n      default: ruleContexts => ruleContexts,\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        trackedFilters: this.trackedFilters,\n        transformRuleContexts: this.transformRuleContexts,\n      };\n    },\n  },\n  render() {\n    return null;\n  },\n};\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot :items=\"state.items\">\n      <div\n        v-for=\"(item, key) in state.items\"\n        :key=\"key\"\n      >\n        <slot\n          name=\"item\"\n          :item=\"item\"\n        >\n          <pre>{{ item }}</pre>\n        </slot>\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { connectQueryRules } from 'instantsearch.js/es/connectors';\n\nexport default {\n  name: 'AisQueryRuleCustomData',\n  mixins: [\n    createSuitMixin({ name: 'QueryRuleCustomData' }),\n    createWidgetMixin({\n      connector: connectQueryRules,\n    }),\n  ],\n  props: {\n    transformItems: {\n      type: Function,\n      required: false,\n      default: items => items,\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        transformItems: this.transformItems,\n      };\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :current-refinement=\"values\"\n      :refine=\"refine\"\n      :can-refine=\"canRefine\"\n      :range=\"state.range\"\n    >\n      <form\n        :class=\"suit('form')\"\n        @submit.prevent=\"refine({ min: pick(minInput, values.min), max: pick(maxInput, values.max) })\"\n      >\n        <label :class=\"suit('label')\">\n          <slot name=\"minLabel\" />\n          <input\n            type=\"number\"\n            :class=\"[suit('input'), suit('input', 'min')]\"\n            :step=\"step\"\n            :min=\"state.range.min\"\n            :max=\"state.range.max\"\n            :placeholder=\"state.range.min\"\n            :value=\"values.min\"\n            @change=\"minInput = $event.currentTarget.value\"\n          >\n        </label>\n        <span :class=\"suit('separator')\">\n          <slot name=\"separator\">to</slot>\n        </span>\n        <label :class=\"suit('label')\">\n          <slot name=\"maxLabel\" />\n          <input\n            :class=\"[suit('input'), suit('input', 'max')]\"\n            type=\"number\"\n            :step=\"step\"\n            :min=\"state.range.min\"\n            :max=\"state.range.max\"\n            :placeholder=\"state.range.max\"\n            :value=\"values.max\"\n            @change=\"maxInput = $event.currentTarget.value\"\n          >\n        </label>\n        <button\n          :class=\"suit('submit')\"\n          type=\"submit\"\n        >\n          <slot name=\"submitLabel\">Go</slot>\n        </button>\n      </form>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectRange } from 'instantsearch.js/es/connectors';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\n\nconst mapStateToCanRefine = state =>\n  state && state.range && state.range.min !== state.range.max;\n\nexport default {\n  name: 'AisRangeInput',\n  mixins: [\n    createSuitMixin({ name: 'RangeInput' }),\n    createWidgetMixin({ connector: connectRange }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    min: {\n      type: Number,\n      required: false,\n      default: -Infinity,\n    },\n    max: {\n      type: Number,\n      required: false,\n      default: Infinity,\n    },\n    precision: {\n      type: Number,\n      required: false,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      minInput: undefined,\n      maxInput: undefined,\n    };\n  },\n  updated() {\n    this.minInput = undefined;\n    this.maxInput = undefined;\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        min: this.min,\n        max: this.max,\n        precision: this.precision,\n      };\n    },\n    canRefine() {\n      return mapStateToCanRefine(this.state);\n    },\n    step() {\n      return 1 / Math.pow(10, this.precision);\n    },\n    values() {\n      const [minValue, maxValue] = this.state.start;\n      const { min: minRange, max: maxRange } = this.state.range;\n\n      return {\n        min: minValue !== -Infinity && minValue !== minRange ? minValue : null,\n        max: maxValue !== Infinity && maxValue !== maxRange ? maxValue : null,\n      };\n    },\n  },\n  methods: {\n    pick(first, second) {\n      if (first !== null && first !== undefined) {\n        return first;\n      } else {\n        return second;\n      }\n    },\n    refine({ min, max }) {\n      this.state.refine([min, max]);\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      :items=\"state.items\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        style=\"display: none;\"\n      >\n        <symbol\n          id=\"ais-RatingMenu-starSymbol\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path d=\"M12 .288l2.833 8.718h9.167l-7.417 5.389 2.833 8.718-7.416-5.388-7.417 5.388 2.833-8.718-7.416-5.389h9.167z\" />\n        </symbol>\n        <symbol\n          id=\"ais-RatingMenu-starEmptySymbol\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path d=\"M12 6.76l1.379 4.246h4.465l-3.612 2.625 1.379 4.246-3.611-2.625-3.612 2.625 1.379-4.246-3.612-2.625h4.465l1.38-4.246zm0-6.472l-2.833 8.718h-9.167l7.416 5.389-2.833 8.718 7.417-5.388 7.416 5.388-2.833-8.718 7.417-5.389h-9.167l-2.833-8.718z\" />\n        </symbol>\n      </svg>\n\n      <ul :class=\"suit('list')\">\n        <li\n          v-for=\"(item, key) in state.items\"\n          :key=\"key\"\n          :class=\"[suit('item'), item.isRefined && suit('item', 'selected')]\"\n        >\n          <a\n            :href=\"state.createURL(item)\"\n            :aria-label=\"`${item.value} & Up`\"\n            :class=\"suit('link')\"\n            @click.prevent=\"state.refine(item.value)\"\n          >\n            <template v-for=\"(full, n) in item.stars\">\n              <svg\n                v-if=\"full\"\n                aria-hidden=\"true\"\n                width=\"24\"\n                height=\"24\"\n                :class=\"[suit('starIcon'), suit('starIcon--full')]\"\n                :key=\"n\"\n              >\n                <use xlink:href=\"#ais-RatingMenu-starSymbol\" />\n              </svg>\n\n              <svg\n                v-else\n                :class=\"[suit('starIcon'), suit('starIcon--empty')]\"\n                aria-hidden=\"true\"\n                width=\"24\"\n                height=\"24\"\n                :key=\"n\"\n              >\n                <use xlink:href=\"#ais-RatingMenu-starEmptySymbol\" />\n              </svg>\n            </template>\n\n            <span\n              :class=\"suit('label')\"\n              aria-hidden=\"true\"\n            >\n              <slot name=\"andUp\">&amp; Up</slot>\n            </span>\n            <span :class=\"suit('count')\">{{ item.count }}</span>\n          </a>\n        </li>\n      </ul>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectRatingMenu } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisRatingMenu',\n  mixins: [\n    createSuitMixin({ name: 'RatingMenu' }),\n    createWidgetMixin({ connector: connectRatingMenu }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => !state.hasNoResults,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    max: {\n      type: Number,\n      default: 5,\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        max: this.max,\n      };\n    },\n  },\n};\n</script>\n","<template>\n  <form\n    action=\"\"\n    role=\"search\"\n    novalidate\n    :class=\"suit('form')\"\n    @submit.prevent=\"onFormSubmit\"\n    @reset.prevent=\"onFormReset\"\n  >\n    <!-- :value/@input allows us to pass v-model to the component -->\n    <input\n      type=\"search\"\n      autocorrect=\"off\"\n      autocapitalize=\"off\"\n      autocomplete=\"off\"\n      spellcheck=\"false\"\n      required\n      maxlength=\"512\"\n      aria-label=\"Search\"\n      :placeholder=\"placeholder\"\n      :autofocus=\"autofocus\"\n      :class=\"suit('input')\"\n      :value=\"value\"\n      @focus=\"$emit('focus', $event)\"\n      @blur=\"$emit('blur', $event)\"\n      @input=\"$emit('input', $event.target.value)\"\n      ref=\"input\"\n    >\n    <button\n      type=\"submit\"\n      :title=\"submitTitle\"\n      :class=\"suit('submit')\"\n      :hidden=\"showLoadingIndicator && shouldShowLoadingIndicator\"\n    >\n      <slot name=\"submit-icon\">\n        <svg\n          role=\"img\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"10\"\n          height=\"10\"\n          viewBox=\"0 0 40 40\"\n          :class=\"suit('submitIcon')\"\n        >\n          <path\n            d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </slot>\n    </button>\n\n    <button\n      type=\"reset\"\n      :title=\"resetTitle\"\n      :class=\"suit('reset')\"\n      :hidden=\"!value || (showLoadingIndicator && shouldShowLoadingIndicator)\"\n    >\n      <slot name=\"reset-icon\">\n        <svg\n          role=\"img\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"1em\"\n          height=\"1em\"\n          viewBox=\"0 0 20 20\"\n          :class=\"suit('resetIcon')\"\n        >\n          <path\n            d=\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </slot>\n    </button>\n\n    <span\n      v-if=\"showLoadingIndicator\"\n      :hidden=\"!shouldShowLoadingIndicator\"\n      :class=\"suit('loadingIndicator')\"\n    >\n      <slot name=\"loading-indicator\">\n        <svg\n          role=\"img\"\n          aria-label=\"Results are loading\"\n          width=\"16\"\n          height=\"16\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          stroke=\"#444\"\n          viewBox=\"0 0 38 38\"\n          :class=\"suit('loadingIcon')\"\n        >\n          <g\n            fill=\"none\"\n            fill-rule=\"evenodd\"\n          >\n            <g\n              transform=\"translate(1 1)\"\n              stroke-width=\"2\"\n            >\n              <circle\n                stroke-opacity=\".5\"\n                cx=\"18\"\n                cy=\"18\"\n                r=\"18\"\n              />\n              <path d=\"M36 18c0-9.94-8.06-18-18-18\">\n                <animateTransform\n                  attributeName=\"transform\"\n                  type=\"rotate\"\n                  from=\"0 18 18\"\n                  to=\"360 18 18\"\n                  dur=\"1s\"\n                  repeatCount=\"indefinite\"\n                />\n              </path>\n            </g>\n          </g>\n        </svg>\n      </slot>\n    </span>\n  </form>\n</template>\n\n<script>\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'SearchInput',\n  mixins: [createSuitMixin({ name: 'SearchBox' })],\n  props: {\n    placeholder: {\n      type: String,\n      default: 'Search here…',\n    },\n    autofocus: {\n      type: Boolean,\n      default: false,\n    },\n    showLoadingIndicator: {\n      type: Boolean,\n      default: false,\n    },\n    shouldShowLoadingIndicator: {\n      type: Boolean,\n      default: false,\n    },\n    submitTitle: {\n      type: String,\n      default: 'Search',\n    },\n    resetTitle: {\n      type: String,\n      default: 'Clear',\n    },\n    value: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      query: '',\n    };\n  },\n  methods: {\n    onFormSubmit() {\n      const input = this.$refs.input;\n      input.blur();\n    },\n    onFormReset() {\n      this.$emit('input', '');\n      this.$emit('reset');\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    :class=\"[\n      suit(),\n      !state.canRefine && suit('','noRefinement')\n    ]\"\n    v-if=\"state\"\n  >\n    <slot\n      :items=\"items\"\n      :refine=\"refine\"\n      :search-for-items=\"state.searchForItems\"\n      :search-for-items-query=\"searchForFacetValuesQuery\"\n      :toggle-show-more=\"toggleShowMore\"\n      :can-toggle-show-more=\"state.canToggleShowMore\"\n      :is-showing-more=\"state.isShowingMore\"\n      :createURL=\"state.createURL\"\n      :is-from-search=\"state.isFromSearch\"\n      :can-refine=\"state.canRefine\"\n    >\n      <div\n        :class=\"suit('searchBox')\"\n        v-if=\"searchable\"\n      >\n        <search-input\n          v-model=\"searchForFacetValues\"\n          :placeholder=\"searchablePlaceholder\"\n          :class-names=\"classNames\"\n        />\n      </div>\n      <slot\n        name=\"noResults\"\n        :query=\"searchForFacetValues\"\n        v-if=\"state.isFromSearch && items.length === 0\"\n      >\n        <div :class=\"suit('noResults')\">No results.</div>\n      </slot>\n      <ul :class=\"suit('list')\">\n        <li\n          :class=\"[\n          suit('item'), item.isRefined && suit('item', 'selected')]\"\n          v-for=\"item in items\"\n          :key=\"item.value\"\n        >\n          <slot\n            name=\"item\"\n            :item=\"item\"\n            :refine=\"refine\"\n            :createURL=\"state.createURL\"\n          >\n            <label :class=\"suit('label')\">\n              <input\n                :class=\"suit('checkbox')\"\n                type=\"checkbox\"\n                :value=\"item.value\"\n                :checked=\"item.isRefined\"\n                @change=\"refine(item.value)\"\n              >\n              <span\n                v-if=\"searchable\"\n                :class=\"suit('labelText')\"\n              >\n                <ais-highlight\n                  attribute=\"item\"\n                  :hit=\"item\"\n                />\n              </span>\n              <span\n                v-else\n                :class=\"suit('labelText')\"\n              >{{ item.label }}</span>\n              <span :class=\"suit('count')\">{{ item.count }}</span>\n            </label>\n          </slot>\n        </li>\n      </ul>\n      <button\n        :class=\"[\n          suit('showMore'),\n          {\n            [suit('showMore', 'disabled')]: !state.canToggleShowMore,\n          }\n        ]\"\n        @click=\"toggleShowMore\"\n        v-if=\"showMore\"\n        :disabled=\"!state.canToggleShowMore\"\n      >\n        <slot\n          name=\"showMoreLabel\"\n          :is-showing-more=\"state.isShowingMore\"\n        >Show {{ state.isShowingMore ? 'less' : 'more' }}</slot>\n      </button>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\nimport { connectRefinementList } from 'instantsearch.js/es/connectors';\nimport SearchInput from './SearchInput.vue';\nimport AisHighlight from './Highlight.vue';\n\nconst noop = () => {};\n\nexport default {\n  name: 'AisRefinementList',\n  components: { SearchInput, AisHighlight },\n  mixins: [\n    createSuitMixin({ name: 'RefinementList' }),\n    createWidgetMixin({ connector: connectRefinementList }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => state.canRefine,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    searchable: {\n      type: Boolean,\n      default: false,\n    },\n    searchablePlaceholder: {\n      default: 'Search here…',\n      type: String,\n      required: false,\n    },\n    operator: {\n      default: 'or',\n      validator(value) {\n        return value === 'and' || value === 'or';\n      },\n      required: false,\n    },\n    limit: {\n      type: Number,\n      default: 10,\n      required: false,\n    },\n    showMoreLimit: {\n      type: Number,\n      default: 20,\n      required: false,\n    },\n    showMore: {\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    sortBy: {\n      type: [Array, Function],\n      default: () => ['isRefined', 'count:desc', 'name:asc'],\n      required: false,\n    },\n    transformItems: {\n      type: Function,\n      default: items => items,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      searchForFacetValuesQuery: '',\n    };\n  },\n  computed: {\n    searchForFacetValues: {\n      get() {\n        return this.searchForFacetValuesQuery;\n      },\n      set(value) {\n        this.state.searchForItems(value);\n        this.searchForFacetValuesQuery = value;\n      },\n    },\n    toggleShowMore() {\n      return this.state.toggleShowMore || noop;\n    },\n    items() {\n      return this.state.items.map(item =>\n        Object.assign({}, item, {\n          _highlightResult: {\n            item: {\n              value: item.highlighted,\n            },\n          },\n        })\n      );\n    },\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        operator: this.operator,\n        limit: this.limit,\n        showMore: this.showMore,\n        showMoreLimit: this.showMoreLimit,\n        sortBy: this.sortBy,\n        escapeFacetValues: true,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n  methods: {\n    refine(value) {\n      this.state.refine(value);\n      this.searchForFacetValuesQuery = '';\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    :class=\"suit()\"\n    v-if=\"state && state.state && state.results\"\n  >\n    <slot v-bind=\"stateResults\">\n      <p>\n        Use this component to have a different layout based on a certain state.\n      </p>\n      <p>\n        Fill in the slot, and get access to the following things on the\n        <code>slot-scope</code>:\n      </p>\n      <pre>results: {{ Object.keys(state.results) }}</pre>\n      <pre>state: {{ Object.keys(state.state) }}</pre>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { _objectSpread } from '../util/polyfills';\nimport connectStateResults from '../connectors/connectStateResults';\n\nexport default {\n  name: 'AisStateResults',\n  mixins: [\n    createWidgetMixin({ connector: connectStateResults }),\n    createSuitMixin({ name: 'StateResults' }),\n  ],\n  computed: {\n    stateResults() {\n      // @MAJOR: replace v-bind=\"stateResults\" with :state=\"state.state\" :results=\"state.results\"\n      const { state, results } = this.state;\n      return _objectSpread({}, results, { results, state });\n    },\n  },\n};\n</script>\n","import { _objectSpread } from '../util/polyfills';\n\nconst connectStateResults = (renderFn, unmountFn = () => {}) => (\n  widgetParams = {}\n) => ({\n  init({ instantSearchInstance }) {\n    renderFn(\n      {\n        state: undefined,\n        results: undefined,\n        instantSearchInstance,\n        widgetParams,\n      },\n      true\n    );\n  },\n\n  render({ results, instantSearchInstance, state }) {\n    const resultsCopy = _objectSpread({}, results);\n\n    const stateCopy = _objectSpread({}, state);\n\n    renderFn(\n      {\n        results: resultsCopy,\n        state: stateCopy,\n        instantSearchInstance,\n        widgetParams,\n      },\n      false\n    );\n  },\n\n  dispose() {\n    unmountFn();\n  },\n});\n\nexport default connectStateResults;\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      :current-refinement=\"currentRefinement\"\n      :is-search-stalled=\"state.isSearchStalled\"\n      :refine=\"state.refine\"\n    >\n      <search-input\n        @focus=\"$emit('focus', $event)\"\n        @blur=\"$emit('blur', $event)\"\n        @reset=\"$emit('reset')\"\n        :placeholder=\"placeholder\"\n        :autofocus=\"autofocus\"\n        :show-loading-indicator=\"showLoadingIndicator\"\n        :should-show-loading-indicator=\"state.isSearchStalled\"\n        :submit-title=\"submitTitle\"\n        :reset-title=\"resetTitle\"\n        :class-names=\"classNames\"\n        v-model=\"currentRefinement\"\n      >\n        <slot\n          name=\"loading-indicator\"\n          slot=\"loading-indicator\"\n        />\n        <slot\n          name=\"submit-icon\"\n          slot=\"submit-icon\"\n        />\n        <slot\n          name=\"reset-icon\"\n          slot=\"reset-icon\"\n        />\n      </search-input>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectSearchBox } from 'instantsearch.js/es/connectors';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\nimport SearchInput from './SearchInput.vue';\n\nexport default {\n  name: 'AisSearchBox',\n  mixins: [\n    createWidgetMixin({ connector: connectSearchBox }),\n    createSuitMixin({ name: 'SearchBox' }),\n  ],\n  components: {\n    SearchInput,\n  },\n  props: {\n    placeholder: {\n      type: String,\n      default: 'Search here…',\n    },\n    autofocus: {\n      type: Boolean,\n      default: false,\n    },\n    showLoadingIndicator: {\n      type: Boolean,\n      default: false,\n    },\n    submitTitle: {\n      type: String,\n      default: 'Search',\n    },\n    resetTitle: {\n      type: String,\n      default: 'Clear',\n    },\n    value: {\n      type: String,\n      default: undefined,\n    },\n  },\n  data() {\n    return {\n      localValue: '',\n    };\n  },\n  methods: {\n    onFormSubmit() {\n      const input = this.$el.querySelector('input[type=search]');\n      input.blur();\n    },\n    onFormReset() {\n      this.state.refine('');\n    },\n  },\n  computed: {\n    isControlled() {\n      return typeof this.value !== 'undefined';\n    },\n    currentRefinement: {\n      get() {\n        // if the input is controlled, but not up to date\n        // this means it didn't search, and we should pretend it was `set`\n        if (this.isControlled && this.value !== this.localValue) {\n          // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n          this.localValue = this.value;\n          this.$emit('input', this.value);\n          this.state.refine(this.value);\n        }\n        return this.value || this.state.query || '';\n      },\n      set(val) {\n        this.localValue = val;\n        this.state.refine(val);\n        if (this.isControlled) {\n          this.$emit('input', val);\n        }\n      },\n    },\n  },\n};\n</script>\n","<template>\n  <ais-highlighter\n    :hit=\"hit\"\n    :attribute=\"attribute\"\n    :highlighted-tag-name=\"highlightedTagName\"\n    :suit=\"suit\"\n    highlight-property=\"_snippetResult\"\n    pre-tag=\"<mark>\"\n    post-tag=\"</mark>\"\n  />\n</template>\n\n<script>\nimport { createSuitMixin } from '../mixins/suit';\nimport AisHighlighter from './Highlighter.vue';\n\nexport default {\n  name: 'AisSnippet',\n  mixins: [createSuitMixin({ name: 'Snippet' })],\n  components: { AisHighlighter },\n  props: {\n    hit: {\n      type: Object,\n      required: true,\n    },\n    attribute: {\n      type: String,\n      required: true,\n    },\n    highlightedTagName: {\n      type: String,\n      default: 'mark',\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    :class=\"suit()\"\n    v-if=\"state\"\n  >\n    <slot\n      :items=\"state.options\"\n      :has-no-results=\"state.hasNoResults\"\n      :refine=\"state.refine\"\n      :current-refinement=\"state.currentRefinement\"\n    >\n      <select\n        :class=\"suit('select')\"\n        @change=\"state.refine($event.currentTarget.value)\"\n      >\n        <option\n          v-for=\"item in state.options\"\n          :key=\"item.value\"\n          :class=\"suit('option')\"\n          :value=\"item.value\"\n          :selected=\"item.value === state.currentRefinement\"\n        >{{ item.label }}</option>\n      </select>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectSortBy } from 'instantsearch.js/es/connectors';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\n\nexport default {\n  name: 'AisSortBy',\n  mixins: [\n    createSuitMixin({ name: 'SortBy' }),\n    createWidgetMixin({ connector: connectSortBy }),\n\n    createPanelConsumerMixin({\n      mapStateToCanRefine: state => !state.hasNoResults,\n    }),\n  ],\n  props: {\n    items: {\n      type: Array,\n      required: true,\n    },\n    transformItems: {\n      type: Function,\n      default(items) {\n        return items;\n      },\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        items: this.items,\n        transformItems: this.transformItems,\n      };\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot\n      v-bind=\"state\"\n      :results=\"state.instantSearchInstance.helper.lastResults\"\n    >\n      <span :class=\"suit('text')\">{{ state.nbHits.toLocaleString() }} results found in {{ state.processingTimeMS.toLocaleString() }}ms</span>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { createWidgetMixin } from '../mixins/widget';\nimport { connectStats } from 'instantsearch.js/es/connectors';\nimport { createSuitMixin } from '../mixins/suit';\n\nexport default {\n  name: 'AisStats',\n  mixins: [\n    createWidgetMixin({ connector: connectStats }),\n    createSuitMixin({ name: 'Stats' }),\n  ],\n  computed: {\n    widgetParams() {\n      return {};\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :value=\"state.value\"\n      :can-refine=\"canRefine\"\n      :refine=\"state.refine\"\n      :createURL=\"state.createURL\"\n    >\n      <label :class=\"suit('label')\">\n        <input\n          :class=\"suit('checkbox')\"\n          type=\"checkbox\"\n          :name=\"state.value.name\"\n          :value=\"on\"\n          :checked=\"state.value.isRefined\"\n          @change=\"state.refine(state.value)\"\n        >\n        <span :class=\"suit('labelText')\">{{ label }}</span>\n        <span\n          v-if=\"state.value.count !== null\"\n          :class=\"suit('count')\"\n        >{{ state.value.count.toLocaleString() }}</span>\n      </label>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectToggleRefinement } from 'instantsearch.js/es/connectors';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\n\nconst mapStateToCanRefine = state => Boolean(state.value.count);\n\nexport default {\n  name: 'AisToggleRefinement',\n  mixins: [\n    createSuitMixin({ name: 'ToggleRefinement' }),\n    createWidgetMixin({ connector: connectToggleRefinement }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    label: {\n      type: String,\n      required: true,\n    },\n    on: {\n      type: [String, Number, Boolean],\n      required: false,\n      default: true,\n    },\n    off: {\n      type: [String, Number, Boolean],\n      required: false,\n      // explicit otherwise Vue coerces the default value\n      // to false because of the `Boolean` prop type\n      default: undefined,\n    },\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        label: this.label,\n        on: this.on,\n        off: this.off,\n      };\n    },\n    canRefine() {\n      return mapStateToCanRefine(this.state);\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot v-bind=\"rootSlotProps\">\n      <button\n        type=\"button\"\n        :class=\"suit('button')\"\n        :title=\"state.isBrowserSupported ? buttonTitle : disabledButtonTitle\"\n        :disabled=\"!state.isBrowserSupported\"\n        @click=\"handleClick\"\n      >\n        <slot\n          name=\"buttonText\"\n          v-bind=\"innerSlotProps\"\n        >\n          <svg\n            v-bind=\"buttonSvgAttrs\"\n            v-if=\"errorNotAllowed\"\n          >\n            <line\n              x1=\"1\"\n              y1=\"1\"\n              x2=\"23\"\n              y2=\"23\"\n            />\n            <path d=\"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6\" />\n            <path d=\"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23\" />\n            <line\n              x1=\"12\"\n              y1=\"19\"\n              x2=\"12\"\n              y2=\"23\"\n            />\n            <line\n              x1=\"8\"\n              y1=\"23\"\n              x2=\"16\"\n              y2=\"23\"\n            />\n          </svg>\n          <svg\n            v-bind=\"buttonSvgAttrs\"\n            v-else\n          >\n            <path\n              d=\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\"\n              :fill=\"state.isListening ? 'currentColor' : 'none'\"\n            />\n            <path d=\"M19 10v2a7 7 0 0 1-14 0v-2\" />\n            <line\n              x1=\"12\"\n              y1=\"19\"\n              x2=\"12\"\n              y2=\"23\"\n            />\n            <line\n              x1=\"8\"\n              y1=\"23\"\n              x2=\"16\"\n              y2=\"23\"\n            />\n          </svg>\n        </slot>\n      </button>\n      <div :class=\"suit('status')\">\n        <slot\n          name=\"status\"\n          v-bind=\"innerSlotProps\"\n        >\n          <p>{{ state.voiceListeningState.transcript }}</p>\n        </slot>\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectVoiceSearch } from 'instantsearch.js/es/connectors';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\n\nexport default {\n  name: 'AisVoiceSearch',\n  mixins: [\n    createWidgetMixin({ connector: connectVoiceSearch }),\n    createSuitMixin({ name: 'VoiceSearch' }),\n  ],\n  props: {\n    searchAsYouSpeak: {\n      type: Boolean,\n      required: false,\n      default: undefined,\n    },\n    buttonTitle: {\n      type: String,\n      required: false,\n      default: 'Search by voice',\n    },\n    disabledButtonTitle: {\n      type: String,\n      required: false,\n      default: 'Search by voice (not supported on this browser)',\n    },\n  },\n  data() {\n    return {\n      buttonSvgAttrs: {\n        xmlns: 'http://www.w3.org/2000/svg',\n        width: '16',\n        height: '16',\n        viewBox: '0 0 24 24',\n        fill: 'none',\n        stroke: 'currentColor',\n        strokeWidth: '2',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n      },\n    };\n  },\n  computed: {\n    widgetParams() {\n      return {\n        searchAsYouSpeak: this.searchAsYouSpeak,\n      };\n    },\n    errorNotAllowed() {\n      return (\n        this.state.voiceListeningState.status === 'error' &&\n        this.state.voiceListeningState.errorCode === 'not-allowed'\n      );\n    },\n    rootSlotProps() {\n      return {\n        isBrowserSupported: this.state.isBrowserSupported,\n        isListening: this.state.isListening,\n        toggleListening: this.state.toggleListening,\n        voiceListeningState: this.state.voiceListeningState,\n      };\n    },\n    innerSlotProps() {\n      return {\n        status: this.state.voiceListeningState.status,\n        errorCode: this.state.voiceListeningState.errorCode,\n        isListening: this.state.isListening,\n        transcript: this.state.voiceListeningState.transcript,\n        isSpeechFinal: this.state.voiceListeningState.isSpeechFinal,\n        isBrowserSupported: this.state.isBrowserSupported,\n      };\n    },\n  },\n  methods: {\n    handleClick(event) {\n      event.currentTarget.blur();\n      this.state.toggleListening();\n    },\n  },\n};\n</script>\n","/* eslint import/namespace: ['error', { allowComputed: true }]*/\n\nimport * as widgets from './widgets';\n\nexport const plugin = {\n  install(localVue) {\n    Object.keys(widgets).forEach(widgetName => {\n      localVue.component(widgets[widgetName].name, widgets[widgetName]);\n    });\n  },\n};\n","import { plugin } from './plugin';\n\n// Automatically register Algolia Search components if Vue is available globally\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(plugin);\n}\n\nexport * from './instantsearch';\n","import instantsearch from 'instantsearch.js/es';\nimport algoliaHelper from 'algoliasearch-helper';\nconst { SearchParameters, SearchResults } = algoliaHelper;\nimport { _objectSpread } from './polyfills';\nimport { warn } from './warn';\n\nexport const createInstantSearch = instantSearchOptions => {\n  const search = instantsearch(instantSearchOptions);\n  const { searchClient, indexName } = instantSearchOptions;\n\n  // main API for SSR, called in asyncData of a root component which contains instantsearch\n  search.findResultsState = params => {\n    search.helper = algoliaHelper(\n      searchClient,\n      indexName,\n      _objectSpread({}, params, {\n        // parameters set by default\n        highlightPreTag: '__ais-highlight__',\n        highlightPostTag: '__/ais-highlight__',\n      })\n    );\n\n    return search.helper.searchOnce().then(({ content: lastResults }) => {\n      // The search instance needs to act as if this was a regular `search`\n      // but return a promise, since that is the interface of `asyncData`\n      search.helper.lastResults = lastResults;\n    });\n  };\n\n  // make sure correct data is available in each widget's state\n  // called in widget mixin\n  search.__forceRender = widget => {\n    if (!search.helper) {\n      warn(\n        '`instantsearch.findResultsState()` needs to be called when using `ais-instant-search-ssr`.'\n      );\n      return;\n    }\n\n    widget.init({\n      state: search.helper.lastResults._state,\n      helper: search.helper,\n      templatesConfig: {},\n      createURL: () => '#',\n      onHistoryChange: () => {},\n      instantSearchInstance: search,\n    });\n\n    widget.render({\n      state: search.helper.lastResults._state,\n      results: search.helper.lastResults,\n      helper: search.helper,\n      templatesConfig: {},\n      // TODO: use memory or real router\n      createURL: () => '#',\n      instantSearchInstance: search,\n      searchMetadata: {\n        isSearchStalled: false,\n      },\n    });\n  };\n\n  search.getState = () => {\n    if (search.helper === null || !search.helper.lastResults) {\n      return undefined;\n    }\n    return {\n      lastResults: JSON.parse(JSON.stringify(search.helper.lastResults)),\n    };\n  };\n\n  // called before app mounts on client\n  search.hydrate = instantSearchState => {\n    if (!instantSearchState || !instantSearchState.lastResults) {\n      warn('The result of `getState()` needs to be passed to `hydrate()`.');\n      return;\n    }\n    const { lastResults } = instantSearchState;\n    search.searchParameters = lastResults._state;\n    search.helper = algoliaHelper(searchClient, indexName, lastResults._state);\n    search.helper.lastResults = new SearchResults(\n      new SearchParameters(lastResults._state),\n      lastResults._rawResults\n    );\n\n    search.hydrated = true;\n  };\n\n  // put this in the user's root Vue instance\n  // we can then reuse that InstantSearch instance seamlessly from `ais-ssr`\n  const rootMixin = {\n    provide() {\n      return {\n        // should be possible to configure this with {camelcase: ['error', {allow: ['^\\\\$_']}]}\n        // but that didn't work\n        // eslint-disable-next-line camelcase\n        $_ais: search,\n      };\n    },\n  };\n\n  return {\n    instantsearch: search,\n    rootMixin,\n  };\n};\n"],"names":["const","cache","Set","warn","message","has","add","console","createWidgetMixin","ref","inject","instantSearchInstance","name","default","tag","this","$options","_componentTag","TypeError","data","state","created","connector","factory","updateState","widget","widgetParams","addWidget","hydrated","$isServer","__forceRender","Error","beforeDestroy","dispose","started","removeWidget","watch","handler","nextWidgetParams","deep","methods","isFirstRender","uniq","array","filter","value","index","self","indexOf","find","items","predicate","thisArg","Array","prototype","unescapeRefinement","String","replace","getRefinement","type","attributeName","count","resultsFacets","arguments","length","undefined","res","facet","resultsFacet","facetDeclaration","getHierarchicalFacetByName","nameParts","split","separator","_loop","i","facetData","Object","keys","map","refinementKey","refinement","exhaustive","getRefinements","results","clearsQuery","_state$facetsRefineme","facetsRefinements","_state$facetsExcludes","facetsExcludes","_state$disjunctiveFac","disjunctiveFacetsRefinements","_state$hierarchicalFa","hierarchicalFacetsRefinements","_state$numericRefinem","numericRefinements","_state$tagRefinements","tagRefinements","forEach","push","facets","exclude","disjunctiveFacets","hierarchicalFacets","operators","operator","valueOrValues","isArray","concat","numericValue","query","trim","clearRefinements","_ref","helper","_ref$attributesToClea","attributesToClear","finalState","setPage","attribute","clearTags","setQuery","escapeRefinement","_typeof","obj","Symbol","iterator","constructor","checkRendering","rendering","usage","getPropertyByPath","object","path","reduce","current","key","noop","isFiniteNumber","isFinite","isPlainObject","isObjectLike","toString","call","getTag","getPrototypeOf","proto","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","range","_ref$start","start","end","_ref$step","step","limitStep","arrayLength","Math","round","_","isPrimitive","isEqual","first","second","_i","_Object$keys","htmlEscapes","&","<",">","\"","'","regexUnescapedHtml","regexHasUnescapedHtml","RegExp","source","mergeDeep","_len","values","_key","acc","previousValue","nextValue","_warning","createDocumentationMessageGenerator","widgets","links","_ref$connector","join","Boolean","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_defineProperty","defineProperty","configurable","writable","addAbsolutePosition","hits","page","hitsPerPage","hit","idx","target","getOwnPropertyDescriptors","defineProperties","_objectSpread","__position","addQueryID","queryID","__queryID","withUsage","getAttributesToClear","_ref3","includedAttributes","excludedAttributes","transformItems","lastResults","getFilteredRefinements","filterFunction","item","currentItem","result","label","refinements","sort","a","b","refine","clearRefinement","groupItemsByRefinements","normalizeRefinement","clearRefinementFromState","removeFacetRefinement","removeDisjunctiveFacetRefinement","removeHierarchicalFacetRefinement","removeExcludeRefinement","removeNumericRefinement","removeTagRefinement","setQueryParameter","setState","search","Number","getOperatorSymbol","normalizedRefinement","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","_s","next","done","err","_iterableToArrayLimit","_nonIterableRest","TAG_PLACEHOLDER","highlightPreTag","highlightPostTag","TAG_REPLACEMENT","replaceTagsAndEscape","test","character","escape","recursiveEscape","input","escapeHits","__escaped","_highlightResult","_snippetResult","inferPayload","method","objectIDs","selectedHits","selectedObjectIDs","objectID","h","getSelectedHits","queryIDs","getQueryID","positions","getPositions","wrapInsightsClient","aa","payload","inferredPayload","withInsights","renderFn","unmountFn","renderOptions","insightsClient","insights","wrapRenderFn","connectHitsWithInsights","_widgetParams$escapeH","escapeHTML","_widgetParams$transfo","getConfiguration","init","render","_ref2","initialEscaped","connectInfiniteHitsWithInsights","prevState","showPrevious","showMore","_ref$escapeHTML","_ref$transformItems","_ref$showPrevious","hasShowPrevious","hitsCache","firstReceivedPage","Infinity","lastReceivedPage","overrideStateWithoutTriggeringChangeEvent","getShowPrevious","getShowMore","isFirstPage","isLastPage","currentState","nbPages","getWidgetState","uiState","_ref4","searchParameters","getWidgetSearchParameters","_ref5","uiPage","connectMenu","_widgetParams$limit","limit","_widgetParams$showMor","_widgetParams$showMor2","showMoreLimit","_widgetParams$sortBy","sortBy","isShowingMore","toggleShowMore","cachedToggleShowMore","createToggleShowMore","_this","getLimit","facetValue","refinedItem","getHierarchicalFacetBreadcrumb","toggleRefinement","configuration","widgetConfiguration","attributes","currentMaxValuesPerFacet","maxValuesPerFacet","max","createURL","bind","_createURL","_refine","canRefine","canToggleShowMore","facetItems","getFacetValues","slice","nextState","isHierarchicalFacetRefined","removeHierarchicalFacet","setQueryParameters","_ref6","menu","_ref7","uiStateRefinedItem","isRefined","option","currentRefinements","getNumericRefinements","hasNumericRefinement","resolvedState","refinedOption","JSON","parse","window","decodeURI","addNumericRefinement","includes","_defineProperties","props","descriptor","Paginator","params","instance","Constructor","_classCallCheck","currentPage","total","padding","protoProps","staticProps","totalDisplayedPages","nbPagesDisplayed","paddingLeft","calculatePaddingLeft","min","n","iteratee","global","freeSelf","freeGlobal","Function","root","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","isOwn","unmasked","e","nullTag","undefinedTag","getRawTag","objectToString","argsTag","baseGetTag","baseIsArguments","freeExports","exports","nodeType","freeModule","module","Buffer","isBuffer","stubFalse","MAX_SAFE_INTEGER","reIsUint","typedArrayTags","isLength","func","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","baseUnary","baseIsTypedArray","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","baseTimes","isIndex","Ctor","transform","arg","overArg","isPrototype","nativeKeys","asyncTag","funcTag","genTag","proxyTag","isObject","isFunction","isArrayLike","arrayLikeKeys","baseKeys","uid","maskSrcKey","exec","coreJsData","IE_PROTO","funcToString","reIsHostCtor","funcProto","reIsNative","isMasked","toSource","getValue","baseIsNative","getNative","__data__","nativeCreate","size","HASH_UNDEFINED","Hash","entries","clear","entry","set","hashClear","hashDelete","get","hashGet","hashHas","hashSet","other","eq","splice","assocIndexOf","pop","ListCache","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","hash","Map","string","isKeyable","getMapData","MapCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","SetCache","setCacheAdd","setCacheHas","fromIndex","fromRight","strictIndexOf","baseFindIndex","baseIsNaN","baseIndexOf","comparator","nativeMin","arrays","arrayIncludesWith","arrayIncludes","othLength","othIndex","caches","maxLength","arrayMap","seen","outer","computed","cacheHas","args","nativeMax","otherArgs","constant","identity","HOT_COUNT","HOT_SPAN","nativeNow","Date","now","lastCalled","stamp","remaining","shortOut","baseSetToString","setToString","overRest","isArrayLikeObject","baseRest","mapped","castArrayLikeObject","baseIntersection","keysFunc","iterable","createBaseFor","baseFor","baseForOwn","castFunction","eachFunc","collection","createBaseEach","arrayEach","baseEach","resIndex","LARGE_ARRAY_SIZE","pairs","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","bitmask","customizer","equalFunc","stack","isPartial","arrLength","stacked","arrValue","othValue","compared","arraySome","Uint8Array","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","valueOf","byteLength","byteOffset","buffer","convert","mapToArray","setToArray","equalArrays","offset","symbolsFunc","arrayPush","nativeGetSymbols","arrayFilter","symbol","stubArray","baseGetAllKeys","getSymbols","objProps","getAllKeys","objLength","skipCtor","objValue","objCtor","othCtor","dataViewCtorString","DataView","mapCtorString","promiseCtorString","Promise","setCtorString","weakMapCtorString","WeakMap","ArrayBuffer","resolve","ctorString","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsEqual","baseIsEqualDeep","matchData","noCustomizer","srcValue","isStrictComparable","getMatchData","matchesStrictComparable","baseIsMatch","reIsDeepProp","reIsPlainProp","isSymbol","FUNC_ERROR_TEXT","memoize","resolver","memoized","Cache","MAX_MEMOIZE_SIZE","rePropName","reEscapeChar","memoizeCapped","charCodeAt","match","number","quote","subString","INFINITY","symbolToString","baseToString","isKey","stringToPath","castPath","toKey","defaultValue","baseGet","hasFunc","hasPath","baseHasIn","hasIn","baseProperty","basePropertyDeep","baseMatchesProperty","baseMatches","property","baseFilter","baseIteratee","baseMap","accumulator","initAccum","arrayReduce","baseReduce","baseAssignValue","isNew","newValue","assignValue","copyObject","nativeKeysIn","isProto","baseKeysIn","keysIn","allocUnsafe","isDeep","copy","getPrototype","getSymbolsIn","arrayBuffer","dataView","cloneArrayBuffer","reFlags","regexp","lastIndex","typedArray","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","cloneDataView","cloneTypedArray","cloneRegExp","cloneSymbol","objectCreate","create","baseCreate","nodeIsMap","isMap","baseIsMap","nodeIsSet","isSet","baseIsSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","cloneableTags","baseClone","isFlat","isFull","initCloneArray","copyArray","isFunc","cloneBuffer","initCloneObject","copySymbolsIn","baseAssignIn","copySymbols","baseAssign","initCloneByTag","subValue","getAllKeysIn","baseSlice","parent","last","objectCtorString","spreadableSymbol","isConcatSpreadable","baseFlatten","depth","isStrict","isFlattenable","flatten","flatRest","paths","customOmitClone","baseUnset","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","isBinary","MAX_INTEGER","toNumber","toFinite","remainder","toInteger","isNumber","findIndexFunc","createFind","findIndex","strSymbols","chrSymbols","reHasUnicode","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsSeq","rsSymbol","reUnicode","hasUnicode","unicodeToArray","asciiToArray","chars","guard","stringToArray","charsStartIndex","charsEndIndex","castSlice","sources","isIterateeCall","propsIndex","propsLength","srcIndex","mergeFunc","safeGet","assignMergeValue","isCommon","isTyped","toPlainObject","baseMerge","baseMergeDeep","assigner","createAssigner","valToNumber","v","isString","parseFloat","filters","partialState","attributeFilters","f","aF","attr","isConjunctiveFacet","isFacetRefined","isDisjunctiveFacet","isDisjunctiveFacetRefined","isHierarchicalFacet","isEmpty","parameterKey","lib","addRefinement","refinementList","valueAsString","facetRefinement","mod","defaults","removeRefinement","isUndefined","refinementType","omit","hasChanged","newRefinementList","memo","facetList","refinementValue","require$$0","containsRefinements","refinementValueAsString","SearchParameters","newParameters","_parseNumbers","numericFilters","tagFilters","optionalTagFilters","optionalFacetFilters","queryType","typoTolerance","minWordSizefor1Typo","minWordSizefor2Typos","minProximity","allowTyposOnNumericTokens","ignorePlurals","restrictSearchableAttributes","advancedSyntax","analytics","analyticsTags","synonyms","replaceSynonymsInHighlight","optionalWords","removeWordsIfNoResults","attributesToRetrieve","attributesToHighlight","attributesToSnippet","getRankingInfo","distinct","aroundLatLng","aroundLatLngViaIP","aroundRadius","minimumAroundRadius","aroundPrecision","insideBoundingBox","insidePolygon","snippetEllipsisText","disableExactOnAttributes","enableExactOnSingleWordQuery","forOwn","paramValue","paramName","PARAMETERS","numbers","k","parsedValue","isNaN","geoRect","parsedValues","vPrime","merge","make","rootPath","currentRefinement","getHierarchicalRefinement","toggleHierarchicalFacetRefinement","validate","parameters","RefinementList","patch","_clearNumericRefinements","setIndex","newQuery","newPage","setFacets","setDisjunctiveFacets","setHitsPerPage","setTypoTolerance","isNumericRefined","getConjunctiveRefinements","facetName","getDisjunctiveRefinements","getExcludeRefinements","paramValueAsNumber","op","val","getNumericRefinement","newNumericRefinements","operatorList","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","hierarchicalFacet","addFacetRefinement","addExcludeRefinement","addDisjunctiveFacetRefinement","addTagRefinement","isTagRefined","modification","removeFacet","removeDisjunctiveFacet","t","toggleFacetRefinement","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","toggleExcludeFacetRefinement","_getHierarchicalFacetSeparator","lastIndexOf","addHierarchicalFacetRefinement","toggleTagRefinement","isExcludeRefined","isOperatorDefined","searchedValue","isAttributeValueDefined","currentValue","getRefinedDisjunctiveFacets","disjunctiveNumericRefinedFacets","intersection","getRefinedHierarchicalFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","getQueryParams","queryParams","getQueryParameter","parameter","error","parsedParams","mutateMe","newInstance","ks","filterState","fn","newState","_getHierarchicalFacetSortBy","_getHierarchicalRootPath","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","stringify","baseSum","baseValues","comparer","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","orders","objCriteria","criteria","othCriteria","ordersLength","compareAscending","iteratees","baseSortBy","compareMultiple","baseOrderBy","metaMap","thisBinding","WRAP_BIND_FLAG","isBind","createCtor","wrapper","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","holdersIndex","rightIndex","rightLength","placeholder","MAX_ARRAY_LENGTH","LazyWrapper","__wrapped__","__actions__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","baseLodash","realNames","otherFunc","LodashWrapper","chainAll","__chain__","__index__","__values__","clone","lodash","wrapperClone","funcName","getFuncName","getData","baseSetData","reWrapDetails","reSplitDetails","reWrapComment","details","wrapFlags","pair","reference","insertWrapDetails","updateWrapDetails","getWrapDetails","WRAP_BIND_KEY_FLAG","WRAP_CURRY_BOUND_FLAG","WRAP_CURRY_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","wrapFunc","argPos","ary","arity","isCurry","newData","isLaziable","setData","setWrapToString","indexes","oldArray","PLACEHOLDER","WRAP_CURRY_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_FLIP_FLAG","createHybrid","partialsRight","holdersRight","isAry","isBindKey","isFlip","getHolder","holdersCount","countHolders","composeArgs","composeArgsRight","newHolders","replaceHolders","createRecurry","reorder","reverse","WRAP_REARG_FLAG","srcBitmask","newBitmask","isCombo","mergeData","createCurry","createPartial","createBind","partial","createWrap","partialRight","lower","upper","position","baseClamp","out","sortInstruction","sortInstructions","similarDefault","startsWith","nested","baseSet","prop","basePickBy","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","prepareHierarchicalFacetSortBy","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","level","onlyMatchingValuesFn","parentPath","facetCount","filterFacetValues","orderBy","pickBy","formatHierarchicalFacetValue","generateHierarchicalTree","getIndices","indices","assignFacetStats","dest","facetStats","stats","SearchResults","mainSubResponse","_rawResults","parsedQuery","nbHits","processingTimeMS","sumBy","automaticRadius","serverUsed","timeoutCounts","timeoutHits","exhaustiveFacetsCount","exhaustiveNbHits","userData","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","facetValueObject","facetKey","hierarchicalAttributeName","facetIndex","idxAttributeName","isFacetDisjunctive","isFacetConjunctive","facets_stats","compact","disjunctiveFacet","facetResults","dfacet","attributeIndex","dataFromMainRequest","refinedFacet","defaultData","excludes","_state","recSort","sortFn","node","sortedChildren","vanillaSortFn","order","getFacetStatsIfAvailable","getFacetByName","DEFAULT_SORT","opts","facetValues","isExcluded","extractNormalizedFacetValues","options","formatSort","getFacetStats","splitted","configuredName","EventEmitter","_events","_maxListeners","defaultMaxListeners","setMaxListeners","emit","er","len","listeners","context","addListener","listener","m","newListener","warned","trace","on","once","fired","g","removeListener","list","removeAllListeners","listenerCount","evlistener","emitter","ctor","superCtor","DerivedHelper","mainHelper","main","events","detach","detachDerivedHelper","getModifiedState","requestBuilder","_getQueries","queries","indexName","_getHitsSearchParams","_getDisjunctiveFacetSearchParams","_getHitsHierarchicalFacetsAttributes","facetFilters","_getFacetFilters","_getNumericFilters","additionalParams","_getTagFilters","hierarchicalRootLevel","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","vs","orFilters","attributeToRefine","attributesIndex","allAttributes","hierarchicalRefinement","newAttributes","rootLevel","parentLevel","getSearchForFacetQuery","maxFacetHits","stateForSearchForFacetValues","searchForFacetSearchParameters","facetQuery","setter","toIteratee","baseInverter","createInverter","keys2Short","short2Keys","invert","ENCODED_PARAMETERS","decode","shortKey","encode","hexTable","toUpperCase","arrayToObject","plainObjects","assign","queue","o","refs","j","compacted","compactQueue","str","decodeURIComponent","c","charAt","isRegExp","allowPrototypes","mergeTarget","percentTwenties","formatters","RFC1738","RFC3986","arrayPrefixGenerators","brackets","prefix","repeat","toISO","toISOString","delimiter","encoder","utils","encodeValuesOnly","serializeDate","date","skipNulls","strictNullHandling","generateArrayPrefix","allowDots","formatter","objKeys","arrayLimit","decoder","parameterLimit","parseKeys","givenKey","child","segment","chain","leaf","cleanRoot","parseArrays","parseObject","formats","ignoreQueryPrefix","tempObj","cleanStr","parts","part","bracketEqualsPos","pos","parseValues","newObj","format","arrayFormat","joined","addQueryPrefix","basePick","recursiveEncode","mapValues","refinementsParameters","stateKeys","shortener","sortQueryStringValues","prefixRegexp","invertedMapping","isARefinements","isBRefinements","localeCompare","queryString","prefixForParameters","mapping","partialStateWithPrefix","qs","mapKeys","unprefixedKey","partialStateWithParsedNumbers","pick","foreignConfig","config","moreAttributes","safe","stateForUrl","encodedState","shortK","stateQs","moreQs","AlgoliaSearchHelper","client","addAlgoliaAgent","doesClientAgentContainsHelper","version","setClient","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","setCurrentPage","_change","getCurrentPage","currentAgent","_ua","_search","getQuery","searchOnce","cb","tempState","then","content","_originalResponse","catch","searchForFacetValues","userState","clientHasSFFV","initIndex","isDisjunctive","algoliaQuery","facetHits","q","addDisjunctiveRefine","addRefine","addFacetExclusion","addExclude","addTag","removeDisjunctiveRefine","removeRefine","removeFacetExclusion","removeExclude","removeTag","toggleFacetExclusion","toggleExclude","toggleRefine","toggleTag","nextPage","previousPage","getState","getStateAsQueryString","url","getQueryStringFromState","getConfigurationFromQueryString","getStateFromQueryString","getForeignConfigurationInQueryString","getUnrecognizedParametersInQueryString","setStateFromQueryString","triggerChange","updatedState","hasRefinements","isDisjunctiveRefined","hasTag","hasTagRefinements","getIndex","getPage","getTags","parameterName","conjRefinements","r","excludeRefinements","disjRefinements","mainQueries","states","queriesCount","derivedQueries","derivedHelper","derivedState","queryId","_dispatchAlgoliaResponse","_dispatchAlgoliaError","s","specificResults","formattedResponse","containsRefinement","_hasDisjunctiveRefinements","disjunctiveRefinements","clearCache","newClient","getClient","derive","hasPendingRequests","algoliasearchHelper","require$$1","RoutingManager","router","stateMapping","currentUiState","routeToState","read","currentSearchParameters","onUpdate","route","nextUiState","getAllUiStates","getAllSearchParameters","renderURLFromState","stateToRoute","write","firstRenderState","initState","currentConfiguration","setupRouting","callback","_this2","SimpleUIStateMapping","routeState","_construct","Parent","Class","Reflect","construct","sham","Proxy","isNativeReflectConstruct","_setPrototypeOf","p","setPrototypeOf","__proto__","defaultCreateURL","qsModule","location","protocol","hostname","_location$port","port","pathname","portWithPrefix","defaultParseURL","setWindowTitle","title","document","BrowserHistory","windowTitle","_ref3$writeDelay","writeDelay","_ref3$createURL","_ref3$parseURL","parseURL","writeTimer","clearTimeout","setTimeout","history","pushState","_onPopState","event","addEventListener","removeEventListener","component","componentName","descendantName","modifierName","descendent","modifier","suit","highlight","_ref$highlightedTagNa","highlightedTagName","attributeValue","className","snippet","hoganHelpers","numberLocale","formatNumber","toLocaleString","_highlight","_snippet","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","_getPrototypeOf","ROUTING_DEFAULT_OPTIONS","historyRouter","InstantSearch","_EventEmitter","_options$indexName","_options$searchParame","_options$routing","routing","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","urlSync","templatesConfig","helpers","createHelpers","compileOptions","_stalledSearchDelay","_searchFunction","subClass","superClass","_inherits","addWidgets","lastWidget","enhanceConfiguration","_createAbsoluteURL","onHistoryChange","_onHistoryChange","removeWidgets","_this3","w","_this4","routingManager","_mainHelperSearch","helperSearchFunction","_init","_render","_searchStalledTimer","_isSearchStalled","_this5","searchMetadata","isSearchStalled","_this6","widgetDefinition","partialConfiguration","partialWithoutHierarchcialFacets","nextFacets","applyRuleContexts","sharedHelperState","initialRuleContexts","trackedFilters","transformRuleContexts","previousRuleContexts","ruleContexts","newRuleContexts","facetRefinements","trackedFacetValues","getTrackedFacetValues","getRuleContextsFromTrackedFilters","nextRuleContexts","warning","connectQueryRules","unmount","_ref2$trackedFilters","_ref2$transformRuleCo","rules","_ref2$transformItems","onHelperChange","hasTrackedFilters","some","hasStateRefinements","_x","_results$userData","createVoiceSearchHelper","recognition","searchAsYouSpeak","onQueryChange","onStateChange","SpeechRecognitionAPI","webkitSpeechRecognition","SpeechRecognition","getDefaultState","status","transcript","isSpeechFinal","errorCode","isBrowserSupported","isListening","resetState","onStart","onError","onResult","isFinal","onEnd","stop","toggleListening","interimResults","createSuitMixin","classNames","element","widgetName","elements","userClassName","mixins","_widgetParams$indices","saveResults","renderWithAllIndices","isFirstRendering","derivedIndex","_ref5$isFirstRenderin","required","createPanelConsumerMixin","$emit","hasAlreadyEmitted","previousState","previousCanRefine","mapStateToCanRefine","nextCanRefine","_widgetParams$separat","_widgetParams$rootPat","isFacetSet","breadcrumb","prepareItems","x","isLastItem","_widgetParams$include","_widgetParams$exclude","inheritAttrs","nextSearchParameters","removeSearchParameters","mutableState","$attrs","createElement","$scopedSlots","class","_createURL2","noRefinement","createItemKey","capitalize","toLocaleUpperCase","_widgetParams$showPar","isAttributesEqual","isSeparatorEqual","isRootPathEqual","_prepareFacetValues","maxValuesPerFacetConfig","currentLimit","hasExhaustiveItems","hierarchicalMenu","components","HierarchicalMenuList","htmlUnescapes","&amp;","&lt;","&gt;","&quot;","&#39;","reEscapedHtml","reHasEscapedHtml","unescape","parseHighlightedAttribute","splitByPreTag","highlightedValue","preTag","firstValue","shift","isHighlighted","postTag","let","splitByPostTag","highlightProperty","textNode","functional","slots","parsedHighlights","highlightObject","parseAlgoliaHit","AisHighlighter","userItems","defaultValues","helperState","_normalizeItems","hasNoResults","selected","handleChange","instantsearch","createInstantSearchComponent","provide","Vue","mounted","$nextTick","oldApiWarning","validator","apiKey","appId","$slots","$_ais","refinePrevious","refineNext","showShowMoreButton","refinedState","_prepareItems","encodeURI","equal","numericMenu","lowerBound","upperBound","clearedParams","valueAsEqual","_value$split$map2","totalPages","_widgetParams$padding","pager","pages","getMaxPage","showFirst","showLast","showNext","$on","updateCanRefine","$destroy","theme","algoliaUrl","minBound","maxBound","_widgetParams$precisi","precision","hasMinBound","hasMaxBound","formatToNumber","toFixed","rangeFormatter","to","_getCurrentRange","pow","floor","ceil","_getCurrentRefinement","minValue","maxValue","currentRange","newNextMin","newNextMax","nextMin","nextMax","currentRangeMin","currentRangeMax","isResetMin","isResetMax","nextMinAsNumber","nextMaxAsNumber","isResetNewNextMin","isValidNewNextMin","isValidMinCurrentRange","isMinValid","isResetNewNextMax","isValidNewNextMax","isValidMaxCurrentRange","isBoundsDefined","boundsAlreadyDefined","isMinBoundValid","isMaxBoundValid","_ref11","_ref12","facetResult","_ref13","_ref14","_searchParameters$get","_searchParameters$get2","_searchParameters$get3","_ref15","_searchParameters$get4","_searchParameters$get5","previousMin","NaN","_searchParameters$get6","previousMax","minInput","maxInput","updated","minRange","maxRange","_widgetParams$max","_toggleRefinement","allValues","_v","refinedStar","_getRefinedStar","star","stars","ratingMenu","starRatingFromURL","clearedSearchParam","autofocus","showLoadingIndicator","shouldShowLoadingIndicator","submitTitle","resetTitle","onFormSubmit","$refs","blur","onFormReset","SearchInput","AisHighlight","_widgetParams$operato","_widgetParams$escapeF","escapeFacetValues","triggerRefine","formatItems","highlighted","_getLimit","lastResultsFromMainSearch","helperSpecializedSearchFacetValues","isFromSearch","isFirstSearch","searchFacetValues","searchForItems","createSearchForFacetValues","tags","normalizedFacetValues","sp","searchable","searchablePlaceholder","searchForFacetValuesQuery","resultsCopy","stateCopy","stateResults","queryHook","_clear","_cachedClear","previousQuery","setQueryAndSearch","doSearch","localValue","$el","querySelector","isControlled","initialIndex","isInitialIndexInItems","currentIndex","_widgetParams$on","userOn","userOff","off","hasAnOffValue","isCurrentlyRefined","onFacetValue","offFacetValue","offValue","allFacetValues","onData","offData","nextRefinement","_ref8","toggle","_ref9","_ref$voiceSearchHelpe","voiceSearchHelper","voiceListeningState","_widgetParams$searchA","_voiceSearchHelper","buttonTitle","disabledButtonTitle","buttonSvgAttrs","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","errorNotAllowed","rootSlotProps","innerSlotProps","handleClick","currentTarget","plugin","install","localVue","use","instantSearchOptions","findResultsState","algoliaHelper","hydrate","instantSearchState"],"mappings":"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"}